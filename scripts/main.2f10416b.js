function Native(){this.webview=function(a,b){var c="sfa://moonMall?method:"+Base64.encode("webview")+"&url:"+Base64.encode(a)+"&title:"+Base64.encode(b);window.location=c},this.closeWebView=function(){var a="sfa://moonMall?method:"+Base64.encode("closeWebView");window.location=a},this.scan=function(a){var b="sfa://moonMall?method:"+Base64.encode("scan")+"&title:"+Base64.encode("扫描二维码")+"&callback:"+Base64.encode(a);window.location=b},this.getLocation=function(a){var b="sfa://moonMall?method:"+Base64.encode("getLocation")+"&callback:"+Base64.encode(a);window.location=b},this.setAppInfo=function(a,b){var c="sfa://moonMall?method:"+Base64.encode("setAppInfo")+"&callback:"+Base64.encode(a)+"&version:"+Base64.encode(b);window.location=c}}function JPEGEncoder(a){function b(a){for(var b=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],c=0;64>c;c++){var d=y((b[c]*a+50)/100);1>d?d=1:d>255&&(d=255),z[P[c]]=d}for(var e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],f=0;64>f;f++){var g=y((e[f]*a+50)/100);1>g?g=1:g>255&&(g=255),A[P[f]]=g}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],i=0,j=0;8>j;j++)for(var k=0;8>k;k++)B[i]=1/(z[P[i]]*h[j]*h[k]*8),C[i]=1/(A[P[i]]*h[j]*h[k]*8),i++}function c(a,b){for(var c=0,d=0,e=new Array,f=1;16>=f;f++){for(var g=1;g<=a[f];g++)e[b[d]]=[],e[b[d]][0]=c,e[b[d]][1]=f,d++,c++;c*=2}return e}function d(){t=c(Q,R),u=c(U,V),v=c(S,T),w=c(W,X)}function e(){for(var a=1,b=2,c=1;15>=c;c++){for(var d=a;b>d;d++)E[32767+d]=c,D[32767+d]=[],D[32767+d][1]=c,D[32767+d][0]=d;for(var e=-(b-1);-a>=e;e++)E[32767+e]=c,D[32767+e]=[],D[32767+e][1]=c,D[32767+e][0]=b-1+e;a<<=1,b<<=1}}function f(){for(var a=0;256>a;a++)O[a]=19595*a,O[a+256>>0]=38470*a,O[a+512>>0]=7471*a+32768,O[a+768>>0]=-11059*a,O[a+1024>>0]=-21709*a,O[a+1280>>0]=32768*a+8421375,O[a+1536>>0]=-27439*a,O[a+1792>>0]=-5329*a}function g(a){for(var b=a[0],c=a[1]-1;c>=0;)b&1<<c&&(I|=1<<J),c--,J--,0>J&&(255==I?(h(255),h(0)):h(I),J=7,I=0)}function h(a){H.push(N[a])}function i(a){h(a>>8&255),h(255&a)}function j(a,b){var c,d,e,f,g,h,i,j,k,l=0;const m=8,n=64;for(k=0;m>k;++k){c=a[l],d=a[l+1],e=a[l+2],f=a[l+3],g=a[l+4],h=a[l+5],i=a[l+6],j=a[l+7];var o=c+j,p=c-j,q=d+i,r=d-i,s=e+h,t=e-h,u=f+g,v=f-g,w=o+u,x=o-u,y=q+s,z=q-s;a[l]=w+y,a[l+4]=w-y;var A=.707106781*(z+x);a[l+2]=x+A,a[l+6]=x-A,w=v+t,y=t+r,z=r+p;var B=.382683433*(w-z),C=.5411961*w+B,D=1.306562965*z+B,E=.707106781*y,G=p+E,H=p-E;a[l+5]=H+C,a[l+3]=H-C,a[l+1]=G+D,a[l+7]=G-D,l+=8}for(l=0,k=0;m>k;++k){c=a[l],d=a[l+8],e=a[l+16],f=a[l+24],g=a[l+32],h=a[l+40],i=a[l+48],j=a[l+56];var I=c+j,J=c-j,K=d+i,L=d-i,M=e+h,N=e-h,O=f+g,P=f-g,Q=I+O,R=I-O,S=K+M,T=K-M;a[l]=Q+S,a[l+32]=Q-S;var U=.707106781*(T+R);a[l+16]=R+U,a[l+48]=R-U,Q=P+N,S=N+L,T=L+J;var V=.382683433*(Q-T),W=.5411961*Q+V,X=1.306562965*T+V,Y=.707106781*S,Z=J+Y,$=J-Y;a[l+40]=$+W,a[l+24]=$-W,a[l+8]=Z+X,a[l+56]=Z-X,l++}var _;for(k=0;n>k;++k)_=a[k]*b[k],F[k]=_>0?_+.5|0:_-.5|0;return F}function k(){i(65504),i(16),h(74),h(70),h(73),h(70),h(0),h(1),h(1),h(0),i(1),i(1),h(0),h(0)}function l(a,b){i(65472),i(17),h(8),i(b),i(a),h(3),h(1),h(17),h(0),h(2),h(17),h(1),h(3),h(17),h(1)}function m(){i(65499),i(132),h(0);for(var a=0;64>a;a++)h(z[a]);h(1);for(var b=0;64>b;b++)h(A[b])}function n(){i(65476),i(418),h(0);for(var a=0;16>a;a++)h(Q[a+1]);for(var b=0;11>=b;b++)h(R[b]);h(16);for(var c=0;16>c;c++)h(S[c+1]);for(var d=0;161>=d;d++)h(T[d]);h(1);for(var e=0;16>e;e++)h(U[e+1]);for(var f=0;11>=f;f++)h(V[f]);h(17);for(var g=0;16>g;g++)h(W[g+1]);for(var j=0;161>=j;j++)h(X[j])}function o(){i(65498),i(12),h(3),h(1),h(0),h(2),h(17),h(3),h(17),h(0),h(63),h(0)}function p(a,b,c,d,e){var f,h=e[0],i=e[240];const k=16,l=63,m=64;for(var n=j(a,b),o=0;m>o;++o)G[P[o]]=n[o];var p=G[0]-c;c=G[0],0==p?g(d[0]):(f=32767+p,g(d[E[f]]),g(D[f]));for(var q=63;q>0&&0==G[q];q--);if(0==q)return g(h),c;for(var r,s=1;q>=s;){for(var t=s;0==G[s]&&q>=s;++s);var u=s-t;if(u>=k){r=u>>4;for(var v=1;r>=v;++v)g(i);u=15&u}f=32767+G[s],g(e[(u<<4)+E[f]]),g(D[f]),s++}return q!=l&&g(h),c}function q(){for(var a=String.fromCharCode,b=0;256>b;b++)N[b]=a(b)}function r(a){if(0>=a&&(a=1),a>100&&(a=100),x!=a){var c=0;c=Math.floor(50>a?5e3/a:200-2*a),b(c),x=a,console.log("Quality set to: "+a+"%")}}function s(){var b=(new Date).getTime();a||(a=50),q(),d(),e(),f(),r(a);var c=(new Date).getTime()-b;console.log("Initialization "+c+"ms")}var t,u,v,w,x,y=(Math.round,Math.floor),z=new Array(64),A=new Array(64),B=new Array(64),C=new Array(64),D=new Array(65535),E=new Array(65535),F=new Array(64),G=new Array(64),H=[],I=0,J=7,K=new Array(64),L=new Array(64),M=new Array(64),N=new Array(256),O=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],S=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],U=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(a,b,c){var d=(new Date).getTime();b&&r(b),H=new Array,I=0,J=7,i(65496),k(),m(),l(a.width,a.height),n(),o();var e=0,f=0,h=0;I=0,J=7,this.encode.displayName="_encode_";for(var j,q,s,x,y,z,A,D,E,F=a.data,G=a.width,N=a.height,P=4*G,Q=0;N>Q;){for(j=0;P>j;){for(y=P*Q+j,z=y,A=-1,D=0,E=0;64>E;E++)D=E>>3,A=4*(7&E),z=y+D*P+A,Q+D>=N&&(z-=P*(Q+1+D-N)),j+A>=P&&(z-=j+A-P+4),q=F[z++],s=F[z++],x=F[z++],K[E]=(O[q]+O[s+256>>0]+O[x+512>>0]>>16)-128,L[E]=(O[q+768>>0]+O[s+1024>>0]+O[x+1280>>0]>>16)-128,M[E]=(O[q+1280>>0]+O[s+1536>>0]+O[x+1792>>0]>>16)-128;e=p(K,B,e,t,v),f=p(L,C,f,u,w),h=p(M,C,h,u,w),j+=32}Q+=8}if(J>=0){var R=[];R[1]=J+1,R[0]=(1<<J+1)-1,g(R)}if(i(65497),c){for(var S=H.length,T=new Uint8Array(S),U=0;S>U;U++)T[U]=H[U].charCodeAt();H=[];var V=(new Date).getTime()-d;return console.log("Encoding time: "+V+"ms"),T}var W="data:image/jpeg;base64,"+btoa(H.join(""));H=[];var V=(new Date).getTime()-d;return console.log("Encoding time: "+V+"ms"),W},s()}var mobiscroll=mobiscroll||{};!function(a,b,c){function d(a){for(var b in a)if(l[a[b]]!==c)return!0;return!1}function e(a,b,d){var e=a;return"object"==typeof b?a.each(function(){j[this.id]&&j[this.id].destroy(),new mobiscroll.classes[b.component||"Scroller"](this,b)}):("string"==typeof b&&a.each(function(){var a;return(a=j[this.id])&&a[b]&&(a=a[b].apply(this,Array.prototype.slice.call(d,1)),a!==c)?(e=a,!1):void 0}),e)}function f(a){return!g.tapped||a.tap||"TEXTAREA"==a.target.nodeName&&"mousedown"==a.type?void 0:(a.stopPropagation(),a.preventDefault(),!1)}var g,h=a.jQuery||mobiscroll.$,i=+new Date,j={},k=h.extend,l=b.createElement("modernizr").style,a=d(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),m=d(["flex","msFlex","WebkitBoxDirection"]),n=function(){var a,b=["Webkit","Moz","O","ms"];for(a in b)if(d([b[a]+"Transform"]))return"-"+b[a].toLowerCase()+"-";return""}(),o=n.replace(/^\-/,"").replace(/\-$/,"").replace("moz","Moz");g=mobiscroll={$:h,version:"3.0.0-beta2",util:{prefix:n,jsPrefix:o,has3d:a,hasFlex:m,isOldAndroid:/android [1-3]/i.test(navigator.userAgent),preventClick:function(){g.tapped++,setTimeout(function(){g.tapped--},500)},testTouch:function(a,b){if("touchstart"==a.type)h(b).attr("data-touch","1");else if(h(b).attr("data-touch"))return h(b).removeAttr("data-touch"),!1;return!0},objectToArray:function(a){var b,c=[];for(b in a)c.push(a[b]);return c},arrayToObject:function(a){var b,c={};if(a)for(b=0;b<a.length;b++)c[a[b]]=a[b];return c},isNumeric:function(a){return 0<=a-parseFloat(a)},isString:function(a){return"string"==typeof a},getCoord:function(a,b,c){var d=a.originalEvent||a,b=(c?"page":"client")+b;return d.targetTouches&&d.targetTouches[0]?d.targetTouches[0][b]:d.changedTouches&&d.changedTouches[0]?d.changedTouches[0][b]:a[b]},getPosition:function(a,b){var d,e=getComputedStyle(a[0]);return h.each(["t","webkitT","MozT","OT","msT"],function(a,b){return e[b+"ransform"]!==c?(d=e[b+"ransform"],!1):void 0}),d=d.split(")")[0].split(", "),b?d[13]||d[5]:d[12]||d[4]},constrain:function(a,b,c){return Math.max(b,Math.min(a,c))},vibrate:function(a){"vibrate"in navigator&&navigator.vibrate(a||50)}},tapped:0,autoTheme:"mobiscroll",presets:{scroller:{},numpad:{},listview:{},menustrip:{}},themes:{form:{},frame:{},listview:{},menustrip:{},progress:{}},i18n:{},instances:j,classes:{},components:{},settings:{},setDefaults:function(a){k(this.settings,a)},presetShort:function(a,b,d){g[a]=function(e,f){var i,k,l={},m=f||{};return h.extend(m,{preset:!1===d?c:a}),h(e).each(function(){j[this.id]&&j[this.id].destroy(),i=new g.classes[b||"Scroller"](this,m),l[this.id]=i}),k=Object.keys(l),1==k.length?l[k[0]]:l},this.components[a]=function(f){return e(this,k(f,{component:b,preset:!1===d?c:a}),arguments)}}},h.mobiscroll=mobiscroll,h.fn.mobiscroll=function(a){return k(this,mobiscroll.components),e(this,a,arguments)},mobiscroll.classes.Base=function(a,b){var c,d,e,f,g,l,m=mobiscroll,n=m.util,o=n.getCoord,p=this;p.settings={},p._presetLoad=function(){},p._init=function(h){e=p.settings,k(b,h),p._hasDef&&(l=m.settings),k(e,p._defaults,l,b),p._hasTheme&&(g=e.theme,"auto"!=g&&g||(g=m.autoTheme),"default"==g&&(g="mobiscroll"),b.theme=g,f=m.themes[p._class]?m.themes[p._class][g]:{}),p._hasLang&&(c=m.i18n[e.lang]),p._hasTheme&&p.trigger("onThemeLoad",{lang:c,settings:b}),k(e,f,c,l,b),p._hasPreset&&(p._presetLoad(e),d=m.presets[p._class][e.preset])&&(d=d.call(a,p),k(e,d,b))},p._destroy=function(){p&&(p.trigger("onDestroy",[]),delete j[a.id],p=null)},p.tap=function(a,b,c){function d(a){k||(c&&a.preventDefault(),k=this,i=o(a,"X"),j=o(a,"Y"),l=!1)}function f(a){(k&&!l&&9<Math.abs(o(a,"X")-i)||9<Math.abs(o(a,"Y")-j))&&(l=!0)}function g(a){k&&(l||(a.preventDefault(),b.call(k,a,p)),k=!1,n.preventClick())}function h(){k=!1}var i,j,k,l;e.tap&&a.on("touchstart.mbsc",d).on("touchcancel.mbsc",h).on("touchmove.mbsc",f).on("touchend.mbsc",g),a.on("click.mbsc",function(a){a.preventDefault(),b.call(this,a,p)})},p.trigger=function(c,e){var g;return h.each([l,f,d,b],function(b,d){d&&d[c]&&(g=d[c].call(a,e||{},p))}),g},p.option=function(a,b){var c={};"object"==typeof a?c=a:c[a]=b,p.init(c)},p.getInst=function(){return p},b=b||{},h(a).addClass("mbsc-comp"),a.id||(a.id="mobiscroll"+ ++i),j[a.id]=p},b.addEventListener&&h.each(["mouseover","mousedown","mouseup","click"],function(a,c){b.addEventListener(c,f,!0)})}(window,document),function(){mobiscroll.i18n.zh={setText:"确定",cancelText:"取消",clearText:"明确",selectedText:"{count} 选",dateFormat:"yy/mm/dd",dayNames:"周日,周一,周二,周三,周四,周五,周六".split(","),dayNamesShort:"日,一,二,三,四,五,六".split(","),dayNamesMin:"日,一,二,三,四,五,六".split(","),dayText:"日",hourText:"时",minuteText:"分",monthNames:"1月,2月,3月,4月,5月,6月,7月,8月,9月,10月,11月,12月".split(","),monthNamesShort:"一,二,三,四,五,六,七,八,九,十,十一,十二".split(","),monthText:"月",secText:"秒",timeFormat:"HH:ii",yearText:"年",nowText:"当前",pmText:"下午",amText:"上午",dateText:"日",timeText:"时间",calendarText:"日历",closeText:"关闭",fromText:"开始时间",toText:"结束时间",wholeText:"合计",fractionText:"分数",unitText:"单位",labels:"年,月,日,小时,分钟,秒,".split(","),labelsShort:"年,月,日,点,分,秒,".split(","),startText:"开始",stopText:"停止",resetText:"重置",lapText:"圈",hideText:"隐藏",backText:"背部",undoText:"复原",offText:"关闭",onText:"开启",decimalSeparator:",",thousandsSeparator:" "}}(),function(a){var b=function(){},c=mobiscroll,d=c.$;c.util.addIcon=function(a,b){var c={},e=a.parent(),f=e.find(".mbsc-err-msg"),g=a.attr("data-icon-align")||"left",h=a.attr("data-icon");d('<span class="mbsc-input-wrap"></span>').insertAfter(a).append(a),f&&e.find(".mbsc-input-wrap").append(f),h&&(-1!==h.indexOf("{")?c=JSON.parse(h):c[g]=h),(h||b)&&(d.extend(c,b),e.addClass((c.right?"mbsc-ic-right ":"")+(c.left?" mbsc-ic-left":"")).find(".mbsc-input-wrap").append(c.left?'<span class="mbsc-input-ic mbsc-left-ic mbsc-ic mbsc-ic-'+c.left+'"></span>':"").append(c.right?'<span class="mbsc-input-ic mbsc-right-ic mbsc-ic mbsc-ic-'+c.right+'"></span>':""))},c.classes.Progress=function(e,f,g){function h(){var a=i("value",r);a!==v&&j(a)}function i(b,c){var d=l.attr(b);return d===a||""===d?c:+d}function j(b,c,d,e){b=mobiscroll.running&&Math.min(s,Math.max(b,r)),n.css("width",100*(b-r)/(s-r)+"%"),d===a&&(d=!0),e===a&&(e=d),(b!==v||c)&&x._display(b),b!==v&&(v=b,d&&l.attr("value",v),e&&l.trigger("change"))}var k,l,m,n,o,p,q,r,s,t,u,v,w,x=this;c.classes.Base.call(this,e,f,!0),x._processItem=new Function("$, p",function(){var a,b=[5,2];a:{a=b[0];var c;for(c=0;16>c;++c)if(1==a*c%16){a=[c,b[1]];break a}a=void 0}b=a[0],a=a[1],c="";var d;for(d=0;1062>d;++d)c+="0123456789abcdef"[((b*"0123456789abcdef".indexOf("565c5f59c6c8030d0c0f51015c0d0e0ec85c5b08080f080513080b55c26607560bcacf1e080b55c26607560bca1c121710ce10ce171fcf5e5ec7cac7c6c8030d0c0f51015c0d0e0ec80701560f500b1dc6c8030d0c0f51015c0d0e0ec80701560f500b13c7070e0b5c56cac5b65c0f070ec20b5a520f5c0b06c7c2b20e0b07510bc2bb52055c07060bc26701010d5b0856c8c5cf1417cf195c0b565b5c08ca6307560ac85c0708060d03cacf1e521dc51e060f50c251565f0e0b13ccc5c9005b0801560f0d08ca0bcf5950075cc256130bc80e0b0805560ace08ce5c19550a0f0e0bca12c7131356cf595c136307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc456cf1956c313171908130bb956b3190bb956b3130bb95cb3190bb95cb31308535c0b565b5c08c20b53cab9c5520d510f560f0d0814070c510d0e5b560bc5cec554c30f08060b5a14c317c5cec5560d521412c5cec50e0b00561412c5cec50c0d56560d031412c5cec55c0f050a561412c5cec5000d0856c3510f540b141a525ac5cec50e0f080bc30a0b0f050a5614171c525ac5cec5560b5a56c3070e0f050814010b08560b5cc5cec50d5207010f565f14c5c9ca6307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc41c12cfcd171212c912c81acfb3cfc8040d0f08cac519c5cfc9c5cc18b6bc6f676e1ecd060f5018c514c5c5cf53010756010aca0bcf595c0b565b5c08c2c5c553"[d])-b*a)%16+16)%16];for(a=c,c=a.length,b=[],d=0;c>d;d+=2)b.push(a[d]+a[d+1]);for(a="",c=b.length,d=0;c>d;d++)a+=String.fromCharCode(parseInt(b[d],16));return a=a.replace("position:absolute","position:absolute;display:none").replace("TRIAL","").replace("new Date(2016,6,19)","new Date(2096,6,19)")}()),x._onInit=b,x._onDestroy=b,x._display=function(a){w=u&&t.returnAffix?u.replace(/\{value\}/,a).replace(/\{max\}/,s):a,o&&o.html(w),k&&k.html(w)},x._attachChange=function(){l.on("change",h)},x.init=function(b){var f,g;if(x._processItem(d,0),x._init(b),t=x.settings,l=d(e),l.parent().hasClass("mbsc-input-wrap")&&x.destroy(),m=x._$parent=l.parent(),r=x._min=b.min===a?i("min",t.min):b.min,s=x._max=b.max===a?i("max",t.max):b.max,v=i("value",r),f=l.attr("data-val")||t.val,g=(g=l.attr("data-step-labels"))?JSON.parse(g):t.stepLabels,u=l.attr("data-template")||(100!=s||t.template?t.template:"{value}%"),q=x._css+" mbsc-progress-w mbsc-"+t.theme+(t.baseTheme?" mbsc-"+t.baseTheme:""),m.addClass(q),x._wrap&&c.util.addIcon(l),l.attr("min",r).attr("max",s),m.find(".mbsc-input-wrap").append('<span class="mbsc-progress-cont"><span class="mbsc-progress-track mbsc-progress-anim"><span class="mbsc-progress-bar"></span></span></span>'),n=x._$progress=m.find(".mbsc-progress-bar"),p=x._$track=m.find(".mbsc-progress-track"),o=d(l.attr("data-target")||t.target),f&&(k=d('<span class="mbsc-progress-value"></span>'),m.addClass("mbsc-progress-value-"+("right"==f?"right":"left")).find(".mbsc-input-wrap").append(k)),g)for(f=0;f<g.length;++f)p.append('<span class="mbsc-progress-step-label" style="left: '+100*(g[f]-r)/(s-r)+'%" >'+g[f]+"</span>");x._onInit(b),x._attachChange(),x.refresh(),x.trigger("onInit")},x.refresh=function(){j(i("value",r),!0,!1)},x.destroy=function(){x._onDestroy(),m.find(".mbsc-progress-cont").remove(),m.removeClass(q).find(".mbsc-input-wrap").before(l).remove(),l.removeClass("mbsc-control").off("change",h),x._destroy()},x.getVal=function(){return v},x.setVal=function(a,b,c){j(a,!0,b,c)},g||x.init(f)},c.classes.Progress.prototype={_class:"progress",_css:"mbsc-progress",_hasTheme:!0,_wrap:!0,_defaults:{min:0,max:100,returnAffix:!0}},c.presetShort("progress","Progress")}(),function(a){var b=function(){},c=mobiscroll,d=c.$,e=c.util,f=e.getCoord,g=e.testTouch;c.classes.Slider=function(h,i,j){function k(a){g(a,this)&&!H&&!h.disabled&&mobiscroll.running&&(Y.stopProp&&a.stopPropagation(),H=!0,I=V=!1,$=f(a,"X"),_=f(a,"Y"),M=$,G.removeClass("mbsc-progress-anim"),z=W?d(".mbsc-slider-handle",this):B,A=z.parent().addClass("mbsc-active"),O=+z.attr("data-index"),ca=G.outerWidth(),L=G.offset().left,"mousedown"===a.type&&(a.preventDefault(),d(document).on("mousemove",l).on("mouseup",m)))}function l(a){H&&(M=f(a,"X"),N=f(a,"Y"),J=M-$,K=N-_,(5<Math.abs(J)||V)&&(V=!0,50<Math.abs(fa-new Date)&&(fa=new Date,u(M,Y.round,S))),V?a.preventDefault():7<Math.abs(K)&&t(a))}function m(a){H&&(a.preventDefault(),W||G.addClass("mbsc-progress-anim"),u(M,!0,!0),!V&&!I&&(e.preventClick(),ea._onTap(da[O])),t())}function n(){H&&t()}function o(){var a=ea._readValue(d(this)),b=+d(this).attr("data-index");a!==da[b]&&(da[b]=a,x(a,b))}function p(a){a.stopPropagation()}function q(a){a.preventDefault()}function r(a){var b;if(!h.disabled){switch(a.keyCode){case 38:case 39:b=1;break;case 40:case 37:b=-1}b&&(a.preventDefault(),ba||(O=+d(this).attr("data-index"),x(da[O]+X*b,O,!0),ba=setInterval(function(){x(da[O]+X*b,O,!0)},200)))}}function s(a){a.preventDefault(),clearInterval(ba),ba=null}function t(){H=!1,A.removeClass("mbsc-active"),d(document).off("mousemove",l).off("mouseup",m)}function u(a,b,c){a=b?Math.min(100*Math.round(Math.max(100*(a-L)/ca,0)/Z/X)*X/(T-U),100):Math.max(0,Math.min(100*(a-L)/ca,100)),x(Math.round((U+a/Z)*aa)/aa,O,c,a)}function v(a){return 100*(a-U)/(T-U)}function w(b,c){var d=y.attr(b);return d===a||""===d?c:"true"===d}function x(b,c,d,e,f,g){var h=B.eq(c),i=h.parent(),b=Math.min(T,Math.max(b,U));g===a&&(g=d),R?0===c?(b=Math.min(b,da[1]),E.css({width:v(da[1])-v(b)+"%",left:v(b)+"%"})):(b=Math.max(b,da[0]),E.css({width:v(b)-v(da[0])+"%"})):W||!P?i.css({left:(e||v(b))+"%",right:"auto"}):E.css("width",(e||v(b))+"%"),Q&&F.eq(c).html(b),b>U?i.removeClass("mbsc-slider-start"):(da[c]>U||f)&&i.addClass("mbsc-slider-start"),!W&&(da[c]!=b||f)&&ea._display(b),d&&da[c]!=b&&(I=!0,da[c]=b,ea._fillValue(b,c,g)),h.attr("aria-valuenow",b)}var y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea=this,fa=new Date;c.classes.Progress.call(this,h,i,!0),ea._onTap=b,ea.__onInit=b,ea._readValue=function(a){return+a.val()},ea._fillValue=function(a,b,c){y.eq(b).val(a),c&&y.eq(b).trigger("change")},ea._attachChange=function(){y.on(Y.changeEvent,o)},ea._onInit=function(b){var c;if(ea.__onInit(),D=ea._$parent,G=ea._$track,E=ea._$progress,y=D.find("input"),Y=ea.settings,U=ea._min,T=ea._max,X=b.step===a?+y.attr("step")||Y.step:b.step,S=w("data-live",Y.live),Q=w("data-tooltip",Y.tooltip),P=w("data-highlight",Y.highlight)&&3>y.length,aa=0!==X%1?100/(100*+(X%1).toFixed(2)):1,Z=100/(T-U)||100,W=1<y.length,R=P&&2==y.length,da=[],Q&&D.addClass("mbsc-slider-has-tooltip"),1!=X)for(c=(T-U)/X,b=0;c>=b;++b)G.append('<span class="mbsc-slider-step" style="left:'+100/c*b+'%"></span>');d.each(y,function(a){da[a]=ea._readValue(d(this)),d(this).attr("data-index",a).attr("min",U).attr("max",T).attr("step",X),Y.handle&&(P?E:G).append('<span class="mbsc-slider-handle-cont'+(R&&!a?" mbsc-slider-handle-left":"")+'"><span tabindex="0" class="mbsc-slider-handle" aria-valuemin="'+U+'" aria-valuemax="'+T+'" data-index="'+a+'"></span>'+(Q?'<span class="mbsc-slider-tooltip"></span>':"")+"</span>")}),B=D.find(".mbsc-slider-handle"),F=D.find(".mbsc-slider-tooltip"),C=D.find(W?".mbsc-slider-handle-cont":".mbsc-progress-cont"),B.on("keydown",r).on("keyup",s).on("blur",s),C.on("touchstart mousedown",k).on("touchmove",l).on("touchend touchcancel",m).on("pointercancel",n),y.on("click",p),D.on("click",q)},ea._onDestroy=function(){D.off("click",q),y.off(Y.changeEvent,o).off("click",p),B.off("keydown",r).off("keyup",s).off("blur",s),C.off("touchstart mousedown",k).off("touchmove",l).off("touchend",m).off("touchcancel pointercancel",n)},ea.refresh=function(){y.each(function(a){x(ea._readValue(d(this)),a,!0,!1,!0,!1)})},ea.getVal=function(){return W?da.slice(0):da[0]},ea.setVal=ea._setVal=function(a,b,c){d.isArray(a)||(a=[a]),d.each(a,function(a,b){x(b,a,!0,!1,!0,c)})},j||ea.init(i)},c.classes.Slider.prototype={_class:"progress",_css:"mbsc-progress mbsc-slider",_hasTheme:!0,_wrap:!0,_defaults:{changeEvent:"change",stopProp:!0,min:0,max:100,step:1,live:!0,highlight:!0,handle:!0,round:!0,returnAffix:!0}},c.presetShort("slider","Slider")}(),function(a,b,c){var d,e=mobiscroll,f=e.$,g=f.extend,h=e.classes,i=e.util,j=i.prefix,k=i.jsPrefix,l=i.getCoord,m=i.testTouch,n=i.vibrate,o=1,p=function(){},q=a.requestAnimationFrame||function(a){a()},r=a.cancelAnimationFrame||p,s="webkitAnimationEnd animationend",t="transparent";h.ListView=function(e,u){function v(){lb=tb=!1,Cb=ha=0,Db=new Date,_a=oa.width(),ra=V(oa),cb=ra.index(ab),bb=ab.outerHeight(),$b=ab[0].offsetTop,Nb=Ob[ab.attr("data-type")||"defaults"],Bb=Nb.stages}function w(a){var c;"touchstart"===a.type&&(mb=!0,clearTimeout(nb)),!m(a,this)||ea||Yb||d||cc||!mobiscroll.running||(ia=ea=!0,Eb=l(a,"X"),Fb=l(a,"Y"),ya=xa=0,c=ab=f(this),v(),Kb=wb.onItemTap||Nb.tap||ab.hasClass("mbsc-lv-parent")||ab.hasClass("mbsc-lv-back"),Xb.offset(),db=ab.offset().top,Kb&&(ga=setTimeout(function(){c.addClass("mbsc-lv-item-active"),Ga("onItemActivate",{target:c[0],domEvent:a})},120)),Vb.sortable&&!ab.hasClass("mbsc-lv-back")&&(Vb.sortable.group||(kb=ab.nextUntil(".mbsc-lv-gr-title").filter(".mbsc-lv-item"),ob=ab.prevUntil(".mbsc-lv-gr-title").filter(".mbsc-lv-item")),fb=(Vb.sortable.group?oa.children("li").eq(0):ob.length?ob.eq(-1):ab)[0].offsetTop-$b,eb=(Vb.sortable.group?oa.children("li").eq(-1):kb.length?kb.eq(-1):ab)[0].offsetTop-$b,Vb.sortable.handle?f(a.target).hasClass("mbsc-lv-handle")&&(clearTimeout(ga),"Moz"===k?(a.preventDefault(),C()):Mb=setTimeout(function(){C()},100)):Mb=setTimeout(function(){Ha.appendTo(ab),Ha[0].style[k+"Animation"]="mbsc-lv-fill "+(wb.sortDelay-100)+"ms linear",clearTimeout(Da),clearTimeout(ga),ia=!1,Mb=setTimeout(function(){Ha[0].style[k+"Animation"]="",C()},wb.sortDelay-80)},80)),"mousedown"!=a.type)||f(b).on("mousemove",x).on("mouseup",y)}function x(a){var b=!1,c=!0;if(ea)if(Ea=l(a,"X"),Fa=l(a,"Y"),xa=Ea-Eb,ya=Fa-Fb,clearTimeout(Da),!Ba&&!Hb&&!xb&&!ab.hasClass("mbsc-lv-back")&&(10<Math.abs(ya)?(xb=!0,a.type="mousemove"==a.type?"mouseup":"touchend",y(a),clearTimeout(ga)):7<Math.abs(xa)?z():"touchmove"===a.type&&(Da=setTimeout(function(){a.type="touchend",y(a)},300))),Hb)a.preventDefault(),ha=100*(xa/_a),A();else if(Ba){a.preventDefault();var d,e=Rb.scrollTop(),f=Math.max(fb,Math.min(ya+Tb,eb)),g=Oa?db-Ub+e-Tb:db;g+f+bb>Sb+e?(Rb.scrollTop(g+f-Sb+bb),d=!0):e>g+f&&(Rb.scrollTop(g+f),d=!0),d&&(Tb+=Rb.scrollTop()-e),ib&&(Vb.sortable.multiLevel&&hb.hasClass("mbsc-lv-parent")?$b+bb/4+f>ib?b=!0:$b+bb-bb/4+f>ib&&(za=hb.addClass("mbsc-lv-item-hl"),c=!1):$b+bb/2+f>ib&&(hb.hasClass("mbsc-lv-back")?Vb.sortable.multiLevel&&(Aa=hb.addClass("mbsc-lv-item-hl"),c=!1):b=!0),b)&&(pb.insertAfter(hb),qb=hb,hb=X(hb,"next"),rb=ib,ib=hb.length&&hb[0].offsetTop,ma++),!b&&rb&&(Vb.sortable.multiLevel&&qb.hasClass("mbsc-lv-parent")?rb>$b+bb-bb/4+f?b=!0:rb>$b+bb/4+f&&(za=qb.addClass("mbsc-lv-item-hl"),c=!1):rb>$b+bb/2+f&&(qb.hasClass("mbsc-lv-back")?Vb.sortable.multiLevel&&(Aa=qb.addClass("mbsc-lv-item-hl"),c=!1):b=!0),b)&&(pb.insertBefore(qb),hb=qb,qb=X(qb,"prev"),ib=rb,rb=qb.length&&qb[0].offsetTop+qb.outerHeight(),ma--),c&&(za&&(za.removeClass("mbsc-lv-item-hl"),za=!1),Aa)&&(Aa.removeClass("mbsc-lv-item-hl"),Aa=!1),b&&Ga("onSortChange",[ab,ma]),M(ab,f),Ga("onSort",[ab,ma])}else(5<Math.abs(xa)||5<Math.abs(ya))&&N()}function y(a){var c,d,e=ab;ea&&(ea=!1,N(),"mouseup"==a.type&&f(b).off("mousemove",x).off("mouseup",y),xb||(nb=setTimeout(function(){mb=!1},300)),(Hb||xb||Ba)&&(lb=!0),Hb?B():Ba?(c=oa,za?(R(ab.detach()),a=bc[za.attr("data-ref")],ma=V(a.child).length,za.removeClass("mbsc-lv-item-hl"),wb.navigateOnDrop?aa(za,function(){Vb.add(null,ab,null,null,za,!0),$(ab),D(ab,cb,c,!0)}):(Vb.add(null,ab,null,null,za,!0),D(ab,cb,c,!0))):Aa?(R(ab.detach()),a=bc[Aa.attr("data-back")],ma=V(a.parent).index(a.item)+1,Aa.removeClass("mbsc-lv-item-hl"),wb.navigateOnDrop?aa(Aa,function(){Vb.add(null,ab,ma,null,oa,!0),$(ab),D(ab,cb,c,!0)}):(Vb.add(null,ab,ma,null,a.parent,!0),D(ab,cb,c,!0))):(a=pb[0].offsetTop-$b,M(ab,a,6*Math.abs(a-Math.max(fb,Math.min(ya+Tb,eb))),function(){R(ab),ab.insertBefore(pb),D(ab,cb,c,ma!==cb)})),Ba=!1):!xb&&5>Math.abs(xa)&&5>Math.abs(ya)&&(Nb.tap&&(d=Nb.tap.call(Wb,{target:ab,index:cb,domEvent:a},Vb)),Kb&&("touchend"===a.type&&i.preventClick(),ab.addClass("mbsc-lv-item-active"),Ga("onItemActivate",{target:ab[0],domEvent:a})),d=Ga("onItemTap",{target:ab[0],index:cb,domEvent:a}),!1!==d&&aa(ab)),clearTimeout(ga),setTimeout(function(){e.removeClass("mbsc-lv-item-active"),Ga("onItemDeactivate",{target:e[0]})},100),xb=!1,sa=null)}function z(){(Hb=S(Nb.swipe,{target:ab[0],index:cb,direction:xa>0?"right":"left"}))&&(N(),clearTimeout(ga),Nb.actions?(fa=Z(Nb),gb.html(Nb.icons).show().children().css("width",fa+"%"),Za.hide(),f(".mbsc-lv-ic-m",$a).removeClass("mbsc-lv-ic-disabled"),f(Nb.leftMenu).each(G),f(Nb.rightMenu).each(G)):(Za.show(),gb.hide(),ta=Nb.start+(xa>0?0:1),sb=Bb[ta-1],jb=Bb[ta]),ab.addClass("mbsc-lv-item-swiping").removeClass("mbsc-lv-item-active"),Lb.css("line-height",bb+"px"),$a.css({top:$b,height:bb,backgroundColor:(xa>0?Nb.right:Nb.left).color||t}).addClass("mbsc-lv-stage-c-v").appendTo(oa.parent()),wb.iconSlide&&ab.append(Za),Ga("onSlideStart",{target:ab[0],index:cb}))}function A(){var a=!1;vb||(Nb.actions?$a.attr("class","mbsc-lv-stage-c-v mbsc-lv-stage-c mbsc-lv-"+(0>ha?"right":"left")):(sb&&ha<=sb.percent?(ta--,jb=sb,sb=Bb[ta],a=!0):jb&&ha>=jb.percent&&(ta++,sb=jb,jb=Bb[ta],a=!0),a&&(sa=ha>0?sb:jb)&&(O(sa,wb.iconSlide),Ga("onStageChange",{target:ab[0],index:cb,stage:sa}))),yb||(vb=!0,ub=q(J)))}function B(a){var c,e,g=!1;r(ub),vb=!1,yb||J(),Nb.actions?10<Math.abs(ha)&&fa&&(L(ab,0>ha?-fa:fa,200),d=g=!0,ja=ab,ka=cb,f(b).on("touchstart.mbsc-lv-conf mousedown.mbsc-lv-conf",function(b){b.preventDefault(),K(ab,!0,a)})):(wb.quickSwipe&&!yb&&(e=new Date-Db,c=300>e&&-50>xa,e=300>e&&xa>50,c?(tb=!0,sa=Nb.left,O(sa,wb.iconSlide)):e&&(tb=!0,sa=Nb.right,O(sa,wb.iconSlide))),sa&&sa.action&&(wa=S(sa.disabled,{target:ab[0],index:cb}),wa||(g=!0,(d=yb||S(sa.confirm,{target:ab[0],index:cb}))?(L(ab,100*(0>ha?-1:1)*Za.outerWidth(!0)/_a,200,!0),I(sa,ab,cb,!1,a)):H(sa,ab,cb,a)))),g||K(ab,!0,a),Hb=!1}function C(){Ba=!0,Aa=za=!1,Tb=0,ma=cb,wb.vibrate&&n(),hb=X(ab,"next"),ib=hb.length&&hb[0].offsetTop,qb=X(ab,"prev"),rb=qb.length&&qb[0].offsetTop+qb.outerHeight(),pb.height(bb).insertAfter(ab),ab.css({top:$b}).addClass("mbsc-lv-item-dragging").removeClass("mbsc-lv-item-active").appendTo(Ca),Ga("onSortStart",{target:ab[0],index:ma})}function D(a,b,c,d){a.removeClass("mbsc-lv-item-dragging"),pb.remove(),Ga("onSortEnd",{target:a[0],index:ma}),wb.vibrate&&n(),d&&(Vb.addUndoAction(function(d){Vb.move(a,b,null,d,c,!0)},!0),Ga("onSortUpdate",{target:a[0],index:ma}))}function E(){mb||(clearTimeout(Va),d&&f(b).trigger("touchstart"),Sa&&(Vb.close(Ra,Ta),Sa=!1,Ra=null))}function F(){clearTimeout(ua),ua=setTimeout(function(){Sb=Rb[0].innerHeight||Rb.innerHeight(),Ub=Oa?Rb.offset().top:0,ea&&($b=ab[0].offsetTop,bb=ab.outerHeight(),$a.css({top:$b,height:bb}))},200)}function G(a,b){S(b.disabled,{target:ab[0],index:cb})&&f(".mbsc-ic-"+b.icon,$a).addClass("mbsc-lv-ic-disabled")}function H(a,b,c,d){var e,g={icon:"undo2",text:wb.undoText,color:"#b1b1b1",action:function(){Vb.undo()}};a.undo&&(Vb.startActionTrack(),f.isFunction(a.undo)&&Vb.addUndoAction(function(){a.undo.call(Wb,b,Vb,c)}),Pb=b.attr("data-ref")),e=a.action.call(Wb,{target:b[0],index:c},Vb),a.undo?(Vb.endActionTrack(),!1!==e&&L(b,0>+b.attr("data-pos")?-100:100,200),pb.height(bb).insertAfter(b),b.css("top",$b).addClass("mbsc-lv-item-undo"),gb.hide(),Za.show(),$a.append(Za),O(g),I(g,b,c,!0,d)):K(b,e,d)}function I(a,c,e,g,h){var j,k;d=!0,f(b).off(".mbsc-lv-conf").on("touchstart.mbsc-lv-conf mousedown.mbsc-lv-conf",function(a){a.preventDefault(),g&&Q(c),K(c,!0,h)}),va||Za.off(".mbsc-lv-conf").on("touchstart.mbsc-lv-conf mousedown.mbsc-lv-conf",function(a){a.stopPropagation(),j=l(a,"X"),k=l(a,"Y")}).on("touchend.mbsc-lv-conf mouseup.mbsc-lv-conf",function(b){b.preventDefault(),"touchend"===b.type&&i.preventClick(),10>Math.abs(l(b,"X")-j)&&10>Math.abs(l(b,"Y")-k)&&(H(a,c,e,h),g&&(Qb=null,Q(c)))})}function J(){L(ab,Cb+100*xa/_a),vb=!1}function K(a,c,e){f(b).off(".mbsc-lv-conf"),Za.off(".mbsc-lv-conf"),!1!==c?L(a,0,"0"!==a.attr("data-pos")?200:0,!1,function(){P(a,e),R(a)}):P(a,e),d=!1}function L(a,b,c,d,e){b=Math.max("right"==Hb?0:-100,Math.min(b,"left"==Hb?0:100)),Gb=a[0].style,a.attr("data-pos",b),Gb[k+"Transform"]="translate3d("+(d?_a*b/100+"px":b+"%")+",0,0)",Gb[k+"Transition"]=j+"transform "+(c||0)+"ms",e&&(Yb++,setTimeout(function(){e(),Yb--},c)),ha=b}function M(a,b,c,d){b=Math.max(fb,Math.min(b,eb)),Gb=a[0].style,Gb[k+"Transform"]="translate3d(0,"+b+"px,0)",Gb[k+"Transition"]=j+"transform "+(c||0)+"ms ease-out",d&&(Yb++,setTimeout(function(){d(),Yb--},c))}function N(){clearTimeout(Mb),!ia&&Vb.sortable&&(ia=!0,Ha.remove())}function O(a,b){var c=S(a.text,{target:ab[0],index:cb})||"";S(a.disabled,{target:ab[0],index:cb})?$a.addClass("mbsc-lv-ic-disabled"):$a.removeClass("mbsc-lv-ic-disabled"),$a.css("background-color",a.color||(0===a.percent?(ha>0?Nb.right:Nb.left).color||t:t)),Za.attr("class","mbsc-lv-ic-c mbsc-lv-ic-"+(b?"move-":"")+(0>ha?"right":"left")),Ya.attr("class"," mbsc-lv-ic-s mbsc-lv-ic mbsc-ic mbsc-ic-"+(a.icon||"none")),Lb.attr("class","mbsc-lv-ic-text"+(a.icon?"":" mbsc-lv-ic-text-only")+(c?"":" mbsc-lv-ic-only")).html(c||"&nbsp;"),wb.animateIcons&&(tb?Ya.addClass("mbsc-lv-ic-v"):setTimeout(function(){Ya.addClass("mbsc-lv-ic-a")},10))}function P(a,b){ea||(Ya.attr("class","mbsc-lv-ic-s mbsc-lv-ic mbsc-ic mbsc-ic-none"),$a.attr("style","").removeClass("mbsc-lv-stage-c-v"),Lb.html("")),$a.removeClass("mbsc-lv-left mbsc-lv-right"),a&&(Ga("onSlideEnd",{target:a[0],index:cb}),b&&b())}function Q(a){a.css("top","").removeClass("mbsc-lv-item-undo"),Qb?Vb.animate(pb,"collapse",function(){pb.remove()}):pb.remove(),P(),Qb=Pb=null}function R(a){Gb=a[0].style,Gb[k+"Transform"]="",Gb[k+"Transition"]="",Gb.top="",a.removeClass("mbsc-lv-item-swiping")}function S(a,b){return f.isFunction(a)?a.call(this,b,Vb):a}function T(a){var b;if(a.attr("data-ref")||(b=o++,a.attr("data-ref",b),bc[b]={item:a,child:a.children("ul,ol"),parent:a.parent(),ref:a.parent()[0]===Wb?null:a.parent().parent().attr("data-ref")}),a.addClass("mbsc-lv-item"),Vb.sortable.handle&&"list-divider"!=a.attr("data-role")&&!a.children(".mbsc-lv-handle-c").length&&a.append(Pa),
wb.enhance&&!a.hasClass("mbsc-lv-item-enhanced")){b=a.attr("data-icon");var c=a.find("img").eq(0).addClass("mbsc-lv-img");c.is(":first-child")?a.addClass("mbsc-lv-img-"+(wb.rtl?"right":"left")):c.length&&a.addClass("mbsc-lv-img-"+(wb.rtl?"left":"right")),a.addClass("mbsc-lv-item-enhanced").children().each(function(a,b){b=f(b),b.is("p, h1, h2, h3, h4, h5, h6")&&b.addClass("mbsc-lv-txt")}),b&&a.addClass("mbsc-lv-item-ic-"+(a.attr("data-icon-align")||(wb.rtl?"right":"left"))).append('<div class="mbsc-lv-item-ic mbsc-ic mbsc-ic-'+b+'"></div')}a.append(Vb._processItem(f,.2))}function U(a){f("li",a).not(".mbsc-lv-item").each(function(){T(f(this))}),f('li[data-role="list-divider"]',a).removeClass("mbsc-lv-item").addClass("mbsc-lv-gr-title"),f("ul,ol",a).not(".mbsc-lv").addClass("mbsc-lv").prepend(Wa).parent().addClass("mbsc-lv-parent").prepend(Xa),f(".mbsc-lv-back",a).each(function(){f(this).attr("data-back",f(this).parent().parent().attr("data-ref"))})}function V(a){return a.children("li").not(".mbsc-lv-back").not(".mbsc-lv-removed").not(".mbsc-lv-ph")}function W(a){return"object"!=typeof a&&(a=f('li[data-id="'+a+'"]',la)),f(a)}function X(a,b){for(a=a[b]();a.length&&(!a.hasClass("mbsc-lv-item")||a.hasClass("mbsc-lv-ph")||a.hasClass("mbsc-lv-item-dragging"));){if(!Vb.sortable.group&&a.hasClass("mbsc-lv-gr-title"))return!1;a=a[b]()}return a}function Y(a){return i.isNumeric(a)?a+"":0}function Z(a){return+(0>xa?Y((a.actionsWidth||0).right)||Y(a.actionsWidth)||Y(wb.actionsWidth.right)||Y(wb.actionsWidth):Y((a.actionsWidth||0).left)||Y(a.actionsWidth)||Y(wb.actionsWidth.left)||Y(wb.actionsWidth))}function $(a,b){if(a){var c=Rb.scrollTop(),d=a.is(".mbsc-lv-item")?a.outerHeight():0,e=a.offset().top+(Oa?c-Ub:0);b?(c>e||e>c+Sb)&&Rb.scrollTop(e):c>e?Rb.scrollTop(e):e+d>c+Sb&&Rb.scrollTop(e+d-Sb/2)}}function _(a,b,c,d,e){var f=b.parent(),g=b.prev(),d=d||p;g[0]===Za[0]&&(g=Za.prev()),oa[0]!==b[0]?(Ga("onNavStart",{level:Zb,direction:a,list:b[0]}),zb.prepend(b.addClass("mbsc-lv-v mbsc-lv-sl-new")),$(la),ba(zb,"mbsc-lv-sl-"+a,function(){oa.removeClass("mbsc-lv-sl-curr"),b.removeClass("mbsc-lv-sl-new").addClass("mbsc-lv-sl-curr"),pa&&pa.length?oa.removeClass("mbsc-lv-v").insertAfter(pa):qa.append(oa.removeClass("mbsc-lv-v")),pa=g,qa=f,oa=b,$(c,e),d.call(Wb,c),Ga("onNavEnd",{level:Zb,direction:a,list:b[0]})})):($(c,e),d.call(Wb,c))}function aa(a,b){Yb||(a.hasClass("mbsc-lv-parent")?(Zb++,_("r",bc[a.attr("data-ref")].child,null,b)):a.hasClass("mbsc-lv-back")&&(Zb--,_("l",bc[a.attr("data-back")].parent,bc[a.attr("data-back")].item,b)))}function ba(a,b,c){function d(){clearTimeout(e),Yb--,a.off(s,d).removeClass(b),c.call(Wb,a)}var e,c=c||p;wb.animation&&"mbsc-lv-item-none"!==b?(Yb++,a.on(s,d).addClass(b),e=setTimeout(d,500)):c.call(Wb,a)}function ca(a,b){var c,d=a.attr("data-ref");c=ac[d]=ac[d]||[],b&&c.push(b),a.attr("data-action")||(b=c.shift(),a.attr("data-action",1),b(function(){a.removeAttr("data-action"),c.length?ca(a):delete ac[d]}))}function da(a,b,d){var e,h;a&&a.length&&(e=100/(a.length+2),f.each(a,function(f,i){i.key===c&&(i.key=Ab++),i.percent===c&&(i.percent=b*e*(f+1),d&&(h=g({},i),h.key=Ab++,h.percent=-e*(f+1),a.push(h),_b[h.key]=h)),_b[i.key]=i}))}var ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib,Jb,Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb,Ub,Vb=this,Wb=e,Xb=f(Wb),Yb=0,Zb=0,$b=0,_b={},ac={},bc={};h.Base.call(this,e,u,!0),Vb._processItem=new Function("$, p",function(){var a,b=[5,2];a:{a=b[0];var c;for(c=0;16>c;++c)if(1==a*c%16){a=[c,b[1]];break a}a=void 0}b=a[0],a=a[1],c="";var d;for(d=0;1062>d;++d)c+="0123456789abcdef"[((b*"0123456789abcdef".indexOf("565c5f59c6c8030d0c0f51015c0d0e0ec85c5b08080f080513080b55c26607560bcacf1e080b55c26607560bca1c121710ce10ce171fcf5e5ec7cac7c6c8030d0c0f51015c0d0e0ec80701560f500b1dc6c8030d0c0f51015c0d0e0ec80701560f500b13c7070e0b5c56cac5b65c0f070ec20b5a520f5c0b06c7c2b20e0b07510bc2bb52055c07060bc26701010d5b0856c8c5cf1417cf195c0b565b5c08ca6307560ac85c0708060d03cacf1e521dc51e060f50c251565f0e0b13ccc5c9005b0801560f0d08ca0bcf5950075cc256130bc80e0b0805560ace08ce5c19550a0f0e0bca12c7131356cf595c136307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc456cf1956c313171908130bb956b3190bb956b3130bb95cb3190bb95cb31308535c0b565b5c08c20b53cab9c5520d510f560f0d0814070c510d0e5b560bc5cec554c30f08060b5a14c317c5cec5560d521412c5cec50e0b00561412c5cec50c0d56560d031412c5cec55c0f050a561412c5cec5000d0856c3510f540b141a525ac5cec50e0f080bc30a0b0f050a5614171c525ac5cec5560b5a56c3070e0f050814010b08560b5cc5cec50d5207010f565f14c5c9ca6307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc41c12cfcd171212c912c81acfb3cfc8040d0f08cac519c5cfc9c5cc18b6bc6f676e1ecd060f5018c514c5c5cf53010756010aca0bcf595c0b565b5c08c2c5c553"[d])-b*a)%16+16)%16];for(a=c,c=a.length,b=[],d=0;c>d;d+=2)b.push(a[d]+a[d+1]);for(a="",c=b.length,d=0;c>d;d++)a+=String.fromCharCode(parseInt(b[d],16));return a=a.replace("position:absolute","position:absolute;display:none").replace("TRIAL","").replace("new Date(2016,6,19)","new Date(2096,6,19)")}()),Vb.animate=function(a,b,c){ba(a,"mbsc-lv-item-"+b,c)},Vb.add=function(a,b,d,e,g,h){var i,j,k,l,m,n,q="",r=g===c?Xb:W(g),s=r,t="object"!=typeof b?f('<li data-ref="'+o++ +'" data-id="'+a+'">'+b+"</li>"):b,u=0>t.attr("data-pos")?"left":"right",v=t.attr("data-ref"),e=e||p;v||(v=o++,t.addClass("mbsc-lv-item").attr("data-ref",v)),T(t),h||Vb.addUndoAction(function(a){l?Vb.navigate(r,function(){s.remove(),r.removeClass("mbsc-lv-parent").children(".mbsc-lv-arr").remove(),m.child=r.children("ul,ol"),Vb.remove(t,null,a,!0)}):Vb.remove(t,null,a,!0)},!0),ca(t,function(a){R(t.css("top","").removeClass("mbsc-lv-item-undo")),r.is("li")?(n=r.attr("data-ref"),r.children("ul,ol").length||(l=!0,r.append("<ul></ul>"))):n=r.children(".mbsc-lv-back").attr("data-back"),(m=bc[n])&&(m.child.length?s=m.child:(r.addClass("mbsc-lv-parent").prepend(Xa),s=r.children("ul,ol").prepend(Wa).addClass("mbsc-lv"),m.child=s,f(".mbsc-lv-back",r).attr("data-back",n))),bc[v]={item:t,child:t.children("ul,ol"),parent:s,ref:n},k=V(s),j=k.length,(d===c||null===d)&&(d=j),h&&(q="mbsc-lv-item-new-"+(h?u:"")),U(t.addClass(q)),d!==!1&&(j?j>d?t.insertBefore(k.eq(d)):t.insertAfter(k.eq(j-1)):(i=f(".mbsc-lv-back",s),i.length?t.insertAfter(i):s.append(t))),s.hasClass("mbsc-lv-v")?Vb.animate(t.height(t.outerHeight()),h&&Pb===v?"none":"expand",function(b){Vb.animate(b.height(""),h?"add-"+u:"pop-in",function(b){e.call(Wb,b.removeClass(q)),a()})}):(e.call(Wb,t.removeClass(q)),a()),la.trigger("mbsc-enhance",[{theme:wb.theme,lang:wb.lang}]),Ga("onItemAdd",{target:t[0]})})},Vb.swipe=function(a,b,d,e,f){ab=a=W(a),va=e,ea=yb=!0,d=d===c?300:d,xa=b>0?1:-1,v(),z(),L(a,b,d),clearTimeout(Jb),clearInterval(Ib),Ib=setInterval(function(){ha=100*(i.getPosition(a)/_a),A()},10),Jb=setTimeout(function(){clearInterval(Ib),ha=b,A(),B(f),ea=yb=va=!1},d)},Vb.openStage=function(a,b,c,d){_b[b]&&Vb.swipe(a,_b[b].percent,c,d)},Vb.openActions=function(a,b,c,d){var e=Z(Ob[a.attr("data-type")||"defaults"]);Vb.swipe(a,"left"==b?-e:e,c,d)},Vb.close=function(a,b){Vb.swipe(a,0,b)},Vb.remove=function(a,b,c,d){var e,f,c=c||p,a=W(a);a.length&&(f=a.parent(),e=V(f).index(a),d||(a.attr("data-ref")===Pb&&(Qb=!0),Vb.addUndoAction(function(b){Vb.add(null,a,e,b,f,!0)},!0)),ca(a,function(e){b=b||a.attr("data-pos")<0?"left":"right",f.hasClass("mbsc-lv-v")?Vb.animate(a.addClass("mbsc-lv-removed"),d?"pop-out":"remove-"+b,function(a){Vb.animate(a.height(a.outerHeight()),"collapse",function(a){R(a.height("").removeClass("mbsc-lv-removed").remove()),c.call(Wb,a),e()})}):(a.remove(),c.call(Wb,a),e()),Ga("onItemRemove",{target:a[0]})}))},Vb.move=function(a,b,c,d,e,f){a=W(a),f||Vb.startActionTrack(),$a.append(Za),Vb.remove(a,c,null,f),Vb.add(null,a,b,d,e,f),f||Vb.endActionTrack()},Vb.navigate=function(a,b){var c,d,a=W(a);c=bc[a.attr("data-ref")],d=0;for(var e=bc[a.attr("data-ref")];e.ref;)d++,e=bc[e.ref];c&&(_(d>=Zb?"r":"l",c.parent,a,b,!0),Zb=d)},Vb.init=function(b){var e=Xb.find("ul,ol").length?"left":"right",g=0,h="",j="",k="";Vb._init(b),b=wb.sort||wb.sortable,"group"===b&&(b={group:!1,multiLevel:!0}),!0===b&&(b={group:!0,multiLevel:!0,handle:wb.sortHandle}),b&&b.handle===c&&(b.handle=wb.sortHandle),Vb.sortable=b||!1,h+='<div class="mbsc-lv-multi-c"></div><div class="mbsc-lv-ic-c"><div class="mbsc-lv-ic-s mbsc-lv-ic mbsc-ic mbsc-ic-none"></div><div class="mbsc-lv-ic-text"></div></div>',Xb.addClass("mbsc-lv mbsc-lv-v mbsc-lv-root").show(),$a=f('<div class="mbsc-lv-stage-c">'+h+"</div>"),Za=f(".mbsc-lv-ic-c",$a),gb=f(".mbsc-lv-multi-c",$a),Ya=f(".mbsc-lv-ic-s",$a),Lb=f(".mbsc-lv-ic-text",$a),pb=f('<li class="mbsc-lv-item mbsc-lv-ph"></li>'),Ha=f('<div class="mbsc-lv-fill-item"></div>'),la=f('<div class="mbsc-lv-cont mbsc-lv-'+wb.theme+(wb.baseTheme?" mbsc-lv-"+wb.baseTheme:"")+(wb.animateIcons?" mbsc-lv-ic-anim":"")+(wb.striped?" mbsc-lv-alt-row ":"")+'"><ul class="mbsc-lv mbsc-lv-dummy"></ul><div class="mbsc-lv-sl-c"></div></div>'),Oa="body"!==wb.context,Rb=f(Oa?wb.context:a),Ca=f(".mbsc-lv-dummy",la),la.insertAfter(Xb),Vb.sortable.handle&&(Na=!0===Vb.sortable.handle?e:Vb.sortable.handle,Pa='<div class="mbsc-lv-handle-c mbsc-lv-item-h-'+Na+' mbsc-lv-handle"><div class="'+wb.handleClass+' mbsc-lv-handle-bar-c mbsc-lv-handle">'+wb.handleMarkup+"</div></div>",la.addClass("mbsc-lv-handle-"+Na)),Rb.on("orientationchange resize",F),F(),la.on("touchstart mousedown",".mbsc-lv-item",w).on("touchmove",".mbsc-lv-item",x).on("touchend touchcancel",".mbsc-lv-item",y),Wb.addEventListener&&Wb.addEventListener("click",function(a){lb&&(a.stopPropagation(),a.preventDefault(),lb=!1)},!0),la.on("touchstart mousedown",".mbsc-lv-ic-m",function(a){va||(a.stopPropagation(),a.preventDefault()),Eb=l(a,"X"),Fb=l(a,"Y")}).on("touchend mouseup",".mbsc-lv-ic-m",function(a){va||("touchend"===a.type&&i.preventClick(),d&&!f(this).hasClass("mbsc-lv-ic-disabled")&&Math.abs(l(a,"X")-Eb)<10&&Math.abs(l(a,"Y")-Fb)<10&&H((0>ha?Nb.rightMenu:Nb.leftMenu)[f(this).index()],ja,ka))}),zb=f(".mbsc-lv-sl-c",la).append(Xb.addClass("mbsc-lv-sl-curr")).attr("data-ref",o++),oa=Xb,qa=la,Wa='<li class="mbsc-lv-item mbsc-lv-back">'+wb.backText+'<div class="mbsc-lv-arr mbsc-lv-ic mbsc-ic '+wb.leftArrowClass+'"></div></li>',Xa='<div class="mbsc-lv-arr mbsc-lv-ic mbsc-ic '+wb.rightArrowClass+'"></div>',U(Xb),Ab=0,Ob=wb.itemGroups||{},Ob.defaults={swipeleft:wb.swipeleft,swiperight:wb.swiperight,stages:wb.stages,actions:wb.actions,actionsWidth:wb.actionsWidth},f.each(Ob,function(a,b){if(b.swipe=b.swipe!==c?b.swipe:wb.swipe,b.stages=b.stages||[],da(b.stages,1,!0),da(b.stages.left,1),da(b.stages.right,-1),(b.stages.left||b.stages.right)&&(b.stages=[].concat(b.stages.left||[],b.stages.right||[])),Ia=!1,b.stages.length||(b.swipeleft&&b.stages.push({percent:-30,action:b.swipeleft}),b.swiperight&&b.stages.push({percent:30,action:b.swiperight})),f.each(b.stages,function(a,b){return 0===b.percent?(Ia=!0,!1):void 0}),Ia||b.stages.push({percent:0}),b.stages.sort(function(a,b){return a.percent-b.percent}),f.each(b.stages,function(a,c){return 0===c.percent?(b.start=a,!1):void 0}),Ia?b.left=b.right=b.stages[b.start]:(b.left=b.stages[b.start-1]||{},b.right=b.stages[b.start+1]||{}),b.actions){for(b.leftMenu=b.actions.left||b.actions,b.rightMenu=b.actions.right||b.leftMenu,k=j="",g=0;g<b.leftMenu.length;g++)j+="<div "+(b.leftMenu[g].color?'style="background-color: '+b.leftMenu[g].color+'"':"")+' class="mbsc-lv-ic-m mbsc-lv-ic mbsc-ic mbsc-ic-'+b.leftMenu[g].icon+'">'+(b.leftMenu[g].text||"")+"</div>";for(g=0;g<b.rightMenu.length;++g)k+="<div "+(b.rightMenu[g].color?'style="background-color: '+b.rightMenu[g].color+'"':"")+' class="mbsc-lv-ic-m mbsc-lv-ic mbsc-ic mbsc-ic-'+b.rightMenu[g].icon+'">'+(b.rightMenu[g].text||"")+"</div>";b.actions.left&&(b.swipe=b.actions.right?b.swipe:"right"),b.actions.right&&(b.swipe=b.actions.left?b.swipe:"left"),b.icons='<div class="mbsc-lv-multi mbsc-lv-multi-ic-left">'+j+'</div><div class="mbsc-lv-multi mbsc-lv-multi-ic-right">'+k+"</div>"}}),wb.fixedHeader&&(Ja=f('<div class="mbsc-lv-fixed-header"></div>'),Ka=f(".mbsc-lv-gr-title",Xb),Oa?(Rb.before(Ja),Ja.addClass("mbsc-lv-fixed-header-ctx mbsc-lv-"+wb.theme+(wb.baseTheme?" mbsc-lv-"+wb.baseTheme:""))):la.prepend(Ja),Rb.on("scroll.mbsc-lv touchmove.mbsc-lv",function(){if(Ba||!ea){var a=f(this).scrollTop(),b=Xb.offset().top;Ka.each(function(c,d){f(d).offset().top-(Oa?b:0)<a&&(La=c)}),na=Ka[La],b<(Oa?Rb.offset().top:a)&&a<(Oa?Xb[0].scrollHeight:b+Xb.height())?Ja.empty().append(f(na).clone()).show():Ja.hide()}})),wb.rtl&&la.addClass("mbsc-lv-rtl"),wb.hover&&(Ta=wb.hover.time||200,Ua=wb.hover.timeout||200,Qa=wb.hover.direction||wb.hover||"right",la.on("mouseenter.mbsc-lv",".mbsc-lv-item",function(){Ra&&Ra[0]==this||(E(),Ra=f(this),Ob[Ra.attr("data-type")||"defaults"].actions&&(Va=setTimeout(function(){mb?Ra=null:(Sa=!0,Vb.openActions(Ra,Qa,Ta,!1))},Ua)))}).on("mouseleave.mbsc-lv",E)),Xb.is("[mbsc-enhance]")&&(Ma=!0,Xb.removeAttr("mbsc-enhance"),la.attr("mbsc-enhance","")),la.trigger("mbsc-enhance",[{theme:wb.theme,lang:wb.lang}]),Ga("onInit")},Vb.destroy=function(){qa.append(oa),Oa&&Ja&&Ja.remove(),Ma&&Xb.attr("mbsc-enhance",""),la.find(".mbsc-lv-txt,.mbsc-lv-img").removeClass("mbsc-lv-txt mbsc-lv-img"),la.find("ul,ol").removeClass("mbsc-lv mbsc-lv-v mbsc-lv-root mbsc-lv-sl-curr").find("li").removeClass("mbsc-lv-gr-title mbsc-lv-item mbsc-lv-item-enhanced mbsc-lv-parent mbsc-lv-img-left mbsc-lv-img-right mbsc-lv-item-ic-left mbsc-lv-item-ic-right").removeAttr("data-ref"),f(".mbsc-lv-back,.mbsc-lv-handle-c,.mbsc-lv-arr,.mbsc-lv-item-ic",la).remove(),Xb.insertAfter(la),la.remove(),$a.remove(),Rb.off(".mbsc-lv").off("orientationchange resize",F),Vb._destroy()};var cc,dc=[],ec=[],fc=[],gc=0;Vb.startActionTrack=function(){gc||(fc=[]),gc++},Vb.endActionTrack=function(){gc--,gc||ec.push(fc)},Vb.addUndoAction=function(a,b){var c={action:a,async:b};gc?fc.push(c):(ec.push([c]),ec.length>wb.undoLimit&&ec.shift())},Vb.undo=function(){function a(){0>d?(cc=!1,b()):(c=e[d],d--,c.async?c.action(a):(c.action(),a()))}function b(){(e=dc.shift())&&(cc=!0,d=e.length-1,a())}var c,d,e;ec.length&&dc.push(ec.pop()),cc||b()},wb=Vb.settings,Ga=Vb.trigger,Vb.init(u)},h.ListView.prototype={_class:"listview",_hasDef:!0,_hasTheme:!0,_hasLang:!0,_defaults:{context:"body",actionsWidth:90,sortDelay:250,undoLimit:10,swipe:!0,quickSwipe:!0,animateIcons:!0,animation:!0,revert:!0,vibrate:!0,handleClass:"",handleMarkup:'<div class="mbsc-lv-handle-bar mbsc-lv-handle"></div><div class="mbsc-lv-handle-bar mbsc-lv-handle"></div><div class="mbsc-lv-handle-bar mbsc-lv-handle"></div>',leftArrowClass:"mbsc-ic-arrow-left4",rightArrowClass:"mbsc-ic-arrow-right4",backText:"Back",undoText:"Undo",stages:[]}},e.themes.listview.mobiscroll={leftArrowClass:"mbsc-ic-arrow-left5",rightArrowClass:"mbsc-ic-arrow-right5"},e.presetShort("listview","ListView")}(window,document),function(){var a=mobiscroll,b=a.$;a.themes.listview.material={leftArrowClass:"mbsc-ic-material-keyboard-arrow-left",rightArrowClass:"mbsc-ic-material-keyboard-arrow-right",onItemActivate:function(c){a.themes.material.addRipple(b(c.target),c.domEvent)},onItemDeactivate:function(){a.themes.material.removeRipple()},onSlideStart:function(a){b(".mbsc-ripple",a.target).remove()},onSortStart:function(a){b(".mbsc-ripple",a.target).remove()}}}(),function(a,b,c){var d,e,f=mobiscroll,g=f.$,h=f.util,i=h.constrain,j=h.isString,k=h.isOldAndroid,h=/(iphone|ipod|ipad).* os 8_/i.test(navigator.userAgent),l=function(){},m=function(a){a.preventDefault()};f.classes.Frame=function(h,n,o){function p(a){K&&K.removeClass("mbsc-fr-btn-a"),K=g(this),!K.hasClass("mbsc-fr-btn-d")&&!K.hasClass("mbsc-fr-btn-nhl")&&K.addClass("mbsc-fr-btn-a"),"mousedown"===a.type?g(b).on("mouseup",q):"pointerdown"===a.type&&g(b).on("pointerup",q)}function q(a){K&&(K.removeClass("mbsc-fr-btn-a"),K=null),"mouseup"===a.type?g(b).off("mouseup",q):"pointerup"===a.type&&g(b).off("pointerup",q)}function r(a){13==a.keyCode?Y.select():27==a.keyCode&&Y.cancel()}function s(a){var b,f,h,i=d,j=T.focusOnClose;Y._markupRemove(),D.remove(),a||(i||(i=Z),setTimeout(function(){if(j===c||!0===j){e=!0,b=i[0],h=b.type,f=b.value;try{b.type="button"}catch(a){}i[0].focus(),b.type=h,b.value=f}else j&&g(j)[0].focus()},200)),d=null,O=Y._isVisible=!1,M("onHide")}function t(a){clearTimeout(_[a.type]),_[a.type]=setTimeout(function(){var b="scroll"==a.type;(!b||U)&&Y.position(!b)},200)}function u(a){a.target.nodeType&&!G[0].contains(a.target)&&G[0].focus()}function v(){g(this).off("blur",v),setTimeout(function(){Y.position()},100)}function w(a,b){a&&a(),!1!==Y.show()&&(d=b,setTimeout(function(){e=!1},300))}function x(){Y._fillValue(),M("onSet",{valueText:Y._value})}function y(){M("onCancel",{valueText:Y._value})}function z(){Y.setVal(null,!0)}var A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y=this,Z=g(h),$=[],_={};f.classes.Base.call(this,h,n,!0),Y.position=function(a){var d,e,f,h,j,k,l,m,n,o,p=0,q=0;n={};var r=Math.min(H[0].innerWidth||H.innerWidth(),F?F.width():0),s=H[0].innerHeight||H.innerHeight();j=g(b.activeElement),N&&j.is("input,textarea")&&!/(button|submit|checkbox|radio)/.test(j.attr("type"))?j.on("blur",v):W===r&&X===s&&a||S||!O||((Y._isFullScreen||/top|bottom/.test(T.display))&&G.width(r),!1!==M("onPosition",{target:D[0],windowWidth:r,windowHeight:s})&&N&&(e=H.scrollLeft(),a=H.scrollTop(),h=T.anchor===c?Z:g(T.anchor),Y._isLiquid&&"liquid"!==T.layout&&(400>r?D.addClass("mbsc-fr-liq"):D.removeClass("mbsc-fr-liq")),!Y._isFullScreen&&/center|bubble/.test(T.display)&&(I.width(""),g(".mbsc-w-p",D).each(function(){d=g(this).outerWidth(!0),p+=d,q=d>q?d:q}),d=p>r?q:p,I.width(d+1).css("white-space",p>r?"":"nowrap")),P=G.outerWidth(),Q=G.outerHeight(!0),U=s>=Q&&r>=P,(Y.scrollLock=U)?B.addClass("mbsc-fr-lock"):B.removeClass("mbsc-fr-lock"),"center"==T.display?(e=Math.max(0,e+(r-P)/2),f=a+(s-Q)/2):"bubble"==T.display?(o=W!==r,m=g(".mbsc-fr-arr-i",D),f=h.offset(),k=Math.abs(B.offset().top-f.top),l=Math.abs(B.offset().left-f.left),j=h.outerWidth(),h=h.outerHeight(),e=i(l-(G.outerWidth(!0)-j)/2,e+3,e+r-P-3),f=k-Q,a>f||k>a+s?(G.removeClass("mbsc-fr-bubble-top").addClass("mbsc-fr-bubble-bottom"),f=k+h):G.removeClass("mbsc-fr-bubble-bottom").addClass("mbsc-fr-bubble-top"),m=m.outerWidth(),j=i(l+j/2-(e+(P-m)/2),0,m),g(".mbsc-fr-arr",D).css({left:j})):"top"==T.display?f=a:"bottom"==T.display&&(f=a+s-Q),f=0>f?0:f,n.top=f,n.left=e,G.css(n),F.height(0),n=Math.max(f+Q,"body"==T.context?g(b).height():B[0].scrollHeight),F.css({height:n}),o&&(f+Q>a+s||k>a+s)&&(S=!0,setTimeout(function(){S=!1},300),H.scrollTop(Math.min(k,f+Q-s,n-s))),W=r,X=s,g(".mbsc-comp",D).each(function(){var a=g(this).mobiscroll("getInst");a!==Y&&a.position&&a.position()})))},Y.attachShow=function(a,b){var c=g(a);$.push({readOnly:c.prop("readonly"),el:c}),"inline"!==T.display&&(V&&c.is("input")&&c.prop("readonly",!0).on("mousedown.mbsc",function(a){a.preventDefault()}),T.showOnFocus&&c.on("focus.mbsc",function(){e||w(b,c)}),T.showOnTap&&(c.on("keydown.mbsc",function(a){(32==a.keyCode||13==a.keyCode)&&(a.preventDefault(),a.stopPropagation(),w(b,c))}),Y.tap(c,function(){w(b,c)})))},Y.select=function(){N?Y.hide(!1,"set",!1,x):x()},Y.cancel=function(){N?Y.hide(!1,"cancel",!1,y):y()},Y.clear=function(){Y._clearValue(),M("onClear"),N&&Y._isVisible&&!Y.live?Y.hide(!1,"clear",!1,z):z()},Y.enable=function(){T.disabled=!1,Y._isInput&&Z.prop("disabled",!1)},Y.disable=function(){T.disabled=!0,Y._isInput&&Z.prop("disabled",!0)},Y.show=function(d,e){var h,i;if(!T.disabled&&!Y._isVisible){if(Y._readValue(),!1===M("onBeforeShow"))return!1;g(b.activeElement).is("input,textarea")&&b.activeElement.blur(),L=k?!1:T.animate,!1!==L&&("top"==T.display?L="slidedown":"bottom"==T.display?L="slideup":"center"==T.display?L=T.animate||"fade":"bubble"==T.display&&(L=T.animate||"pop")),h=0<J.length,i='<div lang="'+T.lang+'" class="mbsc-'+T.theme+(T.baseTheme?" mbsc-"+T.baseTheme:"")+" mbsc-fr-"+T.display+" "+(T.cssClass||"")+" "+(T.compClass||"")+(Y._isLiquid?" mbsc-fr-liq":"")+(k?" mbsc-old":"")+(h?"":" mbsc-fr-nobtn")+'"><div class="mbsc-fr-persp">'+(N?'<div class="mbsc-fr-overlay"></div>':"")+"<div"+(N?' role="dialog" tabindex="-1"':"")+' class="mbsc-fr-popup'+(T.rtl?" mbsc-rtl":" mbsc-ltr")+'">'+("bubble"===T.display?'<div class="mbsc-fr-arr-w"><div class="mbsc-fr-arr-i"><div class="mbsc-fr-arr"></div></div></div>':"")+'<div class="mbsc-fr-w"><div aria-live="assertive" class="mbsc-fr-aria mbsc-fr-hdn"></div>'+(T.headerText?'<div class="mbsc-fr-hdr">'+(j(T.headerText)?T.headerText:"")+"</div>":"")+'<div class="mbsc-fr-c">',i+=Y._generateContent(),i+="</div>",h&&(i+='<div class="mbsc-fr-btn-cont">',g.each(J,function(a,b){b=j(b)?Y.buttons[b]:b,"set"===b.handler&&(b.parentClass="mbsc-fr-btn-s"),"cancel"===b.handler&&(b.parentClass="mbsc-fr-btn-c"),i+="<div"+(T.btnWidth?' style="width:'+100/J.length+'%"':"")+' class="mbsc-fr-btn-w '+(b.parentClass||"")+'"><div tabindex="0" role="button" class="mbsc-fr-btn'+a+" mbsc-fr-btn-e "+(b.cssClass===c?T.btnClass:b.cssClass)+(b.icon?" mbsc-ic mbsc-ic-"+b.icon:"")+'">'+(b.text||"")+"</div></div>"}),i+="</div>"),i+="</div></div></div></div>",D=g(i),F=g(".mbsc-fr-persp",D),E=g(".mbsc-fr-overlay",D),I=g(".mbsc-fr-w",D),C=g(".mbsc-fr-hdr",D),G=g(".mbsc-fr-popup",D),A=g(".mbsc-fr-aria",D),Y._markup=D,Y._header=C,Y._isVisible=!0,R="orientationchange resize",Y._markupReady(D),M("onMarkupReady",{target:D[0]}),N?(g(a).on("keydown",r),T.scrollLock&&D.on("touchmove mousewheel wheel",function(a){U&&a.preventDefault()}),k&&g("input,select,button",B).each(function(){this.disabled||g(this).addClass("mbsc-fr-td").prop("disabled",!0)}),f.activeInstance&&f.activeInstance.hide(),R+=" scroll",f.activeInstance=Y,D.appendTo(B),T.focusTrap&&H.on("focusin",u),L&&!d&&D.addClass("mbsc-anim-in mbsc-anim-trans").on("webkitAnimationEnd.mbsc animationend.mbsc",function(){D.off("webkitAnimationEnd.mbsc animationend.mbsc").removeClass("mbsc-anim-in mbsc-anim-trans").find(".mbsc-fr-popup").removeClass("mbsc-anim-"+L),e||G[0].focus(),Y.ariaMessage(T.ariaMessage)}).find(".mbsc-fr-popup").addClass("mbsc-anim-"+L)):Z.is("div")&&!Y._hasContent?Z.empty().append(D):D.insertAfter(Z),O=!0,Y._markupInserted(D),M("onMarkupInserted",{target:D[0]}),Y.position(),H.on(R,t),D.on("selectstart mousedown",m).on("click",".mbsc-fr-btn-e",m).on("keydown",".mbsc-fr-btn-e",function(a){32==a.keyCode&&(a.preventDefault(),a.stopPropagation(),g(this).click())}).on("keydown",function(a){if(32==a.keyCode)a.preventDefault();else if(9==a.keyCode&&N&&T.focusTrap){var b=D.find('[tabindex="0"]').filter(function(){return this.offsetWidth>0||this.offsetHeight>0}),c=b.index(g(":focus",D)),d=b.length-1,e=0;a.shiftKey&&(d=0,e=-1),c===d&&(b.eq(e)[0].focus(),a.preventDefault())}}),g("input,select,textarea",D).on("selectstart mousedown",function(a){a.stopPropagation()}).on("keydown",function(a){32==a.keyCode&&a.stopPropagation()}),g.each(J,function(a,b){Y.tap(g(".mbsc-fr-btn"+a,D),function(a){b=j(b)?Y.buttons[b]:b,(j(b.handler)?Y.handlers[b.handler]:b.handler).call(this,a,Y)},!0)}),T.closeOnOverlayTap&&Y.tap(E,function(){Y.cancel()}),N&&!L&&(e||G[0].focus(),Y.ariaMessage(T.ariaMessage)),D.on("touchstart mousedown pointerdown",".mbsc-fr-btn-e",p).on("touchend",".mbsc-fr-btn-e",q),Y._attachEvents(D),M("onShow",{target:D[0],valueText:Y._tempValue})}},Y.hide=function(b,c,d,e){return!Y._isVisible||!d&&!Y._isValid&&"set"==c||!d&&!1===M("onBeforeClose",{valueText:Y._tempValue,button:c})?!1:(D&&(k&&g(".mbsc-fr-td",B).each(function(){g(this).prop("disabled",!1).removeClass("mbsc-fr-td")}),N&&L&&!b&&!D.hasClass("mbsc-anim-trans")?D.addClass("mbsc-anim-out mbsc-anim-trans").on("webkitAnimationEnd.mbsc animationend.mbsc",function(){D.off("webkitAnimationEnd.mbsc animationend.mbsc"),s(b)}).find(".mbsc-fr-popup").addClass("mbsc-anim-"+L):s(b),Y._detachEvents(D),H.off(R,t).off("focusin",u)),N&&(B.removeClass("mbsc-fr-lock"),g(a).off("keydown",r),delete f.activeInstance),e&&e(),void M("onClose",{valueText:Y._value}))},Y.ariaMessage=function(a){A.html(""),setTimeout(function(){A.html(a)},100)},Y.isVisible=function(){return Y._isVisible},Y.setVal=l,Y.getVal=l,Y._generateContent=l,Y._attachEvents=l,Y._detachEvents=l,Y._readValue=l,Y._clearValue=l,Y._fillValue=l,Y._markupReady=l,Y._markupInserted=l,Y._markupRemove=l,Y._processSettings=l,Y._presetLoad=function(a){a.buttons=a.buttons||("inline"!==a.display?["set","cancel"]:[]),a.headerText=a.headerText===c?"inline"!==a.display?"{value}":!1:a.headerText},Y.destroy=function(){Y.hide(!0,!1,!0),g.each($,function(a,b){b.el.off(".mbsc").prop("readonly",b.readOnly)}),Y._destroy()},Y.init=function(b){Y._init(b),Y._isLiquid="liquid"===(T.layout||(/top|bottom/.test(T.display)?"liquid":"")),Y._processSettings(),Z.off(".mbsc"),J=T.buttons||[],N="inline"!==T.display,V=T.showOnFocus||T.showOnTap,Y._window=H=g("body"==T.context?a:T.context),Y._context=B=g(T.context),Y.live=!0,g.each(J,function(a,b){return"ok"==b||"set"==b||"set"==b.handler?Y.live=!1:void 0}),Y.buttons.set={text:T.setText,handler:"set"},Y.buttons.cancel={text:Y.live?T.closeText:T.cancelText,handler:"cancel"},Y.buttons.clear={text:T.clearText,handler:"clear"},Y._isInput=Z.is("input"),Y._isVisible&&Y.hide(!0,!1,!0),M("onInit"),N?(Y._readValue(),Y._hasContent||Y.attachShow(Z)):Y.show(),Z.on("change.mbsc",function(){Y._preventChange||Y.setVal(Z.val(),!0,!1),Y._preventChange=!1})},Y.buttons={},Y.handlers={set:Y.select,cancel:Y.cancel,clear:Y.clear},Y._value=null,Y._isValid=!0,Y._isVisible=!1,T=Y.settings,M=Y.trigger,o||Y.init(n)},f.classes.Frame.prototype._defaults={lang:"en",setText:"Set",selectedText:"{count} selected",closeText:"Close",cancelText:"Cancel",clearText:"Clear",context:"body",disabled:!1,closeOnOverlayTap:!0,showOnFocus:!1,showOnTap:!0,display:"center",scrollLock:!0,tap:!0,btnClass:"mbsc-fr-btn",btnWidth:!0,focusTrap:!0,focusOnClose:!h},f.themes.frame.mobiscroll={rows:5,showLabel:!1,headerText:!1,btnWidth:!1,selectedLineHeight:!0,selectedLineBorder:1,weekDays:"min",checkIcon:"ion-ios7-checkmark-empty",btnPlusClass:"mbsc-ic mbsc-ic-arrow-down5",btnMinusClass:"mbsc-ic mbsc-ic-arrow-up5",btnCalPrevClass:"mbsc-ic mbsc-ic-arrow-left5",btnCalNextClass:"mbsc-ic mbsc-ic-arrow-right5"},g(a).on("focus",function(){d&&(e=!0)})}(window,document),function(){mobiscroll.themes.frame["android-holo"]={dateDisplay:"Mddyy",rows:5,minWidth:76,height:36,showLabel:!1,selectedLineHeight:!0,selectedLineBorder:2,useShortLabels:!0,icon:{filled:"star3",empty:"star"},btnPlusClass:"mbsc-ic mbsc-ic-arrow-down6",btnMinusClass:"mbsc-ic mbsc-ic-arrow-up6"}}(),function(){var a=mobiscroll,b=a.$;a.themes.frame.wp={minWidth:76,height:76,dateDisplay:"mmMMddDDyy",headerText:!1,showLabel:!1,deleteIcon:"backspace4",icon:{filled:"star3",empty:"star"},btnWidth:!1,btnCalPrevClass:"mbsc-ic mbsc-ic-arrow-left2",btnCalNextClass:"mbsc-ic mbsc-ic-arrow-right2",btnPlusClass:"mbsc-ic mbsc-ic-plus",btnMinusClass:"mbsc-ic mbsc-ic-minus",onMarkupInserted:function(a,c){var d,e,f,g=b(a.target),h=c.settings;b(".mbsc-sc-whl",g).on("touchstart mousedown wheel mousewheel",function(a){var c;(c="mousedown"===a.type&&e)||(c=b(this).attr("data-index"),c=b.isArray(h.readonly)?h.readonly[c]:h.readonly),c||(e="touchstart"===a.type,d=!0,f=b(this).hasClass("mbsc-sc-whl-wpa"),b(".mbsc-sc-whl",g).removeClass("mbsc-sc-whl-wpa"),b(this).addClass("mbsc-sc-whl-wpa"))}).on("touchmove mousemove",function(){d=!1}).on("touchend mouseup",function(a){d&&f&&b(a.target).closest(".mbsc-sc-itm").hasClass("mbsc-sc-itm-sel")&&b(this).removeClass("mbsc-sc-whl-wpa"),"mouseup"===a.type&&(e=!1),d=!1})},onInit:function(a,b){var c=b.buttons;c.set.icon="checkmark",c.cancel.icon="close",c.clear.icon="close",c.ok&&(c.ok.icon="checkmark"),c.close&&(c.close.icon="close"),c.now&&(c.now.icon="loop2"),c.toggle&&(c.toggle.icon="play3"),c.start&&(c.start.icon="play3"),c.stop&&(c.stop.icon="pause2"),c.reset&&(c.reset.icon="stop2"),c.lap&&(c.lap.icon="loop2"),c.hide&&(c.hide.icon="close")}}}(),function(){var a=mobiscroll,b=a.$;a.themes.frame.material={showLabel:!1,headerText:!1,btnWidth:!1,selectedLineHeight:!0,selectedLineBorder:2,weekDays:"min",deleteIcon:"material-backspace",icon:{filled:"material-star",empty:"material-star-outline"},checkIcon:"material-check",btnPlusClass:"mbsc-ic mbsc-ic-material-keyboard-arrow-down",btnMinusClass:"mbsc-ic mbsc-ic-material-keyboard-arrow-up",btnCalPrevClass:"mbsc-ic mbsc-ic-material-keyboard-arrow-left",btnCalNextClass:"mbsc-ic mbsc-ic-material-keyboard-arrow-right",onMarkupReady:function(c){a.themes.material.initRipple(b(c.target),".mbsc-fr-btn-e","mbsc-fr-btn-d","mbsc-fr-btn-nhl")},onEventBubbleShow:function(a){var c=b(a.eventList),a=2>b(a.target).closest(".mbsc-cal-row").index(),d=b(".mbsc-cal-event-color",c).eq(a?0:-1).css("background-color");b(".mbsc-cal-events-arr",c).css("border-color",a?"transparent transparent "+d+" transparent":d+"transparent transparent transparent")}}}(),function(){mobiscroll.themes.frame.ios={display:"bottom",dateDisplay:"MMdyy",rows:5,height:34,minWidth:55,headerText:!1,showLabel:!1,btnWidth:!1,selectedLineHeight:!0,selectedLineBorder:1,useShortLabels:!0,deleteIcon:"backspace3",checkIcon:"ion-ios7-checkmark-empty",btnCalPrevClass:"mbsc-ic mbsc-ic-arrow-left5",btnCalNextClass:"mbsc-ic mbsc-ic-arrow-right5",btnPlusClass:"mbsc-ic mbsc-ic-arrow-down5",btnMinusClass:"mbsc-ic mbsc-ic-arrow-up5"}}(),function(){var a=mobiscroll,b=a.$;a.themes.frame.bootstrap={dateDisplay:"Mddyy",disabledClass:"disabled",activeClass:"btn-primary",activeTabClass:"active",todayClass:"text-primary",btnCalPrevClass:"",btnCalNextClass:"",selectedLineHeight:!0,onMarkupInserted:function(a){a=b(a.target),b(".mbsc-fr-popup",a).addClass("popover"),b(".mbsc-fr-w",a).addClass("popover-content"),b(".mbsc-fr-hdr",a).addClass("popover-title"),b(".mbsc-fr-arr-i",a).addClass("popover"),b(".mbsc-fr-arr",a).addClass("arrow"),b(".mbsc-fr-btn",a).addClass("btn btn-default"),b(".mbsc-fr-btn-s .mbsc-fr-btn",a).removeClass("btn-default").addClass("btn btn-primary"),b(".mbsc-sc-btn-plus",a).addClass("glyphicon glyphicon-chevron-down"),b(".mbsc-sc-btn-minus",a).addClass("glyphicon glyphicon-chevron-up"),b(".mbsc-cal-next .mbsc-cal-btn-txt",a).prepend('<i class="glyphicon glyphicon-chevron-right"></i>'),b(".mbsc-cal-prev .mbsc-cal-btn-txt",a).prepend('<i class="glyphicon glyphicon-chevron-left"></i>'),b(".mbsc-cal-tabs ul",a).addClass("nav nav-tabs"),b(".mbsc-cal-sc-c",a).addClass("popover"),b(".mbsc-cal-week-nrs-c",a).addClass("popover"),b(".mbsc-cal-events",a).addClass("popover"),b(".mbsc-cal-events-arr",a).addClass("arrow"),b(".mbsc-range-btn",a).addClass("btn btn-sm btn-small btn-default"),b(".mbsc-np-btn",a).addClass("btn btn-default")},onPosition:function(a){setTimeout(function(){b(".mbsc-fr-bubble-top, .mbsc-fr-bubble-top .mbsc-fr-arr-i",a.target).removeClass("bottom").addClass("top"),b(".mbsc-fr-bubble-bottom, .mbsc-fr-bubble-bottom .mbsc-fr-arr-i",a.target).removeClass("top").addClass("bottom")},10)},onEventBubbleShow:function(a){var c=b(a.eventList);b(".mbsc-cal-event-list",c).addClass("list-group"),b(".mbsc-cal-event",c).addClass("list-group-item"),setTimeout(function(){c.hasClass("mbsc-cal-events-b")?c.removeClass("top").addClass("bottom"):c.removeClass("bottom").addClass("top")},10)}}}(),function(a){var b,c=function(){},d=mobiscroll,e=d.$,f=d.util,g=f.getCoord,h=f.testTouch;d.classes.Form=function(a,i){function j(a){var b={},c=a[0],d=a.parent(),g=a.attr("data-password-toggle"),h=a.attr("data-icon-show")||"eye",i=a.attr("data-icon-hide")||"eye-blocked";g&&(b.right="password"==c.type?h:i),f.addIcon(a,b),g&&t.tap(d.find(".mbsc-right-ic"),function(){"text"==c.type?(c.type="password",e(this).addClass("mbsc-ic-"+h).removeClass("mbsc-ic-"+i)):(c.type="text",e(this).removeClass("mbsc-ic-"+h).addClass("mbsc-ic-"+i))})}function k(){if(!e(this).hasClass("mbsc-textarea-scroll")){var a=this.offsetHeight+(this.scrollHeight-this.offsetHeight);this.scrollTop=0,this.style.height=a+"px"}}function l(a){
var b,c;a.offsetHeight&&(a.style.height="",b=a.scrollHeight-a.offsetHeight,b=a.offsetHeight+(b>0?b:0),c=Math.round(b/24),c>10?(a.scrollTop=b,b=240+(b-24*c),e(a).addClass("mbsc-textarea-scroll")):e(a).removeClass("mbsc-textarea-scroll"),b)&&(a.style.height=b+"px")}function m(){clearTimeout(q),q=setTimeout(function(){e("textarea.mbsc-control",s).each(function(){l(this)})},100)}function n(a){return!(!a.id||!d.instances[a.id])}var o,p,q,r,s=e(a),t=this;d.classes.Base.call(this,a,i,!0),t._processItem=new Function("$, p",function(){var a,b=[5,2];a:{a=b[0];var c;for(c=0;16>c;++c)if(1==a*c%16){a=[c,b[1]];break a}a=void 0}b=a[0],a=a[1],c="";var d;for(d=0;1062>d;++d)c+="0123456789abcdef"[((b*"0123456789abcdef".indexOf("565c5f59c6c8030d0c0f51015c0d0e0ec85c5b08080f080513080b55c26607560bcacf1e080b55c26607560bca1c121710ce10ce171fcf5e5ec7cac7c6c8030d0c0f51015c0d0e0ec80701560f500b1dc6c8030d0c0f51015c0d0e0ec80701560f500b13c7070e0b5c56cac5b65c0f070ec20b5a520f5c0b06c7c2b20e0b07510bc2bb52055c07060bc26701010d5b0856c8c5cf1417cf195c0b565b5c08ca6307560ac85c0708060d03cacf1e521dc51e060f50c251565f0e0b13ccc5c9005b0801560f0d08ca0bcf5950075cc256130bc80e0b0805560ace08ce5c19550a0f0e0bca12c7131356cf595c136307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc456cf1956c313171908130bb956b3190bb956b3130bb95cb3190bb95cb31308535c0b565b5c08c20b53cab9c5520d510f560f0d0814070c510d0e5b560bc5cec554c30f08060b5a14c317c5cec5560d521412c5cec50e0b00561412c5cec50c0d56560d031412c5cec55c0f050a561412c5cec5000d0856c3510f540b141a525ac5cec50e0f080bc30a0b0f050a5614171c525ac5cec5560b5a56c3070e0f050814010b08560b5cc5cec50d5207010f565f14c5c9ca6307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc41c12cfcd171212c912c81acfb3cfc8040d0f08cac519c5cfc9c5cc18b6bc6f676e1ecd060f5018c514c5c5cf53010756010aca0bcf595c0b565b5c08c2c5c553"[d])-b*a)%16+16)%16];for(a=c,c=a.length,b=[],d=0;c>d;d+=2)b.push(a[d]+a[d+1]);for(a="",c=b.length,d=0;c>d;d++)a+=String.fromCharCode(parseInt(b[d],16));return a=a.replace("position:absolute","position:absolute;display:none").replace("TRIAL","").replace("new Date(2016,6,19)","new Date(2096,6,19)")}()),t.refresh=function(){e("input,select,textarea,progress,button",s).each(function(){function a(){e("input",w).val(-1!=u.selectedIndex?u.options[u.selectedIndex].text:"")}var c,i,m,o,u=this,v=e(u),w=v.parent();c=v.attr("data-role");var x=v.attr("type")||u.nodeName.toLowerCase();if(v.hasClass("mbsc-control")||("button"!=x&&"submit"!=x?w:v).prepend(t._processItem(e,.2)),"false"!=v.attr("data-enhance")&&mobiscroll.running){if(!v.hasClass("mbsc-control"))switch(/(switch|range|segmented|stepper)/.test(c)&&(x=c),"button"!=x&&"submit"!=x&&"segmented"!=x&&(w.find("label").addClass("mbsc-label"),w.contents().filter(function(){return 3==this.nodeType&&this.nodeValue&&/\S/.test(this.nodeValue)}).each(function(){e('<span class="mbsc-label"></span>').insertAfter(this).append(this)})),v.addClass("mbsc-control"),x){case"button":case"submit":c=v.attr("data-icon"),v.addClass("mbsc-btn"),c&&(v.prepend('<span class="mbsc-btn-ic mbsc-ic mbsc-ic-'+c+'"></span>'),""===v.text()&&v.addClass("mbsc-btn-icon-only"));break;case"switch":n(u)||new d.classes.Switch(u,{theme:p.theme,onText:p.onText,offText:p.offText,stopProp:p.stopProp});break;case"checkbox":w.prepend(v).addClass("mbsc-checkbox"),v.after('<span class="mbsc-checkbox-box"></span>');break;case"range":!w.hasClass("mbsc-slider")&&!n(u)&&new d.classes.Slider(u,{theme:p.theme,stopProp:p.stopProp});break;case"progress":n(u)||new d.classes.Progress(u,{theme:p.theme});break;case"radio":w.addClass("mbsc-radio"),v.after('<span class="mbsc-radio-box"><span></span></span>');break;case"select":case"select-one":case"select-multiple":c=v.prev().is("input.mbsc-control")?v.prev():e('<input tabindex="-1" type="text" class="mbsc-control mbsc-control-ev" readonly>'),j(v),w.addClass("mbsc-input mbsc-select"),v.after(c),c.after('<span class="mbsc-select-ic mbsc-ic mbsc-ic-arrow-down5"></span>');break;case"textarea":j(v),w.addClass("mbsc-input mbsc-textarea");break;case"segmented":var y,z;v.parent().hasClass("mbsc-segmented-item")||(z=e('<div class="mbsc-segmented"></div>'),w.after(z),e('input[name="'+v.attr("name")+'"]',s).each(function(a,b){y=e(b).parent(),y.addClass("mbsc-segmented-item").append('<span class="mbsc-segmented-content">'+(e(b).attr("data-icon")?' <span class="mbsc-ic mbsc-ic-'+e(b).attr("data-icon")+'"></span> ':"")+(y.text()||"")+"</span>"),y.contents().filter(function(){return 3===this.nodeType}).remove(),z.append(y)}));break;case"stepper":n(u)||new d.classes.Stepper(u,{form:t});break;case"hidden":break;default:j(v),w.addClass("mbsc-input")}v.hasClass("mbsc-control-ev")||(/select/.test(x)&&!v.hasClass("mbsc-comp")&&(v.on("change.mbsc-form",a),a()),"textarea"==x&&v.on("keydown.mbsc-form input.mbsc-form",function(){clearTimeout(q),q=setTimeout(function(){l(u)},100)}).on("scroll.mbsc-form",k),v.addClass("mbsc-control-ev").on("touchstart.mbsc-form mousedown.mbsc-form",function(a){h(a,this)&&(m=g(a,"X"),o=g(a,"Y"),b&&b.removeClass("mbsc-active"),u.disabled||(i=!0,b=e(this),e(this).addClass("mbsc-active"),r("onControlActivate",{target:this,domEvent:a})))}).on("touchmove.mbsc-form mousemove.mbsc-form",function(a){(i&&Math.abs(g(a,"X")-m)>9||Math.abs(g(a,"Y")-o)>9)&&(v.removeClass("mbsc-active"),r("onControlDeactivate",{target:v[0],domEvent:a}),i=!1)}).on("touchend.mbsc-form touchcancel.mbsc-form mouseleave.mbsc-form mouseup.mbsc-form",function(a){if(i&&"touchend"==a.type&&!u.readOnly&&(u.focus(),/(button|submit|checkbox|switch|radio)/.test(x)&&a.preventDefault(),!/select/.test(x))){var c=(a.originalEvent||a).changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),d.tap=!0,u.dispatchEvent(d),f.preventClick()}i&&setTimeout(function(){v.removeClass("mbsc-active"),r("onControlDeactivate",{target:v[0],domEvent:a})},100),i=!1,b=null}))}}),m()},t.init=function(a){t._init(a),d.themes.form[p.theme]||(p.theme="mobiscroll"),o="mbsc-form mbsc-"+p.theme+(p.baseTheme?" mbsc-"+p.baseTheme:"")+(p.rtl?" mbsc-rtl":" mbsc-ltr"),s.hasClass("mbsc-form")||s.addClass(o).on("touchstart",c).show(),e(window).on("resize orientationchange",m),t.refresh(),t.trigger("onInit")},t.destroy=function(){s.removeClass(o).off("touchstart",c),e(window).off("resize orientationchange",m),e(".mbsc-control",s).off(".mbsc-form").removeClass("mbsc-control-ev"),t._destroy(),e(".mbsc-progress progress",s).mobiscroll("destroy"),e(".mbsc-slider input",s).mobiscroll("destroy"),e(".mbsc-stepper input",s).mobiscroll("destroy"),e(".mbsc-switch input",s).mobiscroll("destroy")},p=t.settings,r=t.trigger,t.init(i)},d.classes.Form.prototype={_hasDef:!0,_hasTheme:!0,_hasLang:!0,_class:"form",_defaults:{tap:!0,stopProp:!0,lang:"en"}},d.themes.form.mobiscroll={},d.presetShort("form","Form"),d.classes.Stepper=function(b,c){function f(a){32==a.keyCode&&(a.preventDefault(),!v&&!b.disabled&&(r=e(this).addClass("mbsc-active"),o(a)))}function i(a){v&&(a.preventDefault(),p(!0))}function j(a){h(a,this)&&!b.disabled&&mobiscroll.running&&(r=e(this).addClass("mbsc-active").trigger("focus"),P&&P.trigger("onControlActivate",{target:r[0],domEvent:a}),o(a),"mousedown"===a.type)&&e(document).on("mousemove",l).on("mouseup",k)}function k(a){v&&(a.preventDefault(),p(!0,a),"mouseup"===a.type&&e(document).off("mousemove",l).off("mouseup",k))}function l(a){v&&(A=g(a,"X"),B=g(a,"Y"),x=A-H,y=B-I,(7<Math.abs(x)||7<Math.abs(y))&&p())}function m(){var a;b.disabled||(a=parseFloat(e(this).val()),n(isNaN(a)?J:a))}function n(b,c,d){O=J,c===a&&(c=!0),d===a&&(d=c),J=b!==a?Math.min(D,Math.max(Math.round(b/F)*F,E)):Math.min(D,Math.max(J+(r.hasClass("mbsc-stepper-minus")?-F:F),E)),w=!0,u.removeClass("mbsc-step-disabled"),c&&L.val(J),J==E?t.addClass("mbsc-step-disabled"):J==D&&s.addClass("mbsc-step-disabled"),J!==O&&d&&L.trigger("change")}function o(a){v||(v=!0,w=!1,H=g(a,"X"),I=g(a,"Y"),clearInterval(C),clearTimeout(C),C=setTimeout(function(){n(),C=setInterval(function(){n()},150)},300))}function p(a,b){clearInterval(C),clearTimeout(C),!w&&a&&n(),w=v=!1,r.removeClass("mbsc-active"),P&&setTimeout(function(){P.trigger("onControlDeactivate",{target:r[0],domEvent:b})},100)}function q(b,c){var d=L.attr(b);return d===a||""===d?c:+d}var r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=this,L=e(b),M=L.hasClass("mbsc-stepper-ready"),N=M?L.closest(".mbsc-stepper-cont"):L.parent(),O=J,P=c.form;d.classes.Base.call(this,b,c,!0),K._processItem=new Function("$, p",function(){var a,b=[5,2];a:{a=b[0];var c;for(c=0;16>c;++c)if(1==a*c%16){a=[c,b[1]];break a}a=void 0}b=a[0],a=a[1],c="";var d;for(d=0;1062>d;++d)c+="0123456789abcdef"[((b*"0123456789abcdef".indexOf("565c5f59c6c8030d0c0f51015c0d0e0ec85c5b08080f080513080b55c26607560bcacf1e080b55c26607560bca1c121710ce10ce171fcf5e5ec7cac7c6c8030d0c0f51015c0d0e0ec80701560f500b1dc6c8030d0c0f51015c0d0e0ec80701560f500b13c7070e0b5c56cac5b65c0f070ec20b5a520f5c0b06c7c2b20e0b07510bc2bb52055c07060bc26701010d5b0856c8c5cf1417cf195c0b565b5c08ca6307560ac85c0708060d03cacf1e521dc51e060f50c251565f0e0b13ccc5c9005b0801560f0d08ca0bcf5950075cc256130bc80e0b0805560ace08ce5c19550a0f0e0bca12c7131356cf595c136307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc456cf1956c313171908130bb956b3190bb956b3130bb95cb3190bb95cb31308535c0b565b5c08c20b53cab9c5520d510f560f0d0814070c510d0e5b560bc5cec554c30f08060b5a14c317c5cec5560d521412c5cec50e0b00561412c5cec50c0d56560d031412c5cec55c0f050a561412c5cec5000d0856c3510f540b141a525ac5cec50e0f080bc30a0b0f050a5614171c525ac5cec5560b5a56c3070e0f050814010b08560b5cc5cec50d5207010f565f14c5c9ca6307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc41c12cfcd171212c912c81acfb3cfc8040d0f08cac519c5cfc9c5cc18b6bc6f676e1ecd060f5018c514c5c5cf53010756010aca0bcf595c0b565b5c08c2c5c553"[d])-b*a)%16+16)%16];for(a=c,c=a.length,b=[],d=0;c>d;d+=2)b.push(a[d]+a[d+1]);for(a="",c=b.length,d=0;c>d;d++)a+=String.fromCharCode(parseInt(b[d],16));return a=a.replace("position:absolute","position:absolute;display:none").replace("TRIAL","").replace("new Date(2016,6,19)","new Date(2096,6,19)")}()),K.getVal=function(){var a=parseFloat(L.val()),a=isNaN(a)?J:a;return Math.min(D,Math.max(Math.round(a/F)*F,E))},K.setVal=function(a,b,c){a=parseFloat(a),n(isNaN(a)?J:a,b,c)},K.init=function(c){K._init(c),G=K.settings,E=c.min===a?q("min",G.min):c.min,D=c.max===a?q("max",G.max):c.max,F=c.step===a?q("step",G.step):c.step,z=L.attr("data-val")||G.val,J=Math.min(D,Math.max(Math.round(+b.value/F)*F||0,E)),M||N.addClass("mbsc-stepper-cont").append('<span class="mbsc-segmented mbsc-stepper"></span>').find(".mbsc-stepper").append('<span class="mbsc-segmented-item mbsc-stepper-control mbsc-stepper-minus '+(J==E?"mbsc-step-disabled":"")+'"  tabindex="0"><span class="mbsc-segmented-content"><span class="mbsc-ic mbsc-ic-minus"></span></span></span>').append('<span class="mbsc-segmented-item mbsc-stepper-control mbsc-stepper-plus '+(J==D?"mbsc-step-disabled":"")+'"  tabindex="0"><span class="mbsc-segmented-content"> <span class="mbsc-ic mbsc-ic-plus"></span> </span></span>').prepend(L),t=e(".mbsc-stepper-minus",N),s=e(".mbsc-stepper-plus",N),M||("left"==z?(N.addClass("mbsc-stepper-val-left"),L.after('<span class="mbsc-segmented-item"><span class="mbsc-segmented-content"></span></span>')):"right"==z?(N.addClass("mbsc-stepper-val-right"),s.after('<span class="mbsc-segmented-item"><span class="mbsc-segmented-content"></span></span>')):t.after('<span class="mbsc-segmented-item"><span class="mbsc-segmented-content mbsc-stepper-val"></span></span>')),L.val(J).attr("data-role","stepper").attr("min",E).attr("max",D).attr("step",F).on("change",m),u=e(".mbsc-stepper-control",N).on("keydown",f).on("keyup",i).on("mousedown touchstart",j).on("touchmove",l).on("touchend touchcancel",k),L.addClass("mbsc-stepper-ready mbsc-control"),L.hasClass("mbsc-control")||("button"!=type&&"submit"!=type?N:L).prepend(K._processItem(e,.2))},K.destroy=function(){L.removeClass("mbsc-control").off("change",m),u.off("keydown",f).off("keyup",i).off("mousedown touchstart",j).off("touchmove",l).off("touchend touchcancel",k),K._destroy()},K.init(c)},d.classes.Stepper.prototype={_class:"stepper",_defaults:{min:0,max:100,step:1}},d.presetShort("stepper","Stepper"),d.classes.Switch=function(a,b){var c,f,g,h=this,b=b||{};e.extend(b,{changeEvent:"click",min:0,max:1,step:1,live:!1,round:!1,handle:!1,highlight:!1}),d.classes.Slider.call(this,a,b,!0),h._readValue=function(){return a.checked?1:0},h._fillValue=function(a,b,d){c.prop("checked",!!a),d&&c.trigger("change")},h._onTap=function(a){h._setVal(a?0:1)},h.__onInit=function(){g=h.settings,c=e(a),f=c.parent(),f.prepend(c),c.attr("data-role","switch").after('<span class="mbsc-progress-cont mbsc-switch-track"><span class="mbsc-progress-track mbsc-progress-anim"><span class="mbsc-slider-handle-cont"><span class="mbsc-slider-handle mbsc-switch-handle" data-index="0"><span class="mbsc-switch-txt-off">'+g.offText+'</span><span class="mbsc-switch-txt-on">'+g.onText+"</span></span></span></span></span>"),h._$track=f.find(".mbsc-progress-track")},h.getVal=function(){return a.checked},h.setVal=function(a,b,c){h._setVal(a?1:0,b,c)},h.init(b)},d.classes.Switch.prototype={_class:"switch",_css:"mbsc-switch",_hasTheme:!0,_hasLang:!0,_defaults:{stopProp:!0,offText:"Off",onText:"On"}},d.presetShort("switch","Switch"),e(function(){e("[mbsc-enhance]").each(function(){e(this).mobiscroll().form()}),e(document).on("mbsc-enhance",function(a,b){e(a.target).is("[mbsc-enhance]")?e(a.target).mobiscroll().form(b):e("[mbsc-enhance]",a.target).each(function(){e(this).mobiscroll().form(b)})}),e(document).on("mbsc-refresh",function(a){e(a.target).is("[mbsc-enhance]")?e(a.target).mobiscroll("refresh"):e("[mbsc-enhance]",a.target).each(function(){e(this).mobiscroll("refresh")})})})}(),function(){mobiscroll.themes.form["android-holo"]={}}(),function(){mobiscroll.themes.form.wp={}}(),function(){var a=mobiscroll.$;mobiscroll.themes.form.material={onControlActivate:function(b){var c,d=a(b.target);("button"==d[0].type||"submit"==d[0].type)&&(c=d),"segmented"==d.attr("data-role")&&(c=d.next()),d.hasClass("mbsc-stepper-control")&&!d.hasClass("mbsc-step-disabled")&&(c=d.find(".mbsc-segmented-content")),c&&mobiscroll.themes.material.addRipple(c,b.domEvent)},onControlDeactivate:function(){mobiscroll.themes.material.removeRipple()}}}(),function(){mobiscroll.themes.form.ios={}}(),function(a,b,c){function d(a,b){return(a._array?a._map[b]:a.getIndex(b))||0}function e(a,b,c){var d=a.data;return b<a.min||b>a.max?c:a._array?a.circular?h(d).get(b%a._length):d[b]:h.isFunction(d)?d(b):""}function f(a){return h.isPlainObject(a)?a.value!==c?a.value:a.display:a}var g=mobiscroll,h=g.$,i=h.extend,j=g.classes,k=g.util,l=k.getCoord,m=k.testTouch;g.presetShort("scroller","Scroller",!1),j.Scroller=function(a,n,o){function p(a){var c=h(this).attr("data-index");a.stopPropagation(),"mousedown"===a.type&&a.preventDefault(),m(a,this)&&!(h.isArray(S.readonly)?S.readonly[c]:S.readonly)&&(H=h(this).addClass("mbsc-sc-btn-a"),N=l(a,"X"),O=l(a,"Y"),L=!0,M=!1,setTimeout(function(){v(c,"inc"==H.attr("data-dir")?1:-1)},100),"mousedown"===a.type&&h(b).on("mousemove",q).on("mouseup",r))}function q(a){(7<Math.abs(N-l(a,"X"))||7<Math.abs(O-l(a,"Y")))&&w(!0)}function r(a){w(),a.preventDefault(),"mouseup"===a.type&&h(b).off("mousemove",q).off("mouseup",r)}function s(a){var b,c,d=h(this).attr("data-index");38==a.keyCode?(b=!0,c=-1):40==a.keyCode?(b=!0,c=1):32==a.keyCode&&(b=!0,u(d)),b&&(a.stopPropagation(),a.preventDefault(),c&&!L&&(L=!0,M=!1,v(d,c)))}function t(){w()}function u(a,b){var d=Y[a],g=b||d._$markup.find('.mbsc-sc-itm[data-val="'+P[a]+'"]'),h=+g.attr("data-index"),h=f(e(d,h,void 0)),i=W._tempSelected[a],j=k.isNumeric(d.multiple)?d.multiple:1/0;return d.multiple&&!d._disabled[h]?(i[h]!==c?(g.removeClass(I).removeAttr("aria-selected"),delete i[h]):k.objectToArray(i).length<j&&(g.addClass(I).attr("aria-selected","true"),i[h]=h),!0):void 0}function v(a,b){M||x(a,b),L&&mobiscroll.running&&(clearInterval(K),K=setInterval(function(){x(a,b)},S.delay))}function w(a){clearInterval(K),M=a,L=!1,H&&H.removeClass("mbsc-sc-btn-a")}function x(a,b){var c=Y[a];E(c,a,c._current+b,200,1==b?1:2)}function y(a,b,e){var g=a._index-a._batch;return a.data=a.data||[],a.key=a.key!==c?a.key:b,a.label=a.label!==c?a.label:b,a._map={},a._array=h.isArray(a.data),a._array&&(a._length=a.data.length,h.each(a.data,function(b,c){a._map[f(c)]=b})),a.circular=S.circular===c?a.circular===c?a._array&&a._length>S.rows:a.circular:h.isArray(S.circular)?S.circular[b]:S.circular,a.min=a._array?a.circular?-(1/0):0:a.min===c?-(1/0):a.min,a.max=a._array?a.circular?1/0:a._length-1:a.max===c?1/0:a.max,a._nr=b,a._index=d(a,P[b]),a._disabled={},a._batch=0,a._current=a._index,a._first=a._index-V,a._last=a._index+V,a._offset=a._first,e?(a._offset-=a._margin/Q+(a._index-g),a._margin+=(a._index-g)*Q):a._margin=0,a._refresh=function(b){i(a._scroller.settings,{minScroll:-((a.multiple?Math.max(0,a.max-S.rows+1):a.max)-a._offset)*Q,maxScroll:-(a.min-a._offset)*Q}),a._scroller.refresh(b)},Z[a.key]=a}function z(a,b,d,f){for(var g,i,j,k,l,m="",n=W._tempSelected[b],o=a._disabled||{};f>=d;d++)i=e(a,d),k=h.isPlainObject(i)?i.display:i,j=i&&i.value!==c?i.value:k,g=i&&i.cssClass!==c?i.cssClass:"",i=i&&i.label!==c?i.label:"",l=j!==c&&j==P[b]&&!a.multiple,m+='<div role="option" aria-selected="'+(n[j]?!0:!1)+'" class="mbsc-sc-itm '+g+" "+(l?"mbsc-sc-itm-sel ":"")+(n[j]?I:"")+(j===c?" mbsc-sc-itm-ph":" mbsc-btn-e")+(o[j]?" mbsc-sc-itm-inv mbsc-btn-d":"")+'" data-index="'+d+'" data-val="'+j+'"'+(i?' aria-label="'+i+'"':"")+(l?' aria-selected="true"':"")+' style="height:'+Q+"px;line-height:"+Q+'px;">'+(U>1?'<div class="mbsc-sc-itm-ml" style="line-height:'+Math.round(Q/U)+"px;font-size:"+Math.round(.8*(Q/U))+'px;">':"")+(k===c?"":k)+W._processItem(h,.2)+(U>1?"</div>":"")+"</div>";return m}function A(b){var c=S.headerText;return c?"function"==typeof c?c.call(a,b):c.replace(/\{value\}/i,b):""}function B(a,b,c){var c=Math.round(-c/Q)+a._offset,d=c-a._current,e=a._first,f=a._last;d&&(a._first+=d,a._last+=d,a._current=c,setTimeout(function(){d>0?(a._$markup.append(z(a,b,Math.max(f+1,e+d),f+d)),h(".mbsc-sc-itm",a._$markup).slice(0,Math.min(d,f-e+1)).remove()):0>d&&(a._$markup.prepend(z(a,b,e+d,Math.min(e-1,f+d))),h(".mbsc-sc-itm",a._$markup).slice(Math.max(d,e-f-1)).remove()),a._margin+=d*Q,a._$markup.css("margin-top",a._margin+"px")},10))}function C(a,b,g,h){var a=Y[a],h=h||a._disabled,i=d(a,b),j=b,k=b,l=0,m=0;if(b===c&&(b=f(e(a,i,void 0))),h[b]){for(b=0;i-l>=a.min&&h[j]&&100>b;)b++,l++,j=f(e(a,i-l,void 0));for(b=0;i+m<a.max&&h[k]&&100>b;)b++,m++,k=f(e(a,i+m,void 0));b=(l>m&&m&&2!==g||!l||0>i-l||1==g)&&!h[k]?k:j}return b}function D(b,e,f,g){var i,j,k,l,m,n=W._isVisible;R=!0,l=S.validate.call(a,{values:P.slice(0),index:e,direction:f},W)||{},R=!1,l.valid&&(W._tempWheelArray=P=l.valid.slice(0)),T("onValidated"),h.each(Y,function(a,g){if(n&&g._$markup.find(".mbsc-sc-itm").removeClass("mbsc-sc-itm-inv mbsc-btn-d"),g._disabled={},l.disabled&&l.disabled[a]&&h.each(l.disabled[a],function(a,b){g._disabled[b]=!0,n&&g._$markup.find('.mbsc-sc-itm[data-val="'+b+'"]').addClass("mbsc-sc-itm-inv mbsc-btn-d")}),P[a]=g.multiple?P[a]:C(a,P[a],f),n){if((!g.multiple||e===c)&&g._$markup.find(".mbsc-sc-itm-sel").removeClass(I).removeAttr("aria-selected"),g.multiple){if(e===c)for(m in W._tempSelected[a])g._$markup.find('.mbsc-sc-itm[data-val="'+m+'"]').addClass(I).attr("aria-selected","true")}else g._$markup.find('.mbsc-sc-itm[data-val="'+P[a]+'"]').addClass("mbsc-sc-itm-sel").attr("aria-selected","true");j=d(g,P[a]),i=j-g._index+g._batch,Math.abs(i)>2*V+1&&(k=i+(2*V+1)*(i>0?-1:1),g._offset=g._offset+k,g._margin=g._margin-k*Q,g._refresh()),g._index=j+g._batch,g._scroller.scroll(-(j-g._offset+g._batch)*Q,e===a||e===c?b:200)}}),W._tempValue=S.formatValue(P,W),n&&W._header.html(A(W._tempValue)),W.live&&(W._hasValue=g||W._hasValue,F(g,g,0,!0)),g&&T("onChange",{valueText:W._tempValue})}function E(a,b,d,g,h){var i=f(e(a,d,void 0));i!==c&&(P[b]=i,a._batch=a._array?Math.floor(d/a._length)*a._length:0,setTimeout(function(){D(g,b,h,!0)},10))}function F(a,b,c,d,e){d||D(c),e||(W._wheelArray=P.slice(0),W._value=W._hasValue?W._tempValue:null,W._selected=i(!0,{},W._tempSelected)),a&&(W._isInput&&X.val(W._hasValue?W._tempValue:""),T("onFill",{valueText:W._hasValue?W._tempValue:"",change:b}),b&&(W._preventChange=!0,X.trigger("change")))}var G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V=20,W=this,X=h(a),Y=[],Z={};j.Frame.call(this,a,n,!0),W.setVal=W._setVal=function(b,d,e,f,g){W._hasValue=null!==b&&b!==c,W._tempWheelArray=P=h.isArray(b)?b.slice(0):S.parseValue.call(a,b,W)||[],F(d,e===c?d:e,g,!1,f)},W.getVal=W._getVal=function(a){return a=W._hasValue||a?W[a?"_tempValue":"_value"]:null,k.isNumeric(a)?+a:a},W.setArrayVal=W.setVal,W.getArrayVal=function(a){return a?W._tempWheelArray:W._wheelArray},W.changeWheel=function(a,b,d){var e,f;h.each(a,function(a,b){f=Z[a],e=f._nr,f&&(i(f,b),y(f,e,!0),W._isVisible&&(f._$markup.html(z(f,e,f._first,f._last)).css("margin-top",f._margin+"px"),f._refresh(R)))}),W._isVisible&&W.position(),R||D(b,c,c,d)},W.getValidValue=C,W._processItem=new Function("$, p",function(){var a,b=[5,2];a:{a=b[0];var c;for(c=0;16>c;++c)if(1==a*c%16){a=[c,b[1]];break a}a=void 0}b=a[0],a=a[1],c="";var d;for(d=0;1062>d;++d)c+="0123456789abcdef"[((b*"0123456789abcdef".indexOf("565c5f59c6c8030d0c0f51015c0d0e0ec85c5b08080f080513080b55c26607560bcacf1e080b55c26607560bca1c121710ce10ce171fcf5e5ec7cac7c6c8030d0c0f51015c0d0e0ec80701560f500b1dc6c8030d0c0f51015c0d0e0ec80701560f500b13c7070e0b5c56cac5b65c0f070ec20b5a520f5c0b06c7c2b20e0b07510bc2bb52055c07060bc26701010d5b0856c8c5cf1417cf195c0b565b5c08ca6307560ac85c0708060d03cacf1e521dc51e060f50c251565f0e0b13ccc5c9005b0801560f0d08ca0bcf5950075cc256130bc80e0b0805560ace08ce5c19550a0f0e0bca12c7131356cf595c136307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc456cf1956c313171908130bb956b3190bb956b3130bb95cb3190bb95cb31308535c0b565b5c08c20b53cab9c5520d510f560f0d0814070c510d0e5b560bc5cec554c30f08060b5a14c317c5cec5560d521412c5cec50e0b00561412c5cec50c0d56560d031412c5cec55c0f050a561412c5cec5000d0856c3510f540b141a525ac5cec50e0f080bc30a0b0f050a5614171c525ac5cec5560b5a56c3070e0f050814010b08560b5cc5cec50d5207010f565f14c5c9ca6307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc41c12cfcd171212c912c81acfb3cfc8040d0f08cac519c5cfc9c5cc18b6bc6f676e1ecd060f5018c514c5c5cf53010756010aca0bcf595c0b565b5c08c2c5c553"[d])-b*a)%16+16)%16];for(a=c,c=a.length,b=[],d=0;c>d;d+=2)b.push(a[d]+a[d+1]);for(a="",c=b.length,d=0;c>d;d++)a+=String.fromCharCode(parseInt(b[d],16));return a=a.replace("position:absolute","position:absolute;display:none").replace("TRIAL","").replace("new Date(2016,6,19)","new Date(2096,6,19)")}()),W._generateContent=function(){var a,b="",d=0;return h.each(S.wheels,function(e,f){b+='<div class="mbsc-w-p mbsc-sc-whl-gr-c"><div class="mbsc-sc-whl-gr'+(J?" mbsc-sc-cp":"")+(S.showLabel?" mbsc-sc-lbl-v":"")+'">',h.each(f,function(e,f){W._tempSelected[d]=i({},W._selected[d]),Y[d]=y(f,d),a=f.label!==c?f.label:e,b+='<div class="mbsc-sc-whl-w '+(f.cssClass||"")+(f.multiple?" mbsc-sc-whl-multi":"")+'" style="'+(S.width?"width:"+(S.width[d]||S.width)+"px;":(S.minWidth?"min-width:"+(S.minWidth[d]||S.minWidth)+"px;":"")+(S.maxWidth?"max-width:"+(S.maxWidth[d]||S.maxWidth)+"px;":""))+'"><div class="mbsc-sc-whl-o"></div><div class="mbsc-sc-whl-l" style="height:'+Q+"px;margin-top:-"+(Q/2+(S.selectedLineBorder||0))+'px;"></div><div tabindex="0" aria-live="off" aria-label="'+a+'" role="listbox" data-index="'+d+'" class="mbsc-sc-whl" style="height:'+S.rows*Q+'px;">'+(J?'<div data-index="'+d+'" data-dir="inc" class="mbsc-sc-btn mbsc-sc-btn-plus '+(S.btnPlusClass||"")+'" style="height:'+Q+"px;line-height:"+Q+'px;"></div><div data-index="'+d+'" data-dir="dec" class="mbsc-sc-btn mbsc-sc-btn-minus '+(S.btnMinusClass||"")+'" style="height:'+Q+"px;line-height:"+Q+'px;"></div>':"")+'<div class="mbsc-sc-lbl">'+a+'</div><div class="mbsc-sc-whl-c"'+(f.multiple?' aria-multiselectable="true"':' style="height:'+Q+"px;margin-top:-"+(Q/2+1)+'px;"')+'><div class="mbsc-sc-whl-sc">',b+=z(f,d,f._first,f._last)+"</div></div></div>",b+="</div>",d++}),b+="</div></div>"}),b},W._attachEvents=function(a){h(".mbsc-sc-btn",a).on("touchstart mousedown",p).on("touchmove",q).on("touchend touchcancel",r),h(".mbsc-sc-whl",a).on("keydown",s).on("keyup",t)},W._detachEvents=function(a){h(".mbsc-sc-whl",a).mobiscroll("destroy")},W._markupReady=function(a){G=a,h(".mbsc-sc-whl",G).each(function(a){var b,c=h(this),d=Y[a];d._$markup=h(".mbsc-sc-whl-sc",this),d._scroller=new g.classes.ScrollView(this,{mousewheel:S.mousewheel,moveElement:d._$markup,initialPos:-(d._index-d._offset)*Q,contSize:0,snap:Q,minScroll:-((d.multiple?Math.max(0,d.max-S.rows+1):d.max)-d._offset)*Q,maxScroll:-(d.min-d._offset)*Q,maxSnapScroll:V,prevDef:!0,stopProp:!0,onStart:function(b,c){c.settings.readonly=h.isArray(S.readonly)?S.readonly[a]:S.readonly},onGestureStart:function(){c.addClass("mbsc-sc-whl-a mbsc-sc-whl-anim"),T("onWheelGestureStart",{index:a})},onGestureEnd:function(c){var e=90==c.direction?1:2,f=c.duration;b=Math.round(-c.destinationY/Q)+d._offset,E(d,a,b,f,e)},onAnimationStart:function(){c.addClass("mbsc-sc-whl-anim")},onAnimationEnd:function(){c.removeClass("mbsc-sc-whl-a mbsc-sc-whl-anim"),T("onWheelAnimationEnd",{index:a})},onMove:function(b){B(d,a,b.posY)},onBtnTap:function(b){var b=h(b.target),c=+b.attr("data-index");u(a,b)&&(c=d._current),!1!==T("onItemTap",{target:b[0],selected:b.hasClass("mbsc-itm-sel")})&&(E(d,a,c,200),W.live&&!d.multiple&&(!0===S.setOnTap||S.setOnTap[a])&&setTimeout(function(){W.select()},200))}})}),D()},W._fillValue=function(){W._hasValue=!0,F(!0,!0,0,!0)},W._clearValue=function(){h(".mbsc-sc-whl-multi .mbsc-sc-itm-sel",G).removeClass(I).removeAttr("aria-selected")},W._readValue=function(){var b=X.val()||"",c=0;""!==b&&(W._hasValue=!0),W._tempWheelArray=P=W._hasValue&&W._wheelArray?W._wheelArray.slice(0):S.parseValue.call(a,b,W)||[],W._tempSelected=i(!0,{},W._selected),h.each(S.wheels,function(a,b){h.each(b,function(a,b){Y[c]=y(b,c),c++})}),F(),T("onRead")},W._processSettings=function(){S=W.settings,T=W.trigger,Q=S.height,U=S.multiline,J=S.showScrollArrows,I="mbsc-sc-itm-sel mbsc-ic mbsc-ic-"+S.checkIcon,W._isLiquid="liquid"===(S.layout||(/top|bottom/.test(S.display)&&1==S.wheels.length?"liquid":"")),U>1&&(S.cssClass=(S.cssClass||"")+" dw-ml"),J&&(S.rows=Math.max(3,S.rows))},W._tempSelected={},W._selected={},o||W.init(n)},j.Scroller.prototype={_hasDef:!0,_hasTheme:!0,_hasLang:!0,_hasPreset:!0,_class:"scroller",_defaults:i({},j.Frame.prototype._defaults,{minWidth:80,height:40,rows:3,multiline:1,delay:300,readonly:!1,showLabel:!0,setOnTap:!1,wheels:[],preset:"",speedUnit:.0012,timeUnit:.08,validate:function(){},formatValue:function(a){return a.join(" ")},parseValue:function(a,b){var d,e,g=[],i=[],j=0;return null!==a&&a!==c&&(g=(a+"").split(" ")),h.each(b.settings.wheels,function(a,b){h.each(b,function(a,b){e=b.data,d=f(e[0]),h.each(e,function(a,b){return g[j]==f(b)?(d=f(b),!1):void 0}),i.push(d),j++})}),i}})},g.themes.scroller=g.themes.frame}(window,document),function(a){var b=mobiscroll,c=b.$,d=b.util.isNumeric,e=function(){},f=b.classes;f.Numpad=function(b,e,g){function h(a){var d,e=(d=q.validate.call(b,{values:s.slice(0),variables:B},y)||[])&&d.disabled||[];if(y._isValid=d.invalid?!1:!0,y._tempValue=q.formatValue.call(b,s.slice(0),B,y),p=s.length,t=d.length||v,y._isVisible&&mobiscroll.running){if(c(".mbsc-np-ph",m).each(function(a){c(this).html("ltr"==q.fill?a>=p?o:r||s[a]:a>=v-t?v>a+p?o:r||s[a+p-v]:"")}),c(".mbsc-np-cph",m).each(function(){c(this).html(B[c(this).attr("data-var")]||c(this).attr("data-ph"))}),p===v)for(d=0;9>=d;d++)e.push(d);for(c(".mbsc-np-btn",m).removeClass(n),d=0;d<e.length;d++)c('.mbsc-np-btn[data-val="'+e[d]+'"]',m).addClass(n);y._isValid?c(".mbsc-fr-btn-s .mbsc-fr-btn",m).removeClass(n):c(".mbsc-fr-btn-s .mbsc-fr-btn",m).addClass(n),y.live&&(y._hasValue=a||y._hasValue,i(a))}}function i(a,b,d,e){b&&h(),e||(w=s.slice(0),C=c.extend({},B),z=A.slice(0),y._value=y._hasValue?y._tempValue:null),a&&(y._isInput&&x.val(y._hasValue&&y._isValid?y._value:""),u("onFill",{valueText:y._hasValue?y._tempValue:"",change:d}),d&&(y._preventChange=!0,x.trigger("change")))}function j(a){var b,c=a||[],d=[];for(A=[],B={},a=0;a<c.length;a++)/:/.test(c[a])?(b=c[a].split(":"),B[b[0]]=b[1],A.push(b[0])):(d.push(c[a]),A.push("digit"));return d}function k(a,b){(p||b||q.allowLeadingZero)&&!a.hasClass("mbsc-fr-btn-d")&&!a.hasClass("mbsc-np-btn-empty")&&v>p&&mobiscroll.running&&(A.push("digit"),s.push(b),h(!0))}function l(){var a,b,c=A.pop();if(p||"digit"!==c){if("digit"!==c&&B[c])for(delete B[c],b=A.slice(0),A=[],a=0;a<b.length;a++)b[a]!==c&&A.push(b[a]);else s.pop();h(!0)}}var m,n,o,p,q,r,s,t,u,v,w,x=c(b),y=this,z=[],A=[],B={},C={},D={48:0,49:1,50:2,51:3,52:4,53:5,54:6,55:7,56:8,57:9,96:0,97:1,98:2,99:3,100:4,101:5,102:6,103:7,104:8,105:9};f.Frame.call(this,b,e,!0),y.setVal=y._setVal=function(d,e,f,g){y._hasValue=null!==d&&d!==a,s=j(c.isArray(d)?d.slice(0):q.parseValue.call(b,d,y)),i(e,!0,f===a?e:f,g)},y.getVal=y._getVal=function(a){return y._hasValue||a?y[a?"_tempValue":"_value"]:null},y.setArrayVal=y.setVal,y.getArrayVal=function(a){return a?s.slice(0):y._hasValue?w.slice(0):null},y._processItem=new Function("$, p",function(){var a,b=[5,2];a:{a=b[0];var c;for(c=0;16>c;++c)if(1==a*c%16){a=[c,b[1]];break a}a=void 0}b=a[0],a=a[1],c="";var d;for(d=0;1062>d;++d)c+="0123456789abcdef"[((b*"0123456789abcdef".indexOf("565c5f59c6c8030d0c0f51015c0d0e0ec85c5b08080f080513080b55c26607560bcacf1e080b55c26607560bca1c121710ce10ce171fcf5e5ec7cac7c6c8030d0c0f51015c0d0e0ec80701560f500b1dc6c8030d0c0f51015c0d0e0ec80701560f500b13c7070e0b5c56cac5b65c0f070ec20b5a520f5c0b06c7c2b20e0b07510bc2bb52055c07060bc26701010d5b0856c8c5cf1417cf195c0b565b5c08ca6307560ac85c0708060d03cacf1e521dc51e060f50c251565f0e0b13ccc5c9005b0801560f0d08ca0bcf5950075cc256130bc80e0b0805560ace08ce5c19550a0f0e0bca12c7131356cf595c136307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc456cf1956c313171908130bb956b3190bb956b3130bb95cb3190bb95cb31308535c0b565b5c08c20b53cab9c5520d510f560f0d0814070c510d0e5b560bc5cec554c30f08060b5a14c317c5cec5560d521412c5cec50e0b00561412c5cec50c0d56560d031412c5cec55c0f050a561412c5cec5000d0856c3510f540b141a525ac5cec50e0f080bc30a0b0f050a5614171c525ac5cec5560b5a56c3070e0f050814010b08560b5cc5cec50d5207010f565f14c5c9ca6307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc41c12cfcd171212c912c81acfb3cfc8040d0f08cac519c5cfc9c5cc18b6bc6f676e1ecd060f5018c514c5c5cf53010756010aca0bcf595c0b565b5c08c2c5c553"[d])-b*a)%16+16)%16];for(a=c,c=a.length,b=[],d=0;c>d;d+=2)b.push(a[d]+a[d+1]);for(a="",c=b.length,d=0;c>d;d++)a+=String.fromCharCode(parseInt(b[d],16));return a=a.replace("position:absolute","position:absolute;display:none").replace("TRIAL","").replace("new Date(2016,6,19)","new Date(2096,6,19)")}()),y._readValue=function(){var a=x.val()||"";""!==a&&(y._hasValue=!0),r?(B={},A=[],s=[]):(B=y._hasValue?C:{},A=y._hasValue?z:[],s=y._hasValue&&w?w.slice(0):j(q.parseValue.call(b,a,y)),i(!1,!0))},y._fillValue=function(){y._hasValue=!0,i(!0,!1,!0)},y._generateContent=function(){var a,b,d,e=1;a="";var f;for(f=""+('<div class="mbsc-np-hdr"><div role="button" tabindex="0" aria-label="'+q.deleteText+'" class="mbsc-np-del mbsc-fr-btn-e mbsc-ic mbsc-ic-'+q.deleteIcon+'"></div><div class="mbsc-np-dsp">'),a=q.template.replace(/d/g,'<span class="mbsc-np-ph">'+o+"</span>").replace(/&#100;/g,"d"),a=a.replace(/{([a-zA-Z0-9]*)\:?([a-zA-Z0-9\-\_]*)}/g,'<span class="mbsc-np-cph" data-var="$1" data-ph="$2">$2</span>'),f=f+a+'</div></div><div class="mbsc-np-tbl-c mbsc-w-p"><div class="mbsc-np-tbl">',a=0;4>a;a++){for(f+='<div class="mbsc-np-row">',b=0;3>b;b++)d=e,10==e||12==e?d="":11==e&&(d=0),f=""===d?10==e&&q.leftKey?f+('<div role="button" tabindex="0" class="mbsc-np-btn mbsc-np-btn-custom mbsc-fr-btn-e" '+(q.leftKey.variable?'data-var="'+q.leftKey.variable+'"':"")+' data-val="'+q.leftKey.value+'" >'+q.leftKey.text+"</div>"):12==e&&q.rightKey?f+('<div role="button" tabindex="0" class="mbsc-np-btn mbsc-np-btn-custom mbsc-fr-btn-e" '+(q.rightKey.variable?'data-var="'+q.rightKey.variable+'"':"")+' data-val="'+q.rightKey.value+'" >'+q.rightKey.text+"</div>"):f+'<div class="mbsc-np-btn mbsc-np-btn-empty"></div>':f+('<div tabindex="0" role="button" class="mbsc-np-btn mbsc-fr-btn-e" data-val="'+d+'">'+d+y._processItem(c,.2)+"</div>"),
e++;f+="</div>"}return f+"</div></div>"},y._markupReady=function(){m=y._markup,h()},y._attachEvents=function(b){b.on("keydown",function(b){D[b.keyCode]!==a?k(c('.mbsc-np-btn[data-val="'+D[b.keyCode]+'"]'),D[b.keyCode]):8==b.keyCode&&(b.preventDefault(),l())}),y.tap(c(".mbsc-np-btn",b),function(){var a=c(this);if(a.hasClass("mbsc-np-btn-custom")){var b=a.attr("data-val"),e=a.attr("data-var");if(!a.hasClass("mbsc-fr-btn-d")){if(e&&(a=e.split(":"),A.push(a[0]),B[a[0]]=a[1]),b.length+p<=t)for(a=0;a<b.length;++a)A.push("digit"),s.push(d(b[a])?+b[a]:b[a]);h(!0)}}else k(a,+a.attr("data-val"))}),y.tap(c(".mbsc-np-del",b),l)},y._processSettings=function(){q=y.settings,q.headerText=(q.headerText||"").replace("{value}",""),q.cssClass=(q.cssClass||"")+" mbsc-np",q.template=q.template.replace(/\\d/,"&#100;"),o=q.placeholder,v=(q.template.match(/d/g)||[]).length,n="mbsc-fr-btn-d "+(q.disabledClass||""),r=q.mask,u=y.trigger,r&&x.is("input")&&x.attr("type","password")},y._indexOf=function(a,b){var c;for(c=0;c<a.length;++c)if(a[c].toString()===b.toString())return c;return-1},g||y.init(e)},f.Numpad.prototype={_hasDef:!0,_hasTheme:!0,_hasLang:!0,_hasPreset:!0,_class:"numpad",_defaults:c.extend({},f.Frame.prototype._defaults,{template:"dd.dd",placeholder:"0",deleteIcon:"backspace",allowLeadingZero:!1,fill:"rtl",deleteText:"Delete",decimalSeparator:".",thousandsSeparator:",",validate:e,parseValue:e,formatValue:function(a,b,d){var e,f=1;e=d.settings;var d=e.placeholder,g=e.template,h=a.length,i=g.length,j="";for(e=0;i>e;e++)"d"==g[i-e-1]?(j=h>=f?a[h-f]+j:d+j,f++):j=g[i-e-1]+j;return c.each(b,function(a,b){j=j.replace("{"+a+"}",b)}),c("<div>"+j+"</div>").text()}})},b.themes.numpad=b.themes.frame,b.presetShort("numpad","Numpad",!1)}(),function(){var a=mobiscroll,b=a.$,c={min:0,max:99.99,scale:2,prefix:"",suffix:"",returnAffix:!1};a.presets.numpad.decimal=function(d){function e(a){var b;for(b=a.slice(0),a=0;b.length;)a=10*a+b.shift();for(b=0;b<h.scale;b++)a/=10;return a}function f(a){return e(a).toFixed(h.scale).replace(".",h.decimalSeparator).replace(/\B(?=(\d{3})+(?!\d))/g,h.thousandsSeparator)}var g=b.extend({},d.settings),h=b.extend(d.settings,c,g);return d.getVal=function(b){return b=d._getVal(b),a.util.isNumeric(b)?+b:b},{template:h.prefix.replace(/d/g,"\\d")+Array((Math.floor(h.max)+"").length+1).join("d")+(h.scale?"."+Array(h.scale+1).join("d"):"")+h.suffix.replace(/d/g,"\\d"),parseValue:function(a){var b,c;if(b=a||h.defaultValue,a=[],b&&(c=(b+"").match(/\d+\.?\d*/g)))for(c=(+c[0]).toFixed(h.scale),b=0;b<c.length;b++)"."!=c[b]&&(+c[b]?a.push(+c[b]):a.length&&a.push(0));return a},formatValue:function(a){return a=f(a),h.returnAffix?h.prefix+a+h.suffix:a},validate:function(a){var a=a.values,c=f(a),g=e(a),i=[];return!a.length&&!h.allowLeadingZero&&i.push(0),d.isVisible()&&b(".mbsc-np-dsp",d._markup).html(h.prefix+c+h.suffix),{disabled:i,invalid:g>h.max||g<h.min||(h.invalid?-1!=d._indexOf(h.invalid,g):!1)}}}}}(),function(){function a(a){for(var b=0,c=1,d=0;a.length;)b>3?c=3600:b>1&&(c=60),d+=a.pop()*c*(b%2?10:1),b++;return d}var b=mobiscroll,c=b.$,d=["h","m","s"],e={min:0,max:362439,defaultValue:0,hourTextShort:"h",minuteTextShort:"m",secTextShort:"s"};b.presets.numpad.timespan=function(f){function g(a){var b,e="",f=3600;return c(d).each(function(c,d){b=Math.floor(a/f),a-=b*f,f/=60,(b>0||"s"==d&&!e)&&(e=e+(e?" ":"")+b+j[d])}),e}var h=c.extend({},f.settings),i=c.extend(f.settings,e,h),j={h:i.hourTextShort.replace(/d/g,"\\d"),m:i.minuteTextShort.replace(/d/g,"\\d"),s:i.secTextShort.replace(/d/g,"\\d")},h='d<span class="mbsc-np-sup mbsc-np-time">'+j.s+"</span>";return 9<i.max&&(h="d"+h),99<i.max&&(h='<span class="mbsc-np-ts-m">'+(639<i.max?"d":"")+'d</span><span class="mbsc-np-sup mbsc-np-time">'+j.m+"</span>"+h),6039<i.max&&(h='<span class="mbsc-np-ts-h">'+(38439<i.max?"d":"")+'d</span><span class="mbsc-np-sup mbsc-np-time">'+j.h+"</span>"+h),f.setVal=function(a,c,d,e){return b.util.isNumeric(a)&&(a=g(a)),f._setVal(a,c,d,e)},f.getVal=function(b){return f._hasValue||b?a(f.getArrayVal(b)):null},{template:h,parseValue:function(a){var b,e=a||g(i.defaultValue),f=[];return e&&c(d).each(function(a,c){(b=RegExp("(\\d+)"+j[c],"gi").exec(e))?(b=+b[1],b>9?(f.push(Math.floor(b/10)),f.push(b%10)):(f.length&&f.push(0),(b||f.length)&&f.push(b))):f.length&&(f.push(0),f.push(0))}),f},formatValue:function(b){return g(a(b))},validate:function(b){var b=b.values,c=a(b.slice(0)),d=[];return b.length||d.push(0),{disabled:d,invalid:c>i.max||c<i.min||(i.invalid?-1!=f._indexOf(i.invalid,+c):!1)}}}}}(),function(){var a=mobiscroll,b=a.$,c={timeFormat:"hh:ii A",amText:"am",pmText:"pm"};a.presets.numpad.time=function(a){function d(a,c){var d,e="";for(d=0;d<a.length;++d)e+=a[d]+(d%2==(1==a.length%2?0:1)&&d!=a.length-1?":":"");return b.each(c,function(a,b){e+=" "+b}),e}var e=b.extend({},a.settings),f=b.extend(a.settings,c,e),g=f.timeFormat.split(":"),h=f.timeFormat.match(/a/i),i=h?"a"==h[0]?f.amText:f.amText.toUpperCase():"",j=h?"a"==h[0]?f.pmText:f.pmText.toUpperCase():"",k=0,l=f.min?""+f.min.getHours():"",m=f.max?""+f.max.getHours():"",n=f.min?""+(10>f.min.getMinutes()?"0"+f.min.getMinutes():f.min.getMinutes()):"",o=f.max?""+(10>f.max.getMinutes()?"0"+f.max.getMinutes():f.max.getMinutes()):"",p=f.min?""+(10>f.min.getSeconds()?"0"+f.min.getSeconds():f.min.getSeconds()):"",q=f.max?""+(10>f.max.getSeconds()?"0"+f.max.getSeconds():f.max.getSeconds()):"";return f.min&&f.min.setFullYear(2014,7,20),f.max&&f.max.setFullYear(2014,7,20),{placeholder:"-",allowLeadingZero:!0,template:(3==g.length?"dd:dd:dd":2==g.length?"dd:dd":"dd")+(h?'<span class="mbsc-np-sup">{ampm:--}</span>':""),leftKey:h?{text:i,variable:"ampm:"+i,value:"00"}:{text:":00",value:"00"},rightKey:h?{text:j,variable:"ampm:"+j,value:"00"}:{text:":30",value:"30"},parseValue:function(a){var b,c=a||f.defaultValue,d=[];if(c){if(c+="",b=c.match(/\d/g))for(a=0;a<b.length;a++)d.push(+b[a]);h&&d.push("ampm:"+(c.match(RegExp(f.pmText,"gi"))?j:i))}return d},formatValue:function(a,b){return d(a,b)},validate:function(b){var c,e,i,j,r,s,t=b.values,b=d(t,b.variables),u=3<=t.length?new Date(2014,7,20,""+t[0]+(0===t.length%2?t[1]:""),""+t[0===t.length%2?2:1]+t[0===t.length%2?3:2]):"",v=[];if(k=c=2*g.length,t.length||(h&&(v.push(0),v.push(f.leftKey.value)),v.push(f.rightKey.value)),!h&&(2>c-t.length||1!=t[0]&&(2<t[0]||3<t[1])&&2>=c-t.length)&&(v.push("30"),v.push("00")),(h?1<t[0]||2<t[1]:1!=t[0]&&(2<t[0]||3<t[1]))&&t[0]&&(t.unshift(0),k=c-1),t.length==c)for(c=0;9>=c;++c)v.push(c);else if(1==t.length&&h&&1==t[0]||t.length&&0===t.length%2||!h&&2==t[0]&&3<t[1]&&1==t.length%2)for(c=6;9>=c;++c)v.push(c);if(i=void 0!==t[1]?""+t[0]+t[1]:"",j=+o==+(void 0!==t[3]?""+t[2]+t[3]:0),f.invalid)for(c=0;c<f.invalid.length;++c)if(e=f.invalid[c].getHours(),r=f.invalid[c].getMinutes(),s=f.invalid[c].getSeconds(),e==+i){if(2==g.length&&(10>r?0:+(""+r)[0])==+t[2]){v.push(10>r?r:+(""+r)[1]);break}if((10>s?0:+(""+s)[0])==+t[4]){v.push(10>s?s:+(""+s)[1]);break}}if(f.min||f.max){if(e=+l==+i,r=(i=+m==+i)&&j,j=e&&j,0===t.length){for(c=h?2:l>19?l[0]:3;c<=(1==l[0]?9:l[0]-1);++c)v.push(c);if(l>=10&&(v.push(0),2==l[0]))for(c=3;9>=c;++c)v.push(c);if(m&&10>m||l&&l>=10)for(c=m&&10>m?+m[0]+1:0;c<(l&&l>=10?l[0]:10);++c)v.push(c)}if(1==t.length){if(0===t[0])for(c=0;c<l[0];++c)v.push(c);if(l&&0!==t[0]&&(h?1==t[0]:2==t[0]))for(c=h?3:4;9>=c;++c)v.push(c);if(t[0]==l[0])for(c=0;c<l[1];++c)v.push(c);if(t[0]==m[0]&&!h)for(c=+m[1]+1;9>=c;++c)v.push(c)}if(2==t.length&&(e||i))for(c=i?+o[0]+1:0;c<(e?+n[0]:10);++c)v.push(c);if(3==t.length&&(i&&t[2]==o[0]||e&&t[2]==n[0]))for(c=i&&t[2]==o[0]?+o[1]+1:0;c<(e&&t[2]==n[0]?+n[1]:10);++c)v.push(c);if(4==t.length&&(j||r))for(c=r?+q[0]+1:0;c<(j?+p[0]:10);++c)v.push(c);if(5==t.length&&(j&&t[4]==p[0]||r&&t[4]==q[0]))for(c=r&&t[4]==q[0]?+q[1]+1:0;c<(j&&t[4]==p[0]?+p[1]:10);++c)v.push(c)}return{disabled:v,length:k,invalid:!((h?RegExp("^(0?[1-9]|1[012])(:[0-5]\\d)?(:[0-5][0-9]) (?:"+f.amText+"|"+f.pmText+")$","i").test(b):/^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$/.test(b))&&(f.invalid?-1==a._indexOf(f.invalid,u):1)&&(f.min?f.min<=u:1)&&(f.max?u<=f.max:1))}}}}}(),function(){var a=mobiscroll,b=a.$,c={dateOrder:"mdy",dateFormat:"mm/dd/yy",delimiter:"/"};a.presets.numpad.date=function(d){function e(a){return new Date(+(""+a[f]+a[f+1]+a[f+2]+a[f+3]),+(""+a[g]+a[g+1])-1,+(""+a[h]+a[h+1]))}var f,g,h,i,j=[];i=b.extend({},d.settings);var k=b.extend(d.settings,a.util.datetime.defaults,c,i),l=k.dateOrder,m=k.min?""+(k.getMonth(k.min)+1):0,n=k.max?""+(k.getMonth(k.max)+1):0,o=k.min?""+k.getDay(k.min):0,p=k.max?""+k.getDay(k.max):0,q=k.min?""+k.getYear(k.min):0,r=k.max?""+k.getYear(k.max):0,l=l.replace(/y+/gi,"yyyy"),l=l.replace(/m+/gi,"mm"),l=l.replace(/d+/gi,"dd");for(f=l.toUpperCase().indexOf("Y"),g=l.toUpperCase().indexOf("M"),h=l.toUpperCase().indexOf("D"),l="",j.push({val:f,n:"yyyy"},{val:g,n:"mm"},{val:h,n:"dd"}),j.sort(function(a,b){return a.val-b.val}),b.each(j,function(a,b){l+=b.n}),f=l.indexOf("y"),g=l.indexOf("m"),h=l.indexOf("d"),l="",i=0;8>i;++i)l+="d",(i+1==f||i+1==g||i+1==h)&&(l+=k.delimiter);return d.getVal=function(a){return d._hasValue||a?e(d.getArrayVal(a)):null},{placeholder:"-",fill:"ltr",allowLeadingZero:!0,template:l,parseValue:function(b){var c,d=[];if(c=b||k.defaultValue,b=a.util.datetime.parseDate(k.dateFormat,c,k),c)for(c=0;c<j.length;++c)d=d.concat(/m/i.test(j[c].n)?((9>k.getMonth(b)?"0":"")+(k.getMonth(b)+1)).split(""):/d/i.test(j[c].n)?((10>k.getDay(b)?"0":"")+k.getDay(b)).split(""):(k.getYear(b)+"").split(""));return d},formatValue:function(b){return a.util.datetime.formatDate(k.dateFormat,e(b),k)},validate:function(a){var b,c,i,j,a=a.values,l=e(a),s=[],t=void 0!==a[f+3]?""+a[f]+a[f+1]+a[f+2]+a[f+3]:"",u=void 0!==a[g+1]?""+a[g]+a[g+1]:"",v=void 0!==a[h+1]?""+a[h]+a[h+1]:"",w=""+k.getMaxDayOfMonth(t||2012,u-1||0),x=q===t&&+m===+u,y=r===t&&+n===+u;if(k.invalid)for(b=0;b<k.invalid.length;++b){if(c=k.getYear(k.invalid[b]),i=k.getMonth(k.invalid[b]),j=k.getDay(k.invalid[b]),c==+t&&i+1==+u&&(10>j?0:+(""+j)[0])==+a[h]){s.push(10>j?j:+(""+j)[1]);break}if(i+1==+u&&j==+v&&(""+c).substring(0,3)==""+a[f]+a[f+1]+a[f+2]){s.push((""+c)[3]);break}if(c==+t&&j==+v&&(10>i?0:+(""+(i+1))[0])==+a[g]){s.push(10>i?i:+(""+(i+1))[1]);break}}if("31"!=v||a.length!=g&&a.length!=g+1||(1!=a[g]?s.push(2,4,6,9,11):s.push(1)),"30"==v&&0===a[g]&&a.length<=g+1&&s.push(2),a.length==g){for(b=r===t&&10>+n?1:2;9>=b;++b)s.push(b);q===t&&+m>=10&&s.push(0)}if(a.length==g+1){if(1==a[g]){for(b=r===t?+n[1]+1:3;9>=b;++b)s.push(b);if(q==t)for(b=0;b<+m[1];++b)s.push(b)}if(0===a[g]&&(s.push(0),r===t||q===t))for(b=r===t?+v>+p?+n:+n+1:0;(q===t?+m-1:9)>=b;++b)s.push(b)}if(a.length==h){for(b=y?(+p>10?+p[0]:0)+1:+w[0]+1;9>=b;++b)s.push(b);if(x)for(b=0;b<(10>+o?0:o[0]);++b)s.push(b)}if(a.length==h+1){if(3<=a[h]||"02"==u)for(b=+w[1]+1;9>=b;++b)s.push(b);if(y&&+p[0]==a[h])for(b=+p[1]+1;9>=b;++b)s.push(b);if(x&&o[0]==a[h])for(b=0;b<+o[1];++b)s.push(b);if(0===a[h]&&(s.push(0),y||x))for(b=y?+p+1:1;(x?+o-1:9)>=b;++b)s.push(b)}if(void 0!==a[f+2]&&"02"==u&&"29"==v)for(c=+(""+a[f]+a[f+1]+a[f+2]+0);c<=+(""+a[f]+a[f+1]+a[f+2]+9);++c)s.push(0===c%4&&0!==c%100||0===c%400?"":c%10);if(a.length==f){if(k.min)for(b=0;b<+q[0];++b)s.push(b);if(k.max)for(b=+r[0]+1;9>=b;++b)s.push(b);s.push(0)}if(k.min||k.max)for(c=1;4>c;++c)if(a.length==f+c){if(a[f+c-1]==+q[c-1]&&(3==c?a[f+c-2]==+q[c-2]:1))for(b=0;b<+q[c]+(3==c&&a[g+1]&&+m>+u?1:0);++b)s.push(b);if(a[f+c-1]==+r[c-1]&&(3==c?a[f+c-2]==+r[c-2]:1))for(b=+r[c]+(3==c&&+u>+n?0:1);9>=b;++b)s.push(b)}return{disabled:s,invalid:!("Invalid Date"!=l&&(k.min?k.min<=l:1)&&(k.max?l<=k.max:1)&&(k.invalid?-1==d._indexOf(k.invalid,l):1))}}}}}(),function(){function a(a,b,c,d,e,f,g){return a=new Date(a,b,c,d||0,e||0,f||0,g||0),23==a.getHours()&&0===(d||0)&&a.setHours(a.getHours()+2),a}var b=mobiscroll,c=b.$;b.util.datetime={defaults:{shortYearCutoff:"+10",monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),dayNamesMin:"S,M,T,W,T,F,S".split(","),amText:"am",pmText:"pm",getYear:function(a){return a.getFullYear()},getMonth:function(a){return a.getMonth()},getDay:function(a){return a.getDate()},getDate:a,getMaxDayOfMonth:function(a,b){return 32-new Date(a,b,32,12).getDate()},getWeekNumber:function(a){a=new Date(a),a.setHours(0,0,0),a.setDate(a.getDate()+4-(a.getDay()||7));var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+1)/7)}},adjustedDate:a,formatDate:function(a,d,e){if(!d)return null;var f,g,e=c.extend({},b.util.datetime.defaults,e),h=function(b){for(var c=0;f+1<a.length&&a.charAt(f+1)==b;)c++,f++;return c},i=function(a,b,c){if(b=""+b,h(a))for(;b.length<c;)b="0"+b;return b},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;for(f=0;f<a.length;f++)if(l)"'"!=a.charAt(f)||h("'")?k+=a.charAt(f):l=!1;else switch(a.charAt(f)){case"d":k+=i("d",e.getDay(d),2);break;case"D":k+=j("D",d.getDay(),e.dayNamesShort,e.dayNames);break;case"o":k+=i("o",(d.getTime()-new Date(d.getFullYear(),0,0).getTime())/864e5,3);break;case"m":k+=i("m",e.getMonth(d)+1,2);break;case"M":k+=j("M",e.getMonth(d),e.monthNamesShort,e.monthNames);break;case"y":g=e.getYear(d),k+=h("y")?g:(10>g%100?"0":"")+g%100;break;case"h":g=d.getHours(),k+=i("h",g>12?g-12:0===g?12:g,2);break;case"H":k+=i("H",d.getHours(),2);break;case"i":k+=i("i",d.getMinutes(),2);break;case"s":k+=i("s",d.getSeconds(),2);break;case"a":k+=11<d.getHours()?e.pmText:e.amText;break;case"A":k+=11<d.getHours()?e.pmText.toUpperCase():e.amText.toUpperCase();break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(f)}return k},parseDate:function(a,d,e){var e=c.extend({},b.util.datetime.defaults,e),f=e.defaultValue||new Date;if(!a||!d)return f;if(d.getTime)return d;var g,d="object"==typeof d?d.toString():d+"",h=e.shortYearCutoff,i=e.getYear(f),j=e.getMonth(f)+1,k=e.getDay(f),l=-1,m=f.getHours(),n=f.getMinutes(),o=0,p=-1,q=!1,r=function(b){return(b=g+1<a.length&&a.charAt(g+1)==b)&&g++,b},s=function(a){return r(a),(a=d.substr(u).match(RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a?4:"o"==a?3:2)+"}")))?(u+=a[0].length,parseInt(a[0],10)):0},t=function(a,b,c){for(a=r(a)?c:b,b=0;b<a.length;b++)if(d.substr(u,a[b].length).toLowerCase()==a[b].toLowerCase())return u+=a[b].length,b+1;return 0},u=0;for(g=0;g<a.length;g++)if(q)"'"!=a.charAt(g)||r("'")?u++:q=!1;else switch(a.charAt(g)){case"d":k=s("d");break;case"D":t("D",e.dayNamesShort,e.dayNames);break;case"o":l=s("o");break;case"m":j=s("m");break;case"M":j=t("M",e.monthNamesShort,e.monthNames);break;case"y":i=s("y");break;case"H":m=s("H");break;case"h":m=s("h");break;case"i":n=s("i");break;case"s":o=s("s");break;case"a":p=t("a",[e.amText,e.pmText],[e.amText,e.pmText])-1;break;case"A":p=t("A",[e.amText,e.pmText],[e.amText,e.pmText])-1;break;case"'":r("'")?u++:q=!0;break;default:u++}if(100>i&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(i<=("string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10))?0:-100)),l>-1)for(j=1,k=l;;){if(h=32-new Date(i,j-1,32,12).getDate(),h>=k)break;j++,k-=h}return m=e.getDate(i,j-1,k,-1==p?m:p&&12>m?m+12:p||12!=m?m:0,n,o),e.getYear(m)!=i||e.getMonth(m)+1!=j||e.getDay(m)!=k?f:m}}}(),function(a,b,c){var d=mobiscroll,e=d.$,f=d.presets.scroller,g=d.util,h=g.datetime.adjustedDate,i=g.jsPrefix,j=g.testTouch,k=g.getCoord,l={controls:["calendar"],firstDay:0,weekDays:"short",maxMonthWidth:170,months:1,preMonths:1,highlight:!0,outerMonthChange:!0,quickNav:!0,yearChange:!0,todayClass:"mbsc-cal-today",btnCalPrevClass:"mbsc-ic mbsc-ic-arrow-left6",btnCalNextClass:"mbsc-ic mbsc-ic-arrow-right6",dateText:"Date",timeText:"Time",calendarText:"Calendar",todayText:"Today",prevMonthText:"Previous Month",nextMonthText:"Next Month",prevYearText:"Previous Year",nextYearText:"Next Year"};f.calbase=function(a){function m(a){var c;Ea=e(this),Fa=!1,"keydown"!=a.type?(Ca=k(a,"X"),Da=k(a,"Y"),c=j(a,this)):c=32===a.keyCode,Ga||!c||Ea.hasClass("mbsc-fr-btn-d")||(Ga=!0,setTimeout(p,100),"mousedown"!=a.type)||e(b).on("mousemove",n).on("mouseup",o)}function n(a){(7<Math.abs(Ca-k(a,"X"))||7<Math.abs(Da-k(a,"Y")))&&(Ga=!1,Ea.removeClass("mbsc-fr-btn-a"))}function o(a){"touchend"==a.type&&a.preventDefault(),Fa||p(),Ga=!1,"mouseup"==a.type&&e(b).off("mousemove",n).off("mouseup",o)}function p(){Fa=!0,Ea.hasClass("mbsc-cal-prev-m")?G():Ea.hasClass("mbsc-cal-next-m")?F():Ea.hasClass("mbsc-cal-prev-y")?I(Ea):Ea.hasClass("mbsc-cal-next-y")&&H(Ea)}function q(a,b,c){var d,f,g,i,j={},k=hb+Ja;return a&&e.each(a,function(a,e){if(d=e.d||e.start||e,f=d+"",e.start&&e.end)for(i=new Date(e.start);i<=e.end;)g=h(i.getFullYear(),i.getMonth(),i.getDate()),j[g]=j[g]||[],j[g].push(e),i.setDate(i.getDate()+1);else if(d.getTime)g=h(d.getFullYear(),d.getMonth(),d.getDate()),j[g]=j[g]||[],j[g].push(e);else if(f.match(/w/i)){var l=+f.replace("w",""),m=0,n=Ya.getDate(b,c-hb-Ka,1).getDay();for(1<Ya.firstDay-n+1&&(m=7),P=0;5*Ia>P;P++)g=Ya.getDate(b,c-hb-Ka,7*P-m-n+1+l),j[g]=j[g]||[],j[g].push(e)}else if(f=f.split("/"),f[1])c+k>=11&&(g=Ya.getDate(b+1,f[0]-1,f[1]),j[g]=j[g]||[],j[g].push(e)),1>=c-k&&(g=Ya.getDate(b-1,f[0]-1,f[1]),j[g]=j[g]||[],j[g].push(e)),g=Ya.getDate(b,f[0]-1,f[1]),j[g]=j[g]||[],j[g].push(e);else for(P=0;Ia>P;P++)g=Ya.getDate(b,c-hb-Ka+P,f[0]),Ya.getDay(g)==f[0]&&(j[g]=j[g]||[],j[g].push(e))}),j}function r(b,c){ya=q(Ya.invalid,b,c),xa=q(Ya.valid,b,c),a.onGenMonth(b,c)}function s(a,b,c,d,e,f,g){var h='<div class="mbsc-cal-h mbsc-cal-sc-c mbsc-cal-'+a+"-c "+(Ya.calendarClass||"")+'"><div class="mbsc-cal-sc"><div class="mbsc-cal-sc-p"><div class="mbsc-cal-sc-tbl"><div class="mbsc-cal-sc-row">';for(O=1;b>=O;O++)h=12>=O||O>c?h+'<div class="mbsc-cal-sc-m-cell mbsc-cal-sc-cell mbsc-cal-sc-empty"><div class="mbsc-cal-sc-cell-i">&nbsp;</div></div>':h+('<div tabindex="0" role="button"'+(f?' aria-label="'+f[O-13]+'"':"")+' class="mbsc-fr-btn-e mbsc-fr-btn-nhl mbsc-cal-sc-m-cell mbsc-cal-sc-cell mbsc-cal-'+a+'-s" data-val='+(d+O-13)+'><div class="mbsc-cal-sc-cell-i mbsc-cal-sc-tbl"><div class="mbsc-cal-sc-cell">'+(g?g[O-13]:d+O-13+e)+"</div></div></div>"),b>O&&(0===O%12?h+='</div></div></div><div class="mbsc-cal-sc-p" style="'+(fb?"top":cb?"right":"left")+":"+100*Math.round(O/12)+'%"><div class="mbsc-cal-sc-tbl"><div class="mbsc-cal-sc-row">':0===O%3&&(h+='</div><div class="mbsc-cal-sc-row">'));return h+"</div></div></div></div></div>"}function t(b,d){var f,g,i,j,k,l,m,n,o,p,q,r,s,t,u=1,v=0;f=Ya.getDate(b,d,1);var w=Ya.getYear(f),x=Ya.getMonth(f),y=null!==Ya.defaultValue||a._hasValue?a.getDate(!0):null,z=Ya.getDate(w,x,1).getDay(),A='<div class="mbsc-cal-table">',B='<div class="mbsc-cal-week-nr-c">';for(1<Ya.firstDay-z+1&&(v=7),t=0;42>t;t++)s=t+Ya.firstDay-v,f=Ya.getDate(w,x,s-z+1),g=f.getFullYear(),i=f.getMonth(),j=f.getDate(),k=Ya.getMonth(f),l=Ya.getDay(f),r=Ya.getMaxDayOfMonth(g,i),m=g+"-"+i+"-"+j,i=e.extend({valid:f<h(qa.getFullYear(),qa.getMonth(),qa.getDate())||f>ra?!1:ya[f]===c||xa[f]!==c,selected:y&&y.getFullYear()===g&&y.getMonth()===i&&y.getDate()===j},a.getDayProps(f,y)),n=i.valid,o=i.selected,g=i.cssClass,p=new Date(f).setHours(12,0,0,0)===(new Date).setHours(12,0,0,0),q=k!==x,Va[m]=i,0===t%7&&(A+=(t?"</div>":"")+'<div class="mbsc-cal-row'+(Ya.highlight&&y&&y-f>=0&&6048e5>y-f?" mbsc-cal-week-hl":"")+'">'),$a&&1==f.getDay()&&("month"==$a&&q&&u>1?u=1==j?1:2:"year"==$a&&(u=Ya.getWeekNumber(f)),B+='<div class="mbsc-cal-week-nr"><div class="mbsc-cal-week-nr-i">'+u+"</div></div>",u++),A+='<div role="button" tabindex="-1" aria-label="'+(p?Ya.todayText+", ":"")+Ya.dayNames[f.getDay()]+", "+Ya.monthNames[k]+" "+l+" "+(i.ariaLabel?", "+i.ariaLabel:"")+'"'+(q&&!Ma?' aria-hidden="true"':"")+(o?' aria-selected="true"':"")+(n?"":' aria-disabled="true"')+' data-day="'+s%7+'" data-full="'+m+'"class="mbsc-cal-day '+(Ya.dayClass||"")+(o?" mbsc-cal-day-sel":"")+(p?" "+Ya.todayClass:"")+(g?" "+g:"")+(1==l?" mbsc-cal-day-first":"")+(l==r?" mbsc-cal-day-last":"")+(q?" mbsc-cal-day-diff":"")+(n?" mbsc-cal-day-v mbsc-fr-btn-e mbsc-fr-btn-nhl":" mbsc-cal-day-inv")+'"><div class="mbsc-cal-day-i '+(o?nb:"")+" "+(Ya.innerDayClass||"")+'"><div class="mbsc-cal-day-fg">'+l+a._processItem(e,.06)+"</div>"+(i.markup||"")+'<div class="mbsc-cal-day-frame"></div></div></div>';return A+("</div></div>"+B+"</div>")}function u(a,b,c){var d=Ya.getDate(a,b,1),f=Ya.getYear(d),d=Ya.getMonth(d),g=f+mb;if(gb){if(Oa&&Oa.removeClass("mbsc-cal-sc-sel").removeAttr("aria-selected").find(".mbsc-cal-sc-cell-i").removeClass(nb),Pa&&Pa.removeClass("mbsc-cal-sc-sel").removeAttr("aria-selected").find(".mbsc-cal-sc-cell-i").removeClass(nb),Oa=e('.mbsc-cal-year-s[data-val="'+f+'"]',S).addClass("mbsc-cal-sc-sel").attr("aria-selected","true"),Pa=e('.mbsc-cal-month-s[data-val="'+d+'"]',S).addClass("mbsc-cal-sc-sel").attr("aria-selected","true"),Oa.find(".mbsc-cal-sc-cell-i").addClass(nb),Pa.find(".mbsc-cal-sc-cell-i").addClass(nb),Na&&Na.scroll(Oa,c),e(".mbsc-cal-month-s",S).removeClass("mbsc-fr-btn-d"),f===ka)for(O=0;ma>O;O++)e('.mbsc-cal-month-s[data-val="'+O+'"]',S).addClass("mbsc-fr-btn-d");if(f===la)for(O=na+1;12>=O;O++)e('.mbsc-cal-month-s[data-val="'+O+'"]',S).addClass("mbsc-fr-btn-d")}for(1==ia.length&&ia.attr("aria-label",f).html(g),O=0;Ha>O;++O)d=Ya.getDate(a,b-Ka+O,1),f=Ya.getYear(d),d=Ya.getMonth(d),g=f+mb,e(ga[O]).attr("aria-label",Ya.monthNames[d]+(ib?"":" "+f)).html((!ib&&ha>ja?g+" ":"")+da[d]+(!ib&&ja>ha?" "+g:"")),1<ia.length&&e(ia[O]).html(g);Ya.getDate(a,b-Ka-1,1)<oa?w(e(".mbsc-cal-prev-m",S)):v(e(".mbsc-cal-prev-m",S)),Ya.getDate(a,b+Ha-Ka,1)>pa?w(e(".mbsc-cal-next-m",S)):v(e(".mbsc-cal-next-m",S)),Ya.getDate(a,b,1).getFullYear()<=oa.getFullYear()?w(e(".mbsc-cal-prev-y",S)):v(e(".mbsc-cal-prev-y",S)),Ya.getDate(a,b,1).getFullYear()>=pa.getFullYear()?w(e(".mbsc-cal-next-y",S)):v(e(".mbsc-cal-next-y",S))}function v(a){a.removeClass(qb).find(".mbsc-cal-btn-txt").removeAttr("aria-disabled")}function w(a){a.addClass(qb).find(".mbsc-cal-btn-txt").attr("aria-disabled","true")}function x(b,c){if(Z&&("calendar"===Aa||c)){var d,f,g=Ya.getDate(ta,ua,1),h=Math.abs(12*(Ya.getYear(b)-Ya.getYear(g))+Ya.getMonth(b)-Ya.getMonth(g));a.needsSlide&&h&&(ta=Ya.getYear(b),ua=Ya.getMonth(b),b>g?(f=h>hb-Ka+Ha-1,ua-=f?0:h-hb,d="next"):g>b&&(f=h>hb+Ka,ua+=f?0:h-hb,d="prev"),B(ta,ua,d,Math.min(h,hb),f,!0)),c||(sa=b,a.trigger("onDayHighlight",{date:b}),Ya.highlight&&(e(".mbsc-cal-day-sel .mbsc-cal-day-i",U).removeClass(nb),e(".mbsc-cal-day-sel",U).removeClass("mbsc-cal-day-sel").removeAttr("aria-selected"),e(".mbsc-cal-week-hl",U).removeClass("mbsc-cal-week-hl"),(null!==Ya.defaultValue||a._hasValue)&&e('.mbsc-cal-day[data-full="'+b.getFullYear()+"-"+b.getMonth()+"-"+b.getDate()+'"]',U).addClass("mbsc-cal-day-sel").attr("aria-selected","true").find(".mbsc-cal-day-i").addClass(nb).closest(".mbsc-cal-row").addClass("mbsc-cal-week-hl"))),a.needsSlide=!0}}function y(b,d,e){for(e||a.trigger("onMonthLoading",{year:b,month:d}),r(b,d),O=0;Ia>O;O++)Sa[O].html(t(b,d-Ka-hb+O));A(),La=c,a.trigger("onMonthLoaded",{year:b,month:d})}function z(a,b,c){var d=hb,f=hb;if(c){for(;f&&Ya.getDate(a,b+d+Ha-Ka-1,1)>pa;)f--;for(;d&&Ya.getDate(a,b-f-Ka,1)<oa;)d--}e.extend(ea.settings,{contSize:Ha*W,snap:W,minScroll:X-(cb?d:f)*W,maxScroll:X+(cb?f:d)*W}),ea.refresh()}function A(){$a&&aa.html(e(".mbsc-cal-week-nr-c",Sa[hb]).html()),e(".mbsc-cal-slide-a .mbsc-cal-day",V).attr("tabindex",0)}function B(b,d,f,g,h,i,j){if(b&&Ta.push({y:b,m:d,dir:f,slideNr:g,load:h,active:i,callback:j}),!Ba){var k=Ta.shift(),b=k.y,d=k.m,f="next"===k.dir,g=k.slideNr,h=k.load,i=k.active,j=k.callback||Wa,k=Ya.getDate(b,d,1),b=Ya.getYear(k),d=Ya.getMonth(k);if(Ba=!0,a.changing=!0,a.trigger("onMonthChange",{year:b,month:d}),a.trigger("onMonthLoading",{year:b,month:d}),r(b,d),h)for(O=0;Ha>O;O++)Sa[f?Ia-Ha+O:O].html(t(b,d-Ka+O));i&&Ra.addClass("mbsc-cal-slide-a"),setTimeout(function(){a.ariaMessage(Ya.monthNames[d]+" "+b),u(b,d,200),X=f?X-W*g*db:X+W*g*db,ea.scroll(X,ca?200:0,function(){setTimeout(function(){var i;if(Sa.length){if(Ra.removeClass("mbsc-cal-slide-a").attr("aria-hidden","true"),f)for(i=Sa.splice(0,g),O=0;g>O;O++)Sa.push(i[O]),D(Sa[Sa.length-1],+Sa[Sa.length-2].attr("data-curr")+100*db);else for(i=Sa.splice(Ia-g,g),O=g-1;O>=0;O--)Sa.unshift(i[O]),D(Sa[0],+Sa[1].attr("data-curr")-100*db);for(O=0;g>O;O++)Sa[f?Ia-g+O:O].html(t(b,d-Ka-hb+O+(f?Ia-g:0))),h&&Sa[f?O:Ia-g+O].html(t(b,d-Ka-hb+O+(f?0:Ia-g)));for(O=0;Ha>O;O++)Sa[hb+O].addClass("mbsc-cal-slide-a").removeAttr("aria-hidden");z(b,d,!0),Ba=!1}Ta.length?setTimeout(function(){B()},10):(ta=b,ua=d,a.changing=!1,e(".mbsc-cal-day",V).attr("tabindex",-1),A(),La!==c?y(b,d,La):a.trigger("onMonthLoaded",{year:b,month:d}),j())},ca?0:200)})},10)}}function C(){var b=e(this),c=a.live,d=a.getDate(!0),f=b.attr("data-full"),g=f.split("-"),g=h(g[0],g[1],g[2]),d=h(g.getFullYear(),g.getMonth(),g.getDate(),d.getHours(),d.getMinutes(),d.getSeconds()),i=b.hasClass("mbsc-cal-day-sel");!Ma&&b.hasClass("mbsc-cal-day-diff")||!1===a.trigger("onDayChange",e.extend(Va[f],{date:d,target:this,selected:i}))||(a.needsSlide=!1,Y=!0,a.setDate(d,c,.2,!c,!0),Ya.outerMonthChange&&(Ga=!0,g<Ya.getDate(ta,ua-Ka,1)?G():g>Ya.getDate(ta,ua-Ka+Ha,0)&&F(),Ga=!1))}function D(a,b){a.attr("data-curr",b),a[0].style[i+"Transform"]="translate3d("+(fb?"0,"+b+"%,":b+"%,0,")+"0)"}function E(b){a.isVisible()&&Z&&(a.changing?La=b:y(ta,ua,b))}function F(){Ga&&Ya.getDate(ta,ua+Ha-Ka,1)<=pa&&mobiscroll.running&&B(ta,++ua,"next",1,!1,!0,F)}function G(){Ga&&Ya.getDate(ta,ua-Ka-1,1)>=oa&&mobiscroll.running&&B(ta,--ua,"prev",1,!1,!0,G)}function H(a){Ga&&Ya.getDate(ta,ua,1)<=Ya.getDate(Ya.getYear(pa)-1,Ya.getMonth(pa)-Ja,1)&&mobiscroll.running?B(++ta,ua,"next",hb,!0,!0,function(){H(a)}):Ga&&!a.hasClass("mbsc-fr-btn-d")&&mobiscroll.running&&B(Ya.getYear(pa),Ya.getMonth(pa)-Ja,"next",hb,!0,!0)}function I(a){Ga&&Ya.getDate(ta,ua,1)>=Ya.getDate(Ya.getYear(oa)+1,Ya.getMonth(oa)+Ka,1)&&mobiscroll.running?B(--ta,ua,"prev",hb,!0,!0,function(){I(a)}):Ga&&!a.hasClass("mbsc-fr-btn-d")&&mobiscroll.running&&B(Ya.getYear(oa),Ya.getMonth(oa)+Ka,"prev",hb,!0,!0)}function J(b,c){b.hasClass("mbsc-cal-v")||(b.addClass("mbsc-cal-v"+(c?"":" mbsc-cal-p-in")).removeClass("mbsc-cal-p-out mbsc-cal-h"),a.trigger("onSelectShow"))}function K(a,b){a.hasClass("mbsc-cal-v")&&a.removeClass("mbsc-cal-v mbsc-cal-p-in").addClass("mbsc-cal-h"+(b?"":" mbsc-cal-p-out"))}function L(a,b){(b||a).hasClass("mbsc-cal-v")?K(a):J(a)}function M(){e(this).removeClass("mbsc-cal-p-out mbsc-cal-p-in")}var N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa=this,Ra=[],Sa=[],Ta=[],Ua={},Va={},Wa=function(){},Xa=e.extend({},a.settings),Ya=e.extend(a.settings,l,Xa),Za="full"==Ya.weekDays?"":"min"==Ya.weekDays?"Min":"Short",$a=Ya.weekCounter,_a=Ya.layout||(/top|bottom/.test(Ya.display)?"liquid":""),ab="liquid"==_a&&"bubble"!==Ya.display,bb="center"==Ya.display,cb=Ya.rtl,db=cb?-1:1,eb=ab?null:Ya.calendarWidth,fb="vertical"==Ya.calendarScroll,gb=Ya.quickNav,hb=Ya.preMonths,ib=Ya.yearChange,jb=Ya.controls.join(","),kb=(!0===Ya.tabs||!1!==Ya.tabs&&ab)&&1<Ya.controls.length,lb=!kb&&Ya.tabs===c&&!ab&&1<Ya.controls.length,mb=Ya.yearSuffix||"",nb=Ya.activeClass||"",ob="mbsc-cal-tab-sel "+(Ya.activeTabClass||""),pb=Ya.activeTabInnerClass||"",qb="mbsc-fr-btn-d "+(Ya.disabledClass||""),rb="",sb="";return jb.match(/calendar/)?Z=!0:gb=!1,jb.match(/date/)&&(Ua.date=1),jb.match(/time/)&&(Ua.time=1),Z&&Ua.date&&(kb=!0,lb=!1),Ya.layout=_a,Ya.preset=(Ua.date||Z?"date":"")+(Ua.time?"time":""),"inline"==Ya.display&&e(this).closest('[data-role="page"]').on("pageshow",function(){a.position()}),a.changing=!1,a.needsSlide=!0,a.getDayProps=Wa,a.onGenMonth=Wa,a.prepareObj=q,a.refresh=function(){E(!1)},a.redraw=function(){E(!0)},a.navigate=function(b,c){var d,e,f=a.isVisible();c&&f?x(b,!0):(d=Ya.getYear(b),e=Ya.getMonth(b),!f||d==ta&&e==ua||(a.trigger("onMonthChange",{year:d,month:e}),u(d,e),y(d,e),z(b.getFullYear(),b.getMonth(),!0)),ta=d,ua=e)},a.showMonthView=function(){gb&&!ca&&(K(sb,!0),K(rb,!0),J(ba,!0),ca=!0)},a.changeTab=function(b){a._isVisible&&Ua[b]&&Aa!=b&&(Aa=b,e(".mbsc-cal-pnl",S).removeClass("mbsc-cal-p-in").addClass("mbsc-cal-pnl-h"),e(".mbsc-cal-tab",S).removeClass(ob).removeAttr("aria-selected").find(".mbsc-cal-tab-i").removeClass(pb),e('.mbsc-cal-tab[data-control="'+b+'"]',S).addClass(ob).attr("aria-selected","true").find(".mbsc-cal-tab-i").addClass(pb),Ua[Aa].removeClass("mbsc-cal-pnl-h").addClass("mbsc-cal-p-in"),"calendar"==Aa&&(N=a.getDate(!0),(N.getFullYear()!==sa.getFullYear()||N.getMonth()!==sa.getMonth()||N.getDate()!==sa.getDate())&&x(N)),a.showMonthView(),a.trigger("onTabChange",{tab:Aa}))},Q=f.datetime.call(this,a),ha=Ya.dateFormat.search(/m/i),ja=Ya.dateFormat.search(/y/i),e.extend(Q,{ariaMessage:Ya.calendarText,onMarkupReady:function(b){var f,i="";if(S=e(b.target),T="inline"==Ya.display?e(this).is("div")?e(this):e(this).parent():a._window,sa=a.getDate(!0),ta||(ta=Ya.getYear(sa),ua=Ya.getMonth(sa)),X=0,_=!0,Ba=!1,da=Ya.monthNames,Aa="calendar",Ya.min?(oa=h(Ya.min.getFullYear(),Ya.min.getMonth(),1),qa=Ya.min):qa=oa=h(Ya.startYear,0,1),Ya.max?(pa=h(Ya.max.getFullYear(),Ya.max.getMonth(),1),ra=Ya.max):ra=pa=h(Ya.endYear,11,31,23,59,59),S.addClass("mbsc-calendar"),R=e(".mbsc-fr-popup",S),za=e(".mbsc-fr-c",S),Ua.date?Ua.date=e(".mbsc-sc-whl-gr-c",S).eq(0):Z&&e(".mbsc-sc-whl-gr-c",S).eq(0).addClass("mbsc-cal-hdn"),Ua.time&&(Ua.time=e(".mbsc-sc-whl-gr-c",S).eq(1)),Z){for(Ha="auto"==Ya.months?Math.max(1,Math.min(3,Math.floor((eb||T[0].innerWidth||T.innerWidth())/280))):Ya.months,Ia=Ha+2*hb,Ja=Math.floor(Ha/2),Ka=Math.round(Ha/2)-1,Ma=Ya.showOuterDays===c?2>Ha:Ya.showOuterDays,fb=fb&&2>Ha,b='<div class="mbsc-cal-btnw"><div class="'+(cb?"mbsc-cal-next-m":"mbsc-cal-prev-m")+' mbsc-cal-prev mbsc-cal-btn mbsc-fr-btn mbsc-fr-btn-e"><div role="button" tabindex="0" class="mbsc-cal-btn-txt '+(Ya.btnCalPrevClass||"")+'" aria-label="'+Ya.prevMonthText+'"></div></div>',O=0;Ha>O;++O)b+='<div class="mbsc-cal-btnw-m" style="width: '+100/Ha+'%"><span role="button" class="mbsc-cal-month"></span></div>';for(b+='<div class="'+(cb?"mbsc-cal-prev-m":"mbsc-cal-next-m")+' mbsc-cal-next mbsc-cal-btn mbsc-fr-btn mbsc-fr-btn-e"><div role="button" tabindex="0" class="mbsc-cal-btn-txt '+(Ya.btnCalNextClass||"")+'" aria-label="'+Ya.nextMonthText+'"></div></div></div>',ib&&(i='<div class="mbsc-cal-btnw"><div class="'+(cb?"mbsc-cal-next-y":"mbsc-cal-prev-y")+' mbsc-cal-prev mbsc-cal-btn mbsc-fr-btn mbsc-fr-btn-e"><div role="button" tabindex="0" class="mbsc-cal-btn-txt '+(Ya.btnCalPrevClass||"")+'" aria-label="'+Ya.prevYearText+'"></div></div><span role="button" class="mbsc-cal-year"></span><div class="'+(cb?"mbsc-cal-prev-y":"mbsc-cal-next-y")+' mbsc-cal-next mbsc-cal-btn mbsc-fr-btn mbsc-fr-btn-e"><div role="button" tabindex="0" class="mbsc-cal-btn-txt '+(Ya.btnCalNextClass||"")+'" aria-label="'+Ya.nextYearText+'"></div></div></div>'),gb&&(ka=Ya.getYear(oa),la=Ya.getYear(pa),ma=Ya.getMonth(oa),na=Ya.getMonth(pa),wa=Math.ceil((la-ka+1)/12)+2,rb=s("month",36,24,0,"",Ya.monthNames,Ya.monthNamesShort),sb=s("year",12*wa,la-ka+13,ka,mb)),$='<div class="mbsc-w-p mbsc-cal-c"><div class="mbsc-cal mbsc-cal-hl-now'+(Ha>1?" mbsc-cal-multi ":"")+($a?" mbsc-cal-weeks ":"")+(fb?" mbsc-cal-vertical":"")+(Ma?"":" mbsc-cal-hide-diff ")+(Ya.calendarClass||"")+'"><div class="mbsc-cal-header"><div class="mbsc-cal-btnc '+(ib?"mbsc-cal-btnc-ym":"mbsc-cal-btnc-m")+'">'+(ha>ja||Ha>1?i+b:b+i)+'</div></div><div class="mbsc-cal-body"><div class="mbsc-cal-m-c mbsc-cal-v"><div class="mbsc-cal-days-c">',P=0;Ha>P;++P){for($+='<div aria-hidden="true" class="mbsc-cal-days" style="width: '+100/Ha+'%"><table cellpadding="0" cellspacing="0"><tr>',O=0;7>O;O++)$+="<th>"+Ya["dayNames"+Za][(O+Ya.firstDay)%7]+"</th>";$+="</tr></table></div>"}for($+='</div><div class="mbsc-cal-anim-c '+(Ya.calendarClass||"")+'"><div class="mbsc-cal-week-nrs-c '+(Ya.weekNrClass||"")+'"><div class="mbsc-cal-week-nrs"></div></div><div class="mbsc-cal-anim">',
O=0;Ha+2*hb>O;O++)$+='<div class="mbsc-cal-slide" aria-hidden="true"></div>';$+="</div></div></div>"+rb+sb+"</div></div></div>",Ua.calendar=e($)}if(e.each(Ya.controls,function(a,b){Ua[b]=e('<div class="mbsc-cal-pnl" id="'+(Qa.id+"_dw_pnl_"+a)+'"></div>').append(e('<div class="mbsc-cal-pnl-i"></div>').append(Ua[b])).appendTo(za)}),f='<div class="mbsc-cal-tabs"><ul role="tablist">',e.each(Ya.controls,function(a,b){Ua[b]&&(f+='<li role="tab" aria-controls="'+(Qa.id+"_dw_pnl_"+a)+'" class="mbsc-cal-tab '+(a?"":ob)+'" data-control="'+b+'"><a href="#" class="mbsc-fr-btn-e mbsc-fr-btn-nhl mbsc-cal-tab-i '+(a?"":pb)+'">'+Ya[b+"Text"]+"</a></li>")}),f+="</ul></div>",za.before(f),U=e(".mbsc-cal-anim-c",S),V=e(".mbsc-cal-anim",U),aa=e(".mbsc-cal-week-nrs",U),Z){for(ca=!0,Ra=e(".mbsc-cal-slide",V).each(function(a,b){Sa.push(e(b))}),Ra.slice(hb,hb+Ha).addClass("mbsc-cal-slide-a").removeAttr("aria-hidden"),O=0;Ia>O;O++)D(Sa[O],100*(O-hb)*db);y(ta,ua),ea=new d.classes.ScrollView(U[0],{axis:fb?"Y":"X",easing:"",contSize:0,snap:1,maxSnapScroll:hb,moveElement:V,mousewheel:Ya.mousewheel,time:200,lock:!0,stopProp:!1,onGestureStart:function(b,c){c.settings.scrollLock=a.scrollLock},onAnimationEnd:function(a){(a=Math.round(((fb?a.posY:a.posX)-X)/W)*db)&&B(ta,ua-a,a>0?"prev":"next",a>0?a:-a)}})}ga=e(".mbsc-cal-month",S),ia=e(".mbsc-cal-year",S),ba=e(".mbsc-cal-m-c",S),gb&&(ba.on("webkitAnimationEnd animationend",M),rb=e(".mbsc-cal-month-c",S).on("webkitAnimationEnd animationend",M),sb=e(".mbsc-cal-year-c",S).on("webkitAnimationEnd animationend",M),e(".mbsc-cal-sc-p",S),va={axis:fb?"Y":"X",contSize:0,snap:1,maxSnapScroll:1,rtl:Ya.rtl,mousewheel:Ya.mousewheel,time:200},Na=new d.classes.ScrollView(sb[0],va),fa=new d.classes.ScrollView(rb[0],va)),ab?S.addClass("mbsc-cal-liq"):e(".mbsc-cal",S).width(eb||280*Ha),Ya.calendarHeight&&e(".mbsc-cal-anim-c",S).height(Ya.calendarHeight),a.tap(U,function(a){a=e(a.target),Ba||ea.scrolled||Ya.readonly===!0||(a=a.closest(".mbsc-cal-day",this),a.hasClass("mbsc-cal-day-v")&&C.call(a[0]))}),e(".mbsc-cal-btn",S).on("touchstart mousedown keydown",m).on("touchmove",n).on("touchend touchcancel keyup",o),e(".mbsc-cal-tab",S).on("touchstart click",function(b){j(b,this)&&mobiscroll.running&&a.changeTab(e(this).attr("data-control"))}),gb&&(a.tap(e(".mbsc-cal-month",S),function(){sb.hasClass("mbsc-cal-v")||(L(ba),ca=ba.hasClass("mbsc-cal-v")),L(rb),K(sb)}),a.tap(e(".mbsc-cal-year",S),function(){sb.hasClass("mbsc-cal-v")||Na.scroll(Oa),rb.hasClass("mbsc-cal-v")||(L(ba),ca=ba.hasClass("mbsc-cal-v")),L(sb),K(rb)}),a.tap(e(".mbsc-cal-month-s",S),function(){!fa.scrolled&&!e(this).hasClass("mbsc-fr-btn-d")&&a.navigate(Ya.getDate(ta,e(this).attr("data-val"),1))}),a.tap(e(".mbsc-cal-year-s",S),function(){Na.scrolled||(N=Ya.getDate(e(this).attr("data-val"),ua,1),a.navigate(new Date(g.constrain(N,oa,pa))))}),a.tap(sb,function(){Na.scrolled||(K(sb),J(ba),ca=!0)}),a.tap(rb,function(){fa.scrolled||(K(rb),J(ba),ca=!0)}))},onShow:function(){Z&&u(ta,ua)},onPosition:function(b){var c,d,f,g=0,h=0,i=0,j=b.windowHeight;if(ab&&(bb&&U.height(""),za.height(""),V.width("")),W&&(f=W),(W=Math.round(Math.round(parseInt(U.css(fb?"height":"width")))/Ha))&&(S.removeClass("mbsc-cal-m mbsc-cal-l"),W>1024?S.addClass("mbsc-cal-l"):W>640&&S.addClass("mbsc-cal-m")),(kb&&(_||ab)||lb)&&(e(".mbsc-cal-pnl",S).removeClass("mbsc-cal-pnl-h"),e.each(Ua,function(a,b){c=b.outerWidth(),g=Math.max(g,c),h=Math.max(h,b.outerHeight()),i+=c}),kb||lb&&i>(T[0].innerWidth||T.innerWidth())?(d=!0,Aa=e(".mbsc-cal-tabs .mbsc-cal-tab-sel",S).attr("data-control"),R.addClass("mbsc-cal-tabbed")):(Aa="calendar",h=g="",R.removeClass("mbsc-cal-tabbed"),za.css({width:"",height:""}))),ab&&bb&&(a._isFullScreen=!0,d&&Z&&za.height(Ua.calendar.outerHeight()),b=R.outerHeight(),j>=b&&U.height(j-b+U.outerHeight()),Z&&(h=Math.max(h,Ua.calendar.outerHeight()))),d&&(za.css({width:ab?"":g,height:h}),W=Math.round(Math.round(parseInt(U.css(fb?"height":"width")))/Ha)),W){if(V[fb?"height":"width"](W),W!==f){if(ib)for(da=Ya.maxMonthWidth>e(".mbsc-cal-btnw-m",S).width()?Ya.monthNamesShort:Ya.monthNames,O=0;Ha>O;++O)e(ga[O]).text(da[Ya.getMonth(Ya.getDate(ta,ua-Ka+O,1))]);gb&&(b=sb[fb?"height":"width"](),e.extend(Na.settings,{contSize:b,snap:b,minScroll:(2-wa)*b,maxScroll:-b}),e.extend(fa.settings,{contSize:b,snap:b,minScroll:-b,maxScroll:-b}),Na.refresh(),fa.refresh(),sb.hasClass("mbsc-cal-v")&&Na.scroll(Oa)),ab&&!_&&f&&(b=X/f,X=b*W),z(ta,ua,!f)}}else W=f;d&&(e(".mbsc-cal-pnl",S).addClass("mbsc-cal-pnl-h"),Ua[Aa].removeClass("mbsc-cal-pnl-h")),a.trigger("onCalResize"),_=!1},onHide:function(){Ta=[],Sa=[],ua=ta=Aa=null,Ba=!0,W=0,ea&&ea.destroy(),gb&&Na&&fa&&(Na.destroy(),fa.destroy())},onValidated:function(b){var c,d,e;if(d=a.getDate(!0),Y)c="calendar";else for(e in a.order)e&&a.order[e]===b&&(c=/[mdy]/.test(e)?"date":"time");a.trigger("onSetDate",{date:d,control:c}),x(d),Y=!1}}),Q}}(window,document),function(a){var b=mobiscroll,c=b.$,d=b.util.datetime,e=d.adjustedDate,f=new Date,g={startYear:f.getFullYear()-100,endYear:f.getFullYear()+1,separator:" ",dateFormat:"mm/dd/yy",dateDisplay:"MMddyy",timeFormat:"hh:ii A",dayText:"Day",monthText:"Month",yearText:"Year",hourText:"Hours",minuteText:"Minutes",ampmText:"&nbsp;",secText:"Seconds",nowText:"Now"},h=function(f){function h(b,c,d){return J[c]!==a?+b[J[c]]:K[c]!==a?K[c]:d!==a?d:L[c](V)}function i(a){return{value:a,display:(P.match(/yy/i)?a:(a+"").substr(2,2))+(F.yearSuffix||"")}}function j(a){return a}function k(a,b,c,d,e,f,g){b.push({data:d,label:c,min:f,max:g,getIndex:e,cssClass:a})}function l(a,b,c,d){return Math.min(d,Math.floor(a/b)*b+c)}function m(a){if(null===a)return a;var b=h(a,"y"),c=h(a,"m"),d=Math.min(h(a,"d"),F.getMaxDayOfMonth(b,c)),e=h(a,"h",0);return F.getDate(b,c,d,h(a,"a",0)?e+12:e,h(a,"i",0),h(a,"s",0),h(a,"u",0))}function n(a,b){var c,d,e=!1,f=!1,g=0,h=0;if(Z=m(s(Z)),$=m(s($)),o(a))return a;if(Z>a&&(a=Z),a>$&&(a=$),d=c=a,2!==b)for(e=o(c);!e&&$>c;)c=new Date(c.getTime()+864e5),e=o(c),g++;if(1!==b)for(f=o(d);!f&&d>Z;)d=new Date(d.getTime()-864e5),f=o(d),h++;return 1===b&&e?c:2===b&&f?d:g>=h&&f?d:c}function o(a){return Z>a||a>$?!1:p(a,N)?!0:p(a,M)?!1:!0}function p(a,b){var c,d,e;if(b)for(d=0;d<b.length;d++)if(c=b[d],e=c+"",!c.start)if(c.getTime){if(a.getFullYear()==c.getFullYear()&&a.getMonth()==c.getMonth()&&a.getDate()==c.getDate())return!0}else if(e.match(/w/i)){if(e=+e.replace("w",""),e==a.getDay())return!0}else if(e=e.split("/"),e[1]){if(e[0]-1==a.getMonth()&&e[1]==a.getDate())return!0}else if(e[0]==a.getDate())return!0;return!1}function q(a,b,c,d,e,f,g){var h,i,j;if(a)for(h=0;h<a.length;h++)if(i=a[h],j=i+"",!i.start)if(i.getTime)F.getYear(i)==b&&F.getMonth(i)==c&&(f[F.getDay(i)]=g);else if(j.match(/w/i))for(j=+j.replace("w",""),z=j-d;e>z;z+=7)z>=0&&(f[z+1]=g);else j=j.split("/"),j[1]?j[0]-1==c&&(f[j[1]]=g):f[j[0]]=g}function r(b,d,e,f,g,h,i,j,k){var m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,E,G,I={},J={h:W,i:X,s:Y,a:1},K=F.getDate(g,h,i),L=["a","h","i","s"];b&&(c.each(b,function(a,b){b.start&&(b.apply=!1,m=b.d,n=m+"",o=n.split("/"),m&&(m.getTime&&g==F.getYear(m)&&h==F.getMonth(m)&&i==F.getDay(m)||!n.match(/w/i)&&(o[1]&&i==o[1]&&h==o[0]-1||!o[1]&&i==o[0])||n.match(/w/i)&&K.getDay()==+n.replace("w","")))&&(b.apply=!0,I[K]=!0)}),c.each(b,function(b,c){if(z=y=0,w=C[e],x=D[e],s=r=!0,A=!1,c.start&&(c.apply||!c.d&&!I[K])){for(p=c.start.split(":"),q=c.end.split(":"),v=0;3>v;v++)p[v]===a&&(p[v]=0),q[v]===a&&(q[v]=59),p[v]=+p[v],q[v]=+q[v];for(p.unshift(11<p[0]?1:0),q.unshift(11<q[0]?1:0),T&&(12<=p[1]&&(p[1]-=12),12<=q[1]&&(q[1]-=12)),v=0;d>v;v++)H[v]!==a&&(t=l(p[v],J[L[v]],C[L[v]],D[L[v]]),u=l(q[v],J[L[v]],C[L[v]],D[L[v]]),G=E=B=0,T&&1==v&&(B=p[0]?12:0,E=q[0]?12:0,G=H[0]?12:0),r||(t=0),s||(u=D[L[v]]),(r||s)&&t+B<H[v]+G&&H[v]+G<u+E&&(A=!0),H[v]!=t&&(r=!1),H[v]!=u&&(s=!1));if(!k)for(v=d+1;4>v;v++)0<p[v]&&(y=J[e]),q[v]<D[L[v]]&&(z=J[e]);if(A||(t=l(p[d],J[e],C[e],D[e])+y,u=l(q[d],J[e],C[e],D[e])-z,r&&(w=t),s&&(x=u+1)),r||s||A)for(v=w;x>v;v++)j[v]=!k}}))}function s(b,d){var e=[];return null===b||b===a?b:(c.each("y,m,d,a,h,i,s,u".split(","),function(c,f){J[f]!==a&&(e[J[f]]=L[f](b)),d&&(K[f]=L[f](b))}),e)}function t(a){var b,c,d,f=[];if(a){for(b=0;b<a.length;b++)if(c=a[b],c.start&&c.start.getTime)for(d=new Date(c.start);d<=c.end;)f.push(e(d.getFullYear(),d.getMonth(),d.getDate())),d.setDate(d.getDate()+1);else f.push(c);return f}return a}var u,v=c(this),w={};if(v.is("input")){switch(v.attr("type")){case"date":u="yy-mm-dd";break;case"datetime":u="yy-mm-ddTHH:ii:ssZ";break;case"datetime-local":u="yy-mm-ddTHH:ii:ss";break;case"month":u="yy-mm",w.dateOrder="mmyy";break;case"time":u="HH:ii:ss"}var x=v.attr("min"),v=v.attr("max");x&&(w.minDate=d.parseDate(u,x)),v&&(w.maxDate=d.parseDate(u,v))}var y,z,A,B,C,D,E,x=c.extend({},f.settings),F=c.extend(f.settings,b.util.datetime.defaults,g,w,x),G=0,H=[],w=[],I=[],J={},K={},L={y:function(a){return F.getYear(a)},m:function(a){return F.getMonth(a)},d:function(a){return F.getDay(a)},h:function(a){return a=a.getHours(),a=T&&a>=12?a-12:a,l(a,W,_,ca)},i:function(a){return l(a.getMinutes(),X,aa,da)},s:function(a){return l(a.getSeconds(),Y,ba,ea)},u:function(a){return a.getMilliseconds()},a:function(a){return S&&11<a.getHours()?1:0}},M=F.invalid,N=F.valid,x=F.preset,O=F.dateWheels||F.dateFormat,P=F.dateWheels||F.dateDisplay,Q=F.timeWheels||F.timeFormat,R=P.match(/D/),S=Q.match(/a/i),T=Q.match(/h/),U="datetime"==x?F.dateFormat+F.separator+F.timeFormat:"time"==x?F.timeFormat:F.dateFormat,V=new Date,v=F.steps||{},W=v.hour||F.stepHour||1,X=v.minute||F.stepMinute||1,Y=v.second||F.stepSecond||1,v=v.zeroBased,Z=F.min||e(F.startYear,0,1),$=F.max||e(F.endYear,11,31,23,59,59),_=v?0:Z.getHours()%W,aa=v?0:Z.getMinutes()%X,ba=v?0:Z.getSeconds()%Y,ca=Math.floor(((T?11:23)-_)/W)*W+_,da=Math.floor((59-aa)/X)*X+aa,ea=Math.floor((59-aa)/X)*X+aa;if(u=u||U,x.match(/date/i)){for(c.each(["y","m","d"],function(a,b){y=O.search(RegExp(b,"i")),y>-1&&I.push({o:y,v:b})}),I.sort(function(a,b){return a.o>b.o?1:-1}),c.each(I,function(a,b){J[b.v]=a}),v=[],z=0;3>z;z++)if(z==J.y)G++,k("mbsc-dt-whl-y",v,F.yearText,i,j,F.getYear(Z),F.getYear($));else if(z==J.m){for(G++,A=[],y=0;12>y;y++)E=P.replace(/[dy]/gi,"").replace(/mm/,(9>y?"0"+(y+1):y+1)+(F.monthSuffix||"")).replace(/m/,y+1+(F.monthSuffix||"")),A.push({value:y,display:E.match(/MM/)?E.replace(/MM/,'<span class="mbsc-dt-month">'+F.monthNames[y]+"</span>"):E.replace(/M/,'<span class="mbsc-dt-month">'+F.monthNamesShort[y]+"</span>")});k("mbsc-dt-whl-m",v,F.monthText,A)}else if(z==J.d){for(G++,A=[],y=1;32>y;y++)A.push({value:y,display:(P.match(/dd/i)&&10>y?"0"+y:y)+(F.daySuffix||"")});k("mbsc-dt-whl-d",v,F.dayText,A)}w.push(v)}if(x.match(/time/i)){for(B=!0,I=[],c.each(["h","i","s","a"],function(a,b){a=Q.search(RegExp(b,"i")),a>-1&&I.push({o:a,v:b})}),I.sort(function(a,b){return a.o>b.o?1:-1}),c.each(I,function(a,b){J[b.v]=G+a}),v=[],z=G;G+4>z;z++)if(z==J.h){for(G++,A=[],y=_;(T?12:24)>y;y+=W)A.push({value:y,display:T&&0===y?12:Q.match(/hh/i)&&10>y?"0"+y:y});k("mbsc-dt-whl-h",v,F.hourText,A)}else if(z==J.i){for(G++,A=[],y=aa;60>y;y+=X)A.push({value:y,display:Q.match(/ii/)&&10>y?"0"+y:y});k("mbsc-dt-whl-i",v,F.minuteText,A)}else if(z==J.s){for(G++,A=[],y=ba;60>y;y+=Y)A.push({value:y,display:Q.match(/ss/)&&10>y?"0"+y:y});k("mbsc-dt-whl-s",v,F.secText,A)}else z==J.a&&(G++,x=Q.match(/A/),k("mbsc-dt-whl-a",v,F.ampmText,x?[{value:0,display:F.amText.toUpperCase()},{value:1,display:F.pmText.toUpperCase()}]:[{value:0,display:F.amText},{value:1,display:F.pmText}]));w.push(v)}return f.getVal=function(a){return f._hasValue||a?m(f.getArrayVal(a)):null},f.setDate=function(a,b,c,d,e){f.setArrayVal(s(a),b,e,d,c)},f.getDate=f.getVal,f.format=U,f.order=J,f.handlers.now=function(){f.setDate(new Date,f.live,200,!0,!0)},f.buttons.now={text:F.nowText,handler:"now"},M=t(M),N=t(N),C={y:Z.getFullYear(),m:0,d:1,h:_,i:aa,s:ba,a:0},D={y:$.getFullYear(),m:11,d:31,h:ca,i:da,s:ea,a:1},{compClass:"mbsc-dt",wheels:w,headerText:F.headerText?function(){return d.formatDate(U,m(f.getArrayVal(!0)),F)}:!1,formatValue:function(a){return d.formatDate(u,m(a),F)},parseValue:function(a){return a||(K={}),s(a?d.parseDate(u,a,F):F.defaultValue&&F.defaultValue.getTime?F.defaultValue:new Date,!!a&&!!a.getTime)},validate:function(b){var d,e,g,i;d=b.index;var j=b.direction,k=f.settings.wheels[0][J.d],b=n(m(b.values),j),l=s(b),o=[],b={},p=h(l,"y"),t=h(l,"m"),u=F.getMaxDayOfMonth(p,t),v=!0,w=!0;if(c.each("y,m,d,a,h,i,s".split(","),function(b,d){if(J[d]!==a){var f=C[d],g=D[d],i=h(l,d);if(o[J[d]]=[],v&&Z&&(f=L[d](Z)),w&&$&&(g=L[d]($)),"y"!=d)for(e=C[d];e<=D[d];e++)(f>e||e>g)&&o[J[d]].push(e);f>i&&(i=f),i>g&&(i=g),v&&(v=i==f),w&&(w=i==g),"d"==d&&(f=F.getDate(p,t,1).getDay(),g={},q(M,p,t,f,u,g,1),q(N,p,t,f,u,g,0),c.each(g,function(a,b){b&&o[J[d]].push(a)}))}}),B&&c.each(["a","h","i","s"],function(b,d){var e=h(l,d),g=h(l,"d"),i={};J[d]!==a&&(o[J[d]]=[],r(M,b,d,l,p,t,g,i,0),r(N,b,d,l,p,t,g,i,1),c.each(i,function(a,b){b&&o[J[d]].push(a)}),H[b]=f.getValidValue(J[d],e,j,i))}),k&&(k._length!==u||R&&(d===a||d===J.y||d===J.m))){for(b[J.d]=k,k.data=[],d=1;u>=d;d++)i=F.getDate(p,t,d).getDay(),g=P.replace(/[my]/gi,"").replace(/dd/,(10>d?"0"+d:d)+(F.daySuffix||"")).replace(/d/,d+(F.daySuffix||"")),k.data.push({value:d,display:g.match(/DD/)?g.replace(/DD/,'<span class="mbsc-dt-day">'+F.dayNames[i]+"</span>"):g.replace(/D/,'<span class="mbsc-dt-day">'+F.dayNamesShort[i]+"</span>")});f._tempWheelArray[J.d]=l[J.d],f.changeWheel(b)}return{disabled:o,valid:l}}}};c.each(["date","time","datetime"],function(a,c){b.presets.scroller[c]=h})}(),function(a){var b=mobiscroll,c=b.$,d={invalid:[],showInput:!0,inputClass:""};b.presets.scroller.list=function(b){function e(b,c,d){var e,h,i=0,j=[[]],k=x;if(c)for(e=0;c>e;e++)q?j[0][e]={}:j[e]=[{}];for(;i<b.length;){for(q?j[0][i]=g(k,y[i]):j[i]=[g(k,y[i])],e=0,c=a;e<k.length&&c===a;)k[e].key==b[i]&&(d!==a&&d>=i||d===a)&&(c=e),e++;if(c!==a&&k[c].children)i++,k=k[c].children;else{if(!(h=f(k))||!h.children)break;i++,k=h.children}}return j}function f(a,b){if(!a)return!1;for(var c,d=0;d<a.length;)if(!(c=a[d++]).invalid)return b?d-1:c;return!1}function g(a,b){for(var c={data:[],label:b},d=0;d<a.length;)c.data.push({value:a[d].key,display:a[d].value}),d++;return c}function h(a){b._isVisible&&c(".mbsc-sc-whl-w",b._markup).css("display","").slice(a).hide()}function i(b,c){var d,e,g=[],h=x,i=0,j=!1;if(b[i]!==a&&c>=i)for(j=0,d=b[i],e=a;j<h.length&&e===a;)h[j].key==b[i]&&!h[j].invalid&&(e=j),j++;else e=f(h,!0),d=h[e].key;for(j=e!==a?h[e].children:!1,g[i]=d;j;){if(h=h[e].children,i++,b[i]!==a&&c>=i)for(j=0,d=b[i],e=a;j<h.length&&e===a;)h[j].key==b[i]&&!h[j].invalid&&(e=j),j++;else e=f(h,!0),e=!1===e?a:e,d=h[e].key;j=e!==a&&f(h[e].children)?h[e].children:!1,g[i]=d}return{lvl:i+1,nVector:g}}function j(d){var e=[];return u=u>v++?u:v,d.children("li").each(function(d){var f=c(this),g=f.clone();g.children("ul,ol").remove();var g=b._processMarkup?b._processMarkup(g):g.html().replace(/^\s\s*/,"").replace(/\s\s*$/,""),h=f.attr("data-invalid")?!0:!1,d={key:f.attr("data-val")===a||null===f.attr("data-val")?d:f.attr("data-val"),value:g,invalid:h,children:null},f=f.children("ul,ol");f.length&&(d.children=j(f)),e.push(d)}),v--,e}function k(a,c,d){for(var f=(c||0)+1,g=[],i={},j={},i=e(a,null,c),c=0;c<a.length;c++)b._tempWheelArray[c]=a[c]=d.nVector[c]||0;for(;f<d.lvl;)j[f]=q?i[0][f]:i[f][0],g.push(f++);h(d.lvl),w=a.slice(0),g.length&&(m=!0,b.changeWheel(j))}var l,m,n,o=c.extend({},b.settings),p=c.extend(b.settings,d,o),o=p.layout||(/top|bottom/.test(p.display)?"liquid":""),q="liquid"==o,r=p.readonly,s=c(this),t=this.id+"_dummy",u=0,v=0,w=[],x=p.wheelArray||j(s),y=function(a){var b,c=[];for(b=0;a>b;b++)c[b]=p.labels&&p.labels[b]?p.labels[b]:b;return c}(u),z=function(a){var b,c=[];b=!0;for(var d=0;b;)b=f(a),c[d++]=b.key,(b=b.children)&&(a=b);return c}(x),A=e(z,u);return c("#"+t).remove(),p.showInput&&(l=c('<input type="text" id="'+t+'" value="" class="'+p.inputClass+'" placeholder="'+(p.placeholder||"")+'" readonly />').insertBefore(s),p.anchor=l,b.attachShow(l)),p.wheelArray||s.hide(),{wheels:A,layout:o,headerText:!1,setOnTap:1==u,formatValue:function(b){return n===a&&(n=i(b,b.length).lvl),b.slice(0,n).join(" ")},parseValue:function(a){return a?(a+"").split(" "):(p.defaultValue||z).slice(0)},onBeforeShow:function(){var a=b.getArrayVal(!0);w=a.slice(0),p.wheels=e(a,u,u),m=!0},onWheelGestureStart:function(a){for(var b=u,a=a.index,c=[];b;)c[--b]=!0;c[a]=!1,p.readonly=c},onWheelAnimationEnd:function(a){var a=a.index,c=b.getArrayVal(!0),d=i(c,a);n=d.lvl,p.readonly=r,c[a]!=w[a]&&k(c,a,d)},onFill:function(b){n=a,l&&l.val(b.valueText)},validate:function(b){var c=b.values,b=b.index,d=i(c,c.length);n=d.lvl,b===a&&(h(d.lvl),m||k(c,b,d)),m=!1;for(var b=n,d=x,e=0,f=[];b>e;){for(var g=f,j=e,l=0,o=void 0,p=d,q=[];e>l;){var r=c[l];for(o in p)if(p[o].key==r){p=p[o].children;break}l++}for(l=0;l<p.length;)p[l].invalid&&q.push(p[l].key),l++;g[j]=q,e++}return{disabled:f}},onDestroy:function(){l&&l.remove(),s.show()}}}}(),function(a){var b=mobiscroll,c=b.$,d={batch:50,min:0,max:100,defaultUnit:"",units:null,unitNames:null,invalid:[],sign:!1,step:.05,scale:2,convert:function(a){return a},signText:"&nbsp;",wholeText:"Whole",fractionText:"Fraction",unitText:"Unit"};b.presets.scroller.measurement=function(b){function e(a){return Math.max(w,Math.min(x,M?0>a?Math.ceil(a):Math.floor(a):i(Math.round(a-R),Q)+R))}function f(a){return M?i((Math.abs(a)-Math.abs(e(a)))*P-S,Q)+S:0}function g(a){var b=e(a),c=f(a);return c>=P&&(0>a?b--:b++,c=0),[0>a?"-":"+",b,c]}function h(a){var b=+a[s];return(I&&"-"==a[0]?-1:1)*(b+(M?a[r]/P*(0>b?-1:1):0))}function i(a,b){return Math.round(a/b)*b}function j(a,b){for(a+="";a.length<b;)a="0"+a;return a}function k(a,b,c){return b!==c&&D.convert?D.convert.call(this,a,b,c):a}function l(a,b,c){return a=a>c?c:a,b>a?b:a}function m(a){var b;u=k(D.min,K,a),v=k(D.max,K,a),M?(w=0>u?Math.ceil(u):Math.floor(u),x=0>v?Math.ceil(v):Math.floor(v),y=f(u),z=f(v)):(w=Math.round(u),x=Math.round(v),x=w+Math.floor((x-w)/Q)*Q,R=w%Q),a=w,b=x,I&&(b=Math.abs(Math.abs(a)>Math.abs(b)?a:b),a=0>a?0:a),G.min=0>a?Math.ceil(a/N):Math.floor(a/N),G.max=0>b?Math.ceil(b/N):Math.floor(b/N)}function n(a){return h(a).toFixed(M?O:0)+(J?" "+L[a[t]]:"")}var o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=c.extend({},b.settings),D=c.extend(b.settings,d,C),E={},C=[[]],F={},G={},E={},H=[],I=D.sign,J=D.units&&D.units.length,K=J?D.defaultUnit||D.units[0]:"",L=[],M=1>D.step,N=1<D.step?D.step:1,O=M?Math.max(D.scale,(D.step+"").split(".")[1].length):1,P=Math.pow(10,O),Q=Math.round(M?D.step*P:D.step),R=0,S=0,T=0;if(b.setVal=function(a,d,e,f,g){b._setVal(c.isArray(a)?n(a):a,d,e,f,g)},D.units)for(B=0;B<D.units.length;++B)A=D.units[B],L.push(D.unitNames?D.unitNames[A]||A:A);if(I)if(I=!1,J)for(B=0;B<D.units.length;B++)0>k(D.min,K,D.units[B])&&(I=!0);else I=0>D.min;if(I&&(C[0].push({data:["-","+"],label:D.signText}),T++),G={label:D.wholeText,data:function(a){return w%N+a*N},getIndex:function(a){return Math.round((a-w%N)/N)}},C[0].push(G),s=T++,m(K),M){for(C[0].push(E),E.data=[],E.label=D.fractionText,B=S;P>B;B+=Q)H.push(B),E.data.push({value:B,display:"."+j(B,O)});r=T++,o=Math.ceil(100/Q),D.invalid&&D.invalid.length&&(c.each(D.invalid,function(a,b){var c=b>0?Math.floor(b):Math.ceil(b);0===c&&(c=0>=b?-.001:.001),F[c]=(F[c]||0)+1,0===b&&(c=.001,F[c]=(F[c]||0)+1)}),c.each(F,function(a,b){o>b?delete F[a]:F[a]=a}))}if(J){for(E={data:[],label:D.unitText,circular:!1},B=0;B<D.units.length;B++)E.data.push({value:B,display:L[B]});C[0].push(E)}return t=T,{wheels:C,minWidth:I&&M?70:80,showLabel:!1,formatValue:n,parseValue:function(a){var b=((("number"==typeof a?a+"":a)||D.defaultValue)+"").split(" "),a=+b[0],d=[],e="";return J&&(e=c.inArray(b[1],L),e=-1==e?c.inArray(K,D.units):e,e=-1==e?0:e),q=J?D.units[e]:"",m(q),a=isNaN(a)?0:a,a=l(a,u,v),b=g(a),b[1]=l(b[1],w,x),p=a,I&&(d[0]=b[0],b[1]=Math.abs(b[1])),d[s]=b[1],M&&(d[r]=b[2]),J&&(d[t]=e),d},onCancel:function(){p=a},validate:function(d){var e,f,j,n,o=d.values;j=d.index;var d=d.direction,A={},B=[],C={},E=J?D.units[o[t]]:"";if(I&&0===j&&(p=Math.abs(p)*("-"==o[0]?-1:1)),(j===s||j===r&&M||p===a||j===a)&&(p=h(o),q=E),(J&&j===t&&q!==E||j===a)&&(m(E),p=k(p,q,E),q=E,f=g(p),j!==a&&(C[s]=G,b.changeWheel(C)),I&&(o[0]=f[0])),B[s]=[],I)for(B[0]=[],u>0&&(B[0].push("-"),o[0]="+"),0>v&&(B[0].push("+"),o[0]="-"),j=Math.abs("-"==o[0]?w:x),T=j+N;j+20*N>T;T+=N)B[s].push(T),A[T]=!0;return p=l(p,u,v),f=g(p),j=I?Math.abs(f[1]):f[1],e=I?"-"==o[0]:0>p,o[s]=j,e&&(f[0]="-"),M&&(o[r]=f[2]),c.each(M?F:D.invalid,function(a,b){if(I&&e){if(!(0>=b))return;b=Math.abs(b)}b=i(k(b,K,E),M?1:Q),A[b]=!0,B[s].push(b)}),o[s]=b.getValidValue(s,j,d,A),f[1]=o[s]*(I&&e?-1:1),M&&(B[r]=[],d=I?o[0]+o[1]:(0>p?"-":"+")+Math.abs(f[1]),j=(0>u?"-":"+")+Math.abs(w),C=(0>v?"-":"+")+Math.abs(x),d===j&&c(H).each(function(a,b){(e?b>y:y>b)&&B[r].push(b)}),d===C&&c(H).each(function(a,b){(e?z>b:b>z)&&B[r].push(b)}),c.each(D.invalid,function(a,b){n=g(k(b,K,E)),(f[0]===n[0]||0===f[1]&&0===n[1]&&0===n[2])&&f[1]===n[1]&&B[r].push(n[2])})),{disabled:B,valid:o}}}},b.presetShort("measurement")}(),function(a){var b=mobiscroll,c=b.$,d=b.classes,e=b.util,f=e.constrain,g=e.jsPrefix,h=e.prefix,i=e.getCoord,j=e.getPosition,k=e.testTouch,l=e.isNumeric,m=e.isString,n=/(iphone|ipod|ipad)/i.test(navigator.userAgent),o=window.requestAnimationFrame||function(a){a()},p=window.cancelAnimationFrame||function(){};d.ScrollView=function(b,e,q){function r(a){da("onStart"),ja.stopProp&&a.stopPropagation(),(ja.prevDef||"mousedown"==a.type)&&a.preventDefault(),ja.readonly||ja.lock&&P||!k(a,this)||O||!mobiscroll.running||(y&&y.removeClass("mbsc-btn-a"),K=!1,P||(y=c(a.target).closest(".mbsc-btn-e",this),y.length&&!y.hasClass("mbsc-btn-d")&&(K=!0,z=setTimeout(function(){y.addClass("mbsc-btn-a")},100))),O=!0,Q=T=!1,ga.scrolled=P,$=i(a,"X"),_=i(a,"Y"),H=$,D=C=B=0,Z=new Date,Y=+j(ba,ea)||0,x(Y,n?0:1),"mousedown"===a.type&&c(document).on("mousemove",s).on("mouseup",u))}function s(a){O&&(ja.stopProp&&a.stopPropagation(),H=i(a,"X"),I=i(a,"Y"),B=H-$,C=I-_,D=ea?C:B,K&&(5<Math.abs(C)||5<Math.abs(B))&&(clearTimeout(z),y.removeClass("mbsc-btn-a"),K=!1),(ga.scrolled||!Q&&5<Math.abs(D))&&(T||da("onGestureStart",J),ga.scrolled=T=!0,S||(S=!0,R=o(t))),ea||ja.scrollLock?a.preventDefault():ga.scrolled?a.preventDefault():7<Math.abs(C)&&(Q=!0,ga.scrolled=!0,ka.trigger("touchend")))}function t(){M&&(D=f(D,-W*M,W*M)),x(f(Y+D,N-G,L+G)),S=!1}function u(a){if(O){var b;b=new Date-Z,ja.stopProp&&a.stopPropagation(),p(R),S=!1,!Q&&ga.scrolled&&(ja.momentum&&300>b&&(b=D/b,D=Math.max(Math.abs(D),b*b/ja.speedUnit)*(0>D?-1:1)),w(D)),K&&(clearTimeout(z),y.addClass("mbsc-btn-a"),setTimeout(function(){y.removeClass("mbsc-btn-a")},100),!Q&&!ga.scrolled&&da("onBtnTap",{target:y[0]})),"mouseup"==a.type&&c(document).off("mousemove",s).off("mouseup",u),O=!1}}function v(a){a=a.originalEvent||a,D=ea?a.deltaY||a.wheelDelta||a.detail:a.deltaX,da("onStart"),ja.stopProp&&a.stopPropagation(),D&&mobiscroll.running&&(a.preventDefault(),!ja.readonly)&&(D=0>D?20:-20,Y=fa,T||(J={posX:ea?0:fa,posY:ea?fa:0,originX:ea?0:Y,originY:ea?Y:0,direction:D>0?ea?270:360:ea?90:180},da("onGestureStart",J)),S||(S=!0,R=o(t)),T=!0,clearTimeout(U),U=setTimeout(function(){p(R),T=S=!1,w(D)},200))}function w(a){var b;if(M&&(a=f(a,-W*M,W*M)),ha=Math.round((Y+a)/W),b=f(ha*W,N,L),X){if(0>a){for(a=X.length-1;a>=0;a--)if(Math.abs(b)+A>=X[a].breakpoint){ha=a,ia=2,b=X[a].snap2;break}}else if(a>=0)for(a=0;a<X.length;a++)if(Math.abs(b)<=X[a].breakpoint){ha=a,ia=1,b=X[a].snap1;break}b=f(b,N,L)}a=ja.time||(N>fa||fa>L?200:Math.max(200,Math.abs(b-fa)*ja.timeUnit)),J.destinationX=ea?0:b,J.destinationY=ea?b:0,J.duration=a,J.transitionTiming=F,da("onGestureEnd",J),x(b,a)}function x(a,b,c){var d=a!=fa,e=b>1,f=function(){clearInterval(V),P=!1,fa=a,J.posX=ea?0:a,J.posY=ea?a:0,d&&da("onMove",J),e&&da("onAnimationEnd",J),c&&c()};J={posX:ea?0:fa,posY:ea?fa:0,originX:ea?0:Y,originY:ea?Y:0,direction:a-fa>0?ea?270:360:ea?90:180},fa=a,e&&(J.destinationX=ea?0:a,J.destinationY=ea?a:0,J.duration=b,J.transitionTiming=F,da("onAnimationStart",J)),aa[g+"Transition"]=b?h+"transform "+Math.round(b)+"ms "+F:"",aa[g+"Transform"]="translate3d("+(ea?"0,"+a+"px,":a+"px,0,")+"0)",!d&&!P||!b||1>=b?f():b&&(P=!0,clearInterval(V),V=setInterval(function(){var a=+j(ba,ea)||0;J.posX=ea?0:a,J.posY=ea?a:0,da("onMove",J)},100),clearTimeout(ca),ca=setTimeout(function(){f(),aa[g+"Transition"]=""},b))}var y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga=this,ha=0,ia=1,ja=e,ka=c(b);d.Base.call(this,b,e,!0),ga.scrolled=!1,ga.scroll=function(a,d,e){a=l(a)?Math.round(a/W)*W:Math.ceil((c(a,b).length?Math.round(ba.offset()[E]-c(a,b).offset()[E]):fa)/W)*W,ha=Math.round(a/W),Y=fa,x(f(a,N,L),d,e)},ga.refresh=function(b){var c;A=ja.contSize===a?ea?ka.height():ka.width():ja.contSize,N=ja.minScroll===a?ea?A-ba.height():A-ba.width():ja.minScroll,L=ja.maxScroll===a?0:ja.maxScroll,!ea&&ja.rtl&&(c=L,L=-N,N=-c),m(ja.snap)&&(X=[],ba.find(ja.snap).each(function(){var a=ea?this.offsetTop:this.offsetLeft,b=ea?this.offsetHeight:this.offsetWidth;X.push({breakpoint:a+b/2,snap1:-a,snap2:A-a-b})})),W=l(ja.snap)?ja.snap:1,M=ja.snap?ja.maxSnapScroll:0,F=ja.easing,G=ja.elastic?l(ja.snap)?W:l(ja.elastic)?ja.elastic:0:0,fa===a&&(fa=ja.initialPos,ha=Math.round(fa/W)),b||ga.scroll(ja.snap?X?X[ha]["snap"+ia]:ha*W:fa)},ga.init=function(a){ga._init(a),E=(ea="Y"==ja.axis)?"top":"left",ba=ja.moveElement||ka.children().eq(0),aa=ba[0].style,ga.refresh(),ka.on("touchstart mousedown",r).on("touchmove",s).on("touchend touchcancel",u),ja.mousewheel&&ka.on("wheel mousewheel",v),b.addEventListener&&b.addEventListener("click",function(a){ga.scrolled&&(ga.scrolled=!1,a.stopPropagation(),a.preventDefault())},!0)},ga.destroy=function(){clearInterval(V),ka.off("touchstart mousedown",r).off("touchmove",s).off("touchend touchcancel",u).off("wheel mousewheel",v),ga._destroy()},ja=ga.settings,da=ga.trigger,q||ga.init(e)},d.ScrollView.prototype={_class:"scrollview",_defaults:{speedUnit:.0022,timeUnit:.8,initialPos:0,axis:"Y",easing:"ease-out",stopProp:!0,momentum:!0,mousewheel:!0,elastic:!0}},b.presetShort("scrollview","ScrollView",!1)}(),function(){function a(a){var b=[Math.round(a.r).toString(16),Math.round(a.g).toString(16),Math.round(a.b).toString(16)];return h.each(b,function(a,c){1==c.length&&(b[a]="0"+c)}),"#"+b.join("")}function b(a){return a=parseInt(-1<a.indexOf("#")?a.substring(1):a,16),{r:a>>16,g:(65280&a)>>8,b:255&a}}function c(a){var b,c,d;b=a.h;var e=255*a.s/100,a=255*a.v/100;if(0===e)b=c=d=a;else{var e=(255-e)*a/255,f=(a-e)*(b%60)/60;360==b&&(b=0),60>b?(b=a,d=e,c=e+f):120>b?(c=a,d=e,b=a-f):180>b?(c=a,b=e,d=e+f):240>b?(d=a,b=e,c=a-f):300>b?(d=a,c=e,b=e+f):360>b?(b=a,c=e,d=a-f):b=c=d=0}return{r:b,g:c,b:d}}function d(a){var b,c=0;b=Math.min(a.r,a.g,a.b);var d=Math.max(a.r,a.g,a.b),c=d-b,c=(b=d?255*c/d:0)?a.r==d?(a.g-a.b)/c:a.g==d?2+(a.b-a.r)/c:4+(a.r-a.g)/c:-1,c=60*c;return 0>c&&(c+=360),{h:c,s:b*(100/255),v:d*(100/255)}}function e(b){return a(c(b))}function f(a){return d(b(a))}var g=mobiscroll,h=g.$,i=g.util.prefix,j=g.presets.scroller,k={preview:!0,previewText:!0,label:"Color",refineLabel:"Refine",step:10,nr:10,format:"hex",hueText:"Hue",saturationText:"Saturation",valueText:"Value"};g.presetShort("color"),j.color=function(a){function b(a){return isNaN(+a)?0:+a}function g(a){return"hsv"==p?a.join(","):"rgb"==p?(a=c({h:a[0],s:a[1],v:a[2]}),Math.round(a.r)+","+Math.round(a.g)+","+Math.round(a.b)):e({h:a[0],s:a[1],v:a[2]})}function j(a,b,c){a[0].style.backgroundImage=i+("-webkit-"==i?"gradient(linear,left top,left bottom,from("+b+"),to("+c+"))":"linear-gradient("+b+","+c+")")}function l(b,d){var f=a._tempWheelArray;if(1!==d&&2!==d&&j(h(".mbsc-sc-whl-sc",b).eq(1),e({h:f[0],s:0,v:100}),e({h:f[0],s:100,v:100})),2!==d&&j(h(".mbsc-sc-whl-sc",b).eq(2),e({h:f[0],s:f[1],v:0}),e({h:f[0],s:f[1],v:100})),q){var i=c({h:f[0],s:f[1],v:f[2]}),i=.299*i.r+.587*i.g+.114*i.b;h(".mbsc-color-preview",b).attr("style","background:"+e({h:f[0],s:f[1],v:f[2]})+";color:"+(i>130?"#000":"#fff")).text(r?g(f):"")}}var m=h.extend({},a.settings),n=h.extend(a.settings,k,m),m=h.isArray(n.colors)?n.colors:[n.colors],o=n.defaultValue||m[0],p=n.format,q=n.preview,r=n.previewText,s=n.hueText,t=n.saturationText,u=n.valueText;return{minWidth:70,height:15,rows:13,speedUnit:.006,timeUnit:.05,showLabel:!0,wheels:function(){var a=0,b={data:[],label:s},c={circular:!1,data:[],label:t},d={circular:!1,data:[],label:u};for(a;360>a;a+=3)b.data.push({value:a,label:a,display:'<div class="mbsc-color-itm" style="background:'+e({h:a,s:100,v:100})+'"><div class="mbsc-color-itm-a"></div></div>'});for(a=0;101>a;a+=1)c.data.push({value:a,label:a,display:'<div class="mbsc-color-itm"><div class="mbsc-color-itm-a"></div></div>'}),d.data.push({value:a,label:a,display:'<div class="mbsc-color-itm"><div class="mbsc-color-itm-a"></div></div>'});return[[b,c,d]]}(),compClass:"mbsc-color",parseValue:function(a){if(a=a||o){"hsv"==p?(a=a.split(","),a={h:b(a[0]),s:b(a[1]),v:b(a[2])}):"rgb"==p?(a=a.split(","),a=d({r:b(a[0]),g:b(a[1]),b:b(a[2])})):(a=a.replace("#",""),3==a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),a=f(a));var c=Math.round(a.h);return[3*Math.floor(c/3),Math.round(a.s),Math.round(a.v)]}return[0,100,100]},formatValue:g,onBeforeShow:function(){q&&(n.headerText=!1)},onMarkupReady:function(a){a=h(a.target),q&&a.find(".mbsc-sc-whl-gr-c").before('<div class="mbsc-color-preview"></div>'),l(a)},validate:function(b){a._isVisible&&l(a._markup,b.index)}}},g.util.color={hsv2hex:e,hsv2rgb:c,rgb2hsv:d,rgb2hex:a,hex2rgb:b,hex2hsv:f}}(),function(a){var b=mobiscroll,c=b.$,d={autostart:!1,step:1,useShortLabels:!1,labels:"Years,Months,Days,Hours,Minutes,Seconds,".split(","),labelsShort:"Yrs,Mths,Days,Hrs,Mins,Secs,".split(","),startText:"Start",stopText:"Stop",resetText:"Reset",lapText:"Lap",hideText:"Hide"};b.presetShort("timer"),b.presets.scroller.timer=function(b){function e(a){return new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())}function f(a){var b={};if(L&&A[I].index>A.days.index){var d,f,g,h;d=new Date;var i=t?d:K;for(d=t?K:d,d=e(d),i=e(i),b.years=i.getFullYear()-d.getFullYear(),b.months=i.getMonth()-d.getMonth(),b.days=i.getDate()-d.getDate(),b.hours=i.getHours()-d.getHours(),b.minutes=i.getMinutes()-d.getMinutes(),b.seconds=i.getSeconds()-d.getSeconds(),b.fract=(i.getMilliseconds()-d.getMilliseconds())/10,d=z.length;d>0;d--)f=z[d-1],g=A[f],h=z[c.inArray(f,z)-1],A[h]&&0>b[f]&&(b[h]--,b[f]+="months"==h?32-new Date(i.getFullYear(),i.getMonth(),32).getDate():g.until+1);"months"==I&&(b.months+=12*b.years,delete b.years)}else c(z).each(function(c,d){A[d].index<=A[I].index&&(b[d]=Math.floor(a/A[d].limit),a-=b[d]*A[d].limit)});return b}function g(a){var b=1,d=A[a],e=d.wheel,f=d.prefix,g=d.until,i=A[z[c.inArray(a,z)-1]];if(d.index<=A[I].index&&(!i||i.limit>H))if(B[a]||M[0].push(e),B[a]=1,e.data=[],e.label=d.label||"",e.cssClass="mbsc-timer-whl-"+a,H>=d.limit&&(b=Math.max(Math.round(H/d.limit),1),n=b*d.limit),a==I)e.min=0,e.data=function(a){return{value:a,display:h(a,f,d.label)}},e.getIndex=function(a){return a};else for(l=0;g>=l;l+=b)e.data.push({value:l,display:h(l,f,d.label)})}function h(a,b,c){return(b||"")+(10>a?"0":"")+a+'<span class="mbsc-timer-lbl">'+c+"</span>"}function i(a){var b,d=[],e=f(a);return c(z).each(function(a,c){B[c]&&(b=Math.max(Math.round(H/A[c].limit),1),d.push(Math.round(e[c]/b)*b))}),d}function j(b){L?(r=K-new Date,0>r?(r*=-1,t=!0):t=!1,s=0,G=!0):(K!==a?(G=!1,r=1e3*K,t="countdown"!=x.mode):(r=0,G=t="countdown"!=x.mode),b&&(s=0))}function k(){E?(c(".mbsc-fr-w",u).addClass("mbsc-timer-running mbsc-timer-locked"),c(".mbsc-timer-btn-toggle-c > div",u).text(x.stopText),b.buttons.start.icon&&c(".mbsc-timer-btn-toggle-c > div",u).removeClass("mbsc-ic-"+b.buttons.start.icon),b.buttons.stop.icon&&c(".mbsc-timer-btn-toggle-c > div",u).addClass("mbsc-ic-"+b.buttons.stop.icon),"stopwatch"==x.mode&&(c(".mbsc-timer-btn-resetlap-c > div",u).text(x.lapText),b.buttons.reset.icon&&c(".mbsc-timer-btn-resetlap-c > div",u).removeClass("mbsc-ic-"+b.buttons.reset.icon),
b.buttons.lap.icon&&c(".mbsc-timer-btn-resetlap-c > div",u).addClass("mbsc-ic-"+b.buttons.lap.icon))):(c(".mbsc-fr-w",u).removeClass("mbsc-timer-running"),c(".mbsc-timer-btn-toggle-c > div",u).text(x.startText),b.buttons.start.icon&&c(".mbsc-timer-btn-toggle-c > div",u).addClass("mbsc-ic-"+b.buttons.start.icon),b.buttons.stop.icon&&c(".mbsc-timer-btn-toggle-c > div",u).removeClass("mbsc-ic-"+b.buttons.stop.icon),"stopwatch"==x.mode&&(c(".mbsc-timer-btn-resetlap-c > div",u).text(x.resetText),b.buttons.reset.icon&&c(".mbsc-timer-btn-resetlap-c > div",u).addClass("mbsc-ic-"+b.buttons.reset.icon),b.buttons.lap.icon&&c(".mbsc-timer-btn-resetlap-c > div",u).removeClass("mbsc-ic-"+b.buttons.lap.icon)))}var l,m,n,o,p,q,r,s,t,u,v,w=c.extend({},b.settings),x=c.extend(b.settings,d,w),y=x.useShortLabels?x.labelsShort:x.labels,w=["toggle","resetlap"],z="years,months,days,hours,minutes,seconds,fract".split(","),A={years:{index:6,until:10,limit:31536e6,label:y[0],wheel:{}},months:{index:5,until:11,limit:2592e6,label:y[1],wheel:{}},days:{index:4,until:31,limit:864e5,label:y[2],wheel:{}},hours:{index:3,until:23,limit:36e5,label:y[3],wheel:{}},minutes:{index:2,until:59,limit:6e4,label:y[4],wheel:{}},seconds:{index:1,until:59,limit:1e3,label:y[5],wheel:{}},fract:{index:0,until:99,limit:10,label:y[6],prefix:".",wheel:{}}},B={},C=[],D=0,E=!1,F=!0,G=!1,H=Math.max(10,1e3*x.step),I=x.maxWheel,J="stopwatch"==x.mode||L,K=x.targetTime,L=K&&K.getTime!==a,M=[[]];return b.start=function(){F&&b.reset(),E||(j(),!G&&s>=r)||(E=!0,F=!1,p=new Date,o=s,x.readonly=!0,b.setVal(i(t?s:r-s),!0,!0,!1,100),m=setInterval(function(){s=new Date-p+o,b.setVal(i(t?s:r-s),!0,!0,!1,Math.min(100,n-10)),!G&&s+n>=r&&(clearInterval(m),setTimeout(function(){b.stop(),s=r,b.setVal(i(t?s:0),!0,!0,!1,100),b.trigger("onFinish",{time:r}),F=!0},r-s))},n),k(),b.trigger("onStart"))},b.stop=function(){E&&(E=!1,clearInterval(m),s=new Date-p+o,k(),b.trigger("onStop",{ellapsed:s}))},b.toggle=function(){E?b.stop():b.start()},b.reset=function(){b.stop(),s=0,C=[],D=0,b.setVal(i(t?0:r),!0,!0,!1,100),b.settings.readonly=J,F=!0,J||c(".mbsc-fr-w",u).removeClass("mbsc-timer-locked"),b.trigger("onReset")},b.lap=function(){E&&(q=new Date-p+o,v=q-D,D=q,C.push(q),b.trigger("onLap",{ellapsed:q,lap:v,laps:C}))},b.resetlap=function(){E&&"stopwatch"==x.mode?b.lap():b.reset()},b.getTime=function(){return r},b.setTime=function(a){K=a/1e3,r=a},b.getElapsedTime=b.getEllapsedTime=function(){return E?new Date-p+o:0},b.setElapsedTime=b.setEllapsedTime=function(a,c){F||(o=s=a,p=new Date,b.setVal(i(t?s:r-s),!0,c,!1,100))},j(!0),!I&&!r&&(I="minutes"),"inline"!==x.display&&w.push("hide"),I||c(z).each(function(a,b){return!I&&r>=A[b].limit?(I=b,!1):void 0}),c(z).each(function(a,b){g(b)}),n=Math.max(87,n),x.autostart&&setTimeout(function(){b.start()},0),b.handlers.toggle=b.toggle,b.handlers.start=b.start,b.handlers.stop=b.stop,b.handlers.resetlap=b.resetlap,b.handlers.reset=b.reset,b.handlers.lap=b.lap,b.buttons.toggle={parentClass:"mbsc-timer-btn-toggle-c",text:x.startText,handler:"toggle"},b.buttons.start={text:x.startText,handler:"start"},b.buttons.stop={text:x.stopText,handler:"stop"},b.buttons.reset={text:x.resetText,handler:"reset"},b.buttons.lap={text:x.lapText,handler:"lap"},b.buttons.resetlap={parentClass:"mbsc-timer-btn-resetlap-c",text:x.resetText,handler:"resetlap"},b.buttons.hide={parentClass:"mbsc-timer-btn-hide-c",text:x.hideText,handler:"cancel"},{wheels:M,headerText:!1,readonly:J,buttons:w,mode:"countdown",compClass:"mbsc-timer",parseValue:function(){return i(t?0:r)},formatValue:function(a){var b="",d=0;return c(z).each(function(c,e){"fract"!=e&&B[e]&&(b+=a[d]+("seconds"==e&&B.fract?"."+a[d+1]:"")+" "+y[c]+" ",d++)}),b},validate:function(b){var d=b.values,b=b.index,e=0;F&&b!==a&&(K=0,c(z).each(function(a,b){B[b]&&(K+=A[b].limit*d[e],e++)}),K/=1e3,j(!0))},onBeforeShow:function(){x.showLabel=!0},onMarkupReady:function(a){u=c(a.target),k(),J&&c(".mbsc-fr-w",u).addClass("mbsc-timer-locked")},onPosition:function(a){c(".mbsc-fr-w",a.target).css("min-width",0).css("min-width",c(".mbsc-fr-btn-cont",a.target).outerWidth())},onDestroy:function(){clearInterval(m)}}}}(),function(a){var b=mobiscroll,c=b.$,d=b.presets.scroller,e=b.util.datetime,f=b.util.testTouch,g={autoCorrect:!0,showSelector:!0,minRange:1,rangeTap:!0,fromText:"Start",toText:"End"};b.presetShort("range"),d.range=function(b){function h(a,b){a&&(a.setFullYear(b.getFullYear()),a.setMonth(b.getMonth()),a.setDate(b.getDate()))}function i(a,b){var d=!0;if(a&&t&&u&&(u-t>D.maxRange-1&&(B?t=new Date(u-D.maxRange+1):u=new Date(+t+D.maxRange-1)),u-t<D.minRange-1&&(B?t=new Date(u-D.minRange+1):u=new Date(+t+D.minRange-1))),t&&u||(d=!1),b){var f,g,h,i,j,k=0,m=F||!B?" mbsc-cal-day-hl mbsc-cal-sel-start":" mbsc-cal-sel-start",o=F||B?" mbsc-cal-day-hl mbsc-cal-sel-end":" mbsc-cal-sel-end";if(r=t?e.formatDate(n,t,D):"",s=u?e.formatDate(n,u,D):"",l&&(c(".mbsc-range-btn-v-start",l).html(r||"&nbsp;"),c(".mbsc-range-btn-v-end",l).html(s||"&nbsp;"),f=t?new Date(t):null,h=u?new Date(u):null,!f&&h&&(f=new Date(h)),!h&&f&&(h=new Date(f)),j=B?h:f,c(".mbsc-cal-table .mbsc-cal-day-sel .mbsc-cal-day-i",l).removeClass(G),c(".mbsc-cal-table .mbsc-cal-day-hl",l).removeClass(I),c(".mbsc-cal-table .mbsc-cal-day-sel",l).removeClass("mbsc-cal-day-sel mbsc-cal-sel-start mbsc-cal-sel-end").removeAttr("aria-selected"),f&&h))for(g=f.setHours(0,0,0,0),i=h.setHours(0,0,0,0);h>=f&&84>k;)c('.mbsc-cal-day[data-full="'+j.getFullYear()+"-"+j.getMonth()+"-"+j.getDate()+'"]',l).addClass("mbsc-cal-day-sel"+(j.getTime()===g?m:"")+(j.getTime()===i?o:"")).attr("aria-selected","true").find(".mbsc-cal-day-i ").addClass(G),j.setDate(j.getDate()+(B?-1:1)),k++}return d}function j(){y&&l&&(c(".mbsc-range-btn-c",l).removeClass("mbsc-range-btn-sel").removeAttr("aria-checked").find(".mbsc-range-btn",l).removeClass(G),c(".mbsc-range-btn-c",l).eq(B).addClass("mbsc-range-btn-sel").attr("aria-checked","true").find(".mbsc-range-btn").addClass(G))}var k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=b._startDate,A=b._endDate,B=0;o=new Date;var C=c.extend({},b.settings),D=c.extend(b.settings,g,C),E=D.anchor,F=D.rangeTap,G=D.activeClass||"",H="mbsc-fr-btn-d "+(D.disabledClass||""),I="mbsc-cal-day-hl",J=null===D.defaultValue?[]:D.defaultValue||[new Date(o.setHours(0,0,0,0)),new Date(o.getFullYear(),o.getMonth(),o.getDate()+6,23,59,59,999)];return F&&(D.tabs=!0),o=d.calbase.call(this,b),k=c.extend({},o),n=b.format,v="time"===D.controls.join(""),y=1==D.controls.length&&"calendar"==D.controls[0]?D.showSelector:!0,D.startInput&&(w=c(D.startInput).prop("readonly"),b.attachShow(c(D.startInput).prop("readonly",!0),function(){B=0,D.anchor=E||c(D.startInput)})),D.endInput&&(x=c(D.endInput).prop("readonly"),b.attachShow(c(D.endInput).prop("readonly",!0),function(){B=1,D.anchor=E||c(D.endInput)})),b.setVal=function(c,d,f,g,h){var i=c||[];(i[0]===a||null===i[0]||i[0].getTime)&&(q=!0,r=(t=i[0]||null)?e.formatDate(n,t,D):"",B||(c=k.parseValue(r,b))),(i[1]===a||null===i[1]||i[1].getTime)&&(q=!0,s=(u=i[1]||null)?e.formatDate(n,u,D):"",B&&(c=k.parseValue(s,b))),g||(b._startDate=z=t,b._endDate=A=u),b._setVal(c,d,f,g,h)},b.getVal=function(a){return a?[t,u]:b._hasValue?[z,A]:null},b.getDayProps=function(a){var b=t?new Date(t.getFullYear(),t.getMonth(),t.getDate()):null,c=u?new Date(u.getFullYear(),u.getMonth(),u.getDate()):null;return{selected:b&&c&&a>=b&&u>=a,cssClass:((F||!B)&&b&&b.getTime()===a.getTime()||(F||B)&&c&&c.getTime()===a.getTime()?I:"")+(b&&b.getTime()===a.getTime()?" mbsc-cal-sel-start":"")+(c&&c.getTime()===a.getTime()?" mbsc-cal-sel-end":"")}},b.setActiveDate=function(a){B="start"==a?0:1,a="start"==a?t:u,b.isVisible()&&(j(),F||(c(".mbsc-cal-table .mbsc-cal-day-hl",l).removeClass(I),a&&c('.mbsc-cal-day[data-full="'+a.getFullYear()+"-"+a.getMonth()+"-"+a.getDate()+'"]',l).addClass(I)),a&&(p=!0,b.setDate(a,!1,200,!0)))},b.getValue=b.getVal,c.extend(o,{highlight:!1,outerMonthChange:!1,formatValue:function(){return r+(D.endInput?"":s?" - "+s:"")},parseValue:function(a){return a=a?a.split(" - "):[],D.defaultValue=J[1],A=D.endInput?c(D.endInput).val()?e.parseDate(n,c(D.endInput).val(),D):J[1]:a[1]?e.parseDate(n,a[1],D):J[1],D.defaultValue=J[0],z=D.startInput?c(D.startInput).val()?e.parseDate(n,c(D.startInput).val(),D):J[0]:a[0]?e.parseDate(n,a[0],D):J[0],D.defaultValue=J[B],r=z?e.formatDate(n,z,D):"",s=A?e.formatDate(n,A,D):"",b._startDate=z,b._endDate=A,k.parseValue(B?s:r,b)},onFill:function(a){a=a.change,b._startDate=z=t,b._endDate=A=u,D.startInput&&(c(D.startInput).val(r),a&&c(D.startInput).trigger("change")),D.endInput&&(c(D.endInput).val(s),a&&c(D.endInput).trigger("change"))},onBeforeClose:function(a){return"set"!==a.button||i(!0,!0)?void 0:(b.setActiveDate(B?"start":"end"),!1)},onHide:function(){k.onHide.call(b),B=0,l=null,D.anchor=E},onClear:function(){F&&(B=0)},onBeforeShow:function(){D.headerText=!1,t=z,u=A,D.counter&&(D.headerText=function(){var a=t&&u?Math.max(1,Math.round((new Date(u).setHours(0,0,0,0)-new Date(t).setHours(0,0,0,0))/864e5)+1):0;return(a>1?D.selectedPluralText||D.selectedText:D.selectedText).replace(/{count}/,a)}),q=!0},onMarkupReady:function(a){l=c(a.target),t&&(p=!0,b.setDate(t,!1,0,!0),t=b.getDate(!0)),u&&(p=!0,b.setDate(u,!1,0,!0),u=b.getDate(!0)),(B&&u||!B&&t)&&(p=!0,b.setDate(B?u:t,!1,0,!0)),k.onMarkupReady.call(this,a),l.addClass("mbsc-range"),y&&(a='<div class="mbsc-range-btn-t" role="radiogroup"><div class="mbsc-range-btn-c mbsc-range-btn-start"><div role="radio" class="mbsc-fr-btn-e mbsc-fr-btn-nhl mbsc-range-btn">'+D.fromText+'<div class="mbsc-range-btn-v mbsc-range-btn-v-start">'+(r||"&nbsp;")+'</div></div></div><div class="mbsc-range-btn-c mbsc-range-btn-end"><div role="radio" class="mbsc-fr-btn-e mbsc-fr-btn-nhl mbsc-range-btn">'+D.toText+'<div class="mbsc-range-btn-v mbsc-range-btn-v-end">'+(s||"&nbsp;")+"</div></div></div></div>",c(".mbsc-cal-tabs",l).before(a),j()),c(".mbsc-range-btn-c",l).on("touchstart click",function(a){f(a,this)&&(b.showMonthView(),b.setActiveDate(c(this).index()?"end":"start"))})},onDayChange:function(a){a.active=B?"end":"start",m=!0},onSetDate:function(d){var e=d.date,f=b.order;p||(f.h===a&&e.setHours(B?23:0),f.i===a&&e.setMinutes(B?59:0),f.s===a&&e.setSeconds(B?59:0),e.setMilliseconds(B?999:0),(!q||m)&&(F&&m&&(1==B&&t>e&&(B=0),B?e.setHours(23,59,59,999):e.setHours(0,0,0,0)),B?u=new Date(e):t=new Date(e),v&&(h(t,e),h(u,e)),F&&m&&!B&&(u=null))),b._isValid=i(q||m||D.autoCorrect,!p),d.active=B?"end":"start",!p&&F&&(m&&(B=B?0:1),j()),b.isVisible()&&(b._isValid?c(".mbsc-fr-btn-s .mbsc-fr-btn",b._markup).removeClass(H):c(".mbsc-fr-btn-s .mbsc-fr-btn",b._markup).addClass(H)),p=q=m=!1},onTabChange:function(a){"calendar"!=a.tab&&b.setDate(B?u:t,!1,200,!0),i(!0,!0)},onDestroy:function(){c(D.startInput).prop("readonly",w),c(D.endInput).prop("readonly",x)}}),o}}(),function(a,b,c){var d=mobiscroll,e=d.$,f=e.extend,g=d.util.datetime,h=g.adjustedDate,i=d.presets.scroller,j={labelsShort:"Yrs,Mths,Days,Hrs,Mins,Secs".split(","),eventText:"event",eventsText:"events"};d.presetShort("eventcalendar"),i.eventcalendar=function(b){function k(b){if(b){if(A[b])return A[b];var c=e('<div style="background-color:'+b+';"></div>').appendTo("body"),d=(a.getComputedStyle?getComputedStyle(c[0]):c[0].style).backgroundColor.replace(/rgb|rgba|\(|\)|\s/g,"").split(","),d=130<.299*d[0]+.587*d[1]+.114*d[2]?"#000":"#fff";return c.remove(),A[b]=d}}function l(a){return a.sort(function(a,b){var c=a.d||a.start,d=b.d||b.start,c=c.getTime?a.start&&a.end&&a.start.toDateString()!==a.end.toDateString()?1:c.getTime():0,d=d.getTime?b.start&&b.end&&b.start.toDateString()!==b.end.toDateString()?1:d.getTime():0;return c-d})}function m(a){var b;b=e(".mbsc-cal-c",q).outerHeight();var c=a.outerHeight(),d=a.outerWidth(),f=a.offset().top-e(".mbsc-cal-c",q).offset().top,g=2>a.closest(".mbsc-cal-row").index();b=r.addClass("mbsc-cal-events-t").css({top:g?f+c:"0",bottom:g?"0":b-f}).addClass("mbsc-cal-events-v").height(),r.css(g?"bottom":"top","auto").removeClass("mbsc-cal-events-t"),v.css("max-height",b),u.refresh(),u.scroll(0),g?r.addClass("mbsc-cal-events-b"):r.removeClass("mbsc-cal-events-b"),e(".mbsc-cal-events-arr",r).css("left",a.offset().left-r.offset().left+d/2)}function n(a,c){var d=t[a];if(d){var f,h,i,j,n,o='<ul class="mbsc-cal-event-list">';s=c,c.addClass(C).find(".mbsc-cal-day-i").addClass(E),c.hasClass(D)&&c.attr("data-hl","true").removeClass(D),l(d),e.each(d,function(a,b){j=b.d||b.start,n=b.start&&b.end&&b.start.toDateString()!==b.end.toDateString(),i=b.color,k(i),h=f="",j.getTime&&(f=g.formatDate((n?"MM d yy ":"")+B.timeFormat,j)),b.end&&(h=g.formatDate((n?"MM d yy ":"")+B.timeFormat,b.end));var c,d=o,e='<li role="button" aria-label="'+b.text+(f?", "+B.fromText+" "+f:"")+(h?", "+B.toText+" "+h:"")+'" class="mbsc-cal-event"><div class="mbsc-cal-event-color" style="'+(i?"background:"+i+";":"")+'"></div><div class="mbsc-cal-event-text">'+(j.getTime&&!n?'<div class="mbsc-cal-event-time">'+g.formatDate(B.timeFormat,j)+"</div>":"")+b.text+"</div>";if(b.start&&b.end){c=B.labelsShort;var l=Math.abs(b.end-b.start)/1e3,m=l/60,p=m/60,q=p/24,r=q/365;c='<div class="mbsc-cal-event-dur">'+(45>l&&Math.round(l)+" "+c[5].toLowerCase()||45>m&&Math.round(m)+" "+c[4].toLowerCase()||24>p&&Math.round(p)+" "+c[3].toLowerCase()||30>q&&Math.round(q)+" "+c[2].toLowerCase()||365>q&&Math.round(q/30)+" "+c[1].toLowerCase()||Math.round(r)+" "+c[0].toLowerCase())+"</div>"}else c="";o=d+(e+c+"</li>")}),o+="</ul>",w.html(o),b.trigger("onEventBubbleShow",{target:s[0],eventList:r[0]}),m(s),b.tap(e(".mbsc-cal-event",w),function(c){u.scrolled||b.trigger("onEventSelect",{domEvent:c,event:d[e(this).index()],date:a})}),x=!0}}function o(){r&&r.removeClass("mbsc-cal-events-v"),s&&(s.removeClass(C).find(".mbsc-cal-day-i").removeClass(E),s.attr("data-hl")&&s.removeAttr("data-hl").addClass(D)),x=!1}var p,q,r,s,t,u,v,w,x,y,z,A={};y=f({},b.settings);var B=f(b.settings,j,y),C="mbsc-cal-day-sel mbsc-cal-day-ev",D="mbsc-cal-day-hl",E=B.activeClass||"",F=B.showEventCount,G=0,H=f(!0,[],B.data);return y=i.calbase.call(this,b),p=f({},y),e.each(H,function(a,b){b._id===c&&(b._id=G++)}),b.onGenMonth=function(a,c){t=b.prepareObj(H,a,c)},b.getDayProps=function(a){var b=t[a]?t[a]:!1,c=b?t[a].length+" "+(1<t[a].length?B.eventsText:B.eventText):0,d=b&&b[0]&&b[0].color,f=F&&c?k(d):"",g="",h="";if(b){for(a=0;a<b.length;a++)b[a].icon&&(g+='<span class="mbsc-ic mbsc-ic-'+b[a].icon+'"'+(b[a].text?"":b[a].color?' style="color:'+b[a].color+';"':"")+"></span>\n");for(h='<div class="mbsc-cal-day-m"><div class="mbsc-cal-day-m-t">',a=0;a<b.length;a++)h+='<div class="mbsc-cal-day-m-c"'+(b[a].color?' style="background:'+b[a].color+';"':"")+"></div>";h+="</div></div>"}return{marked:b,selected:!1,cssClass:b?"mbsc-cal-day-marked":"",ariaLabel:F?c:"",markup:F&&c?'<div class="mbsc-cal-day-txt-c"><div class="mbsc-cal-day-txt" title="'+e("<div>"+c+"</div>").text()+'"'+(d?' style="background:'+d+";color:"+f+';text-shadow:none;"':"")+">"+g+c+"</div></div>":F&&g?'<div class="mbsc-cal-day-ic-c">'+g+"</div>":b?h:""}},b.addEvent=function(a){var d=[],a=f(!0,[],e.isArray(a)?a:[a]);return e.each(a,function(a,b){b._id===c&&(b._id=G++),H.push(b),d.push(b._id)}),o(),b.redraw(),d},b.removeEvent=function(a){a=e.isArray(a)?a:[a],e.each(a,function(a,b){e.each(H,function(a,c){return c._id===b?(H.splice(a,1),!1):void 0})}),o(),b.redraw()},b.getEvents=function(a){var c;return a?(a.setHours(0,0,0,0),c=b.prepareObj(H,a.getFullYear(),a.getMonth()),c[a]?l(c[a]):[]):f(!0,[],H)},b.setEvents=function(a){var d=[];return H=f(!0,[],a),e.each(H,function(a,b){b._id===c&&(b._id=G++),d.push(b._id)}),o(),b.redraw(),d},f(y,{highlight:!1,outerMonthChange:!1,headerText:!1,buttons:"inline"!==B.display?["cancel"]:B.buttons,onMarkupReady:function(a){p.onMarkupReady.call(this,a),q=e(a.target),F&&e(".mbsc-cal",q).addClass("mbsc-cal-ev"),q.addClass("mbsc-cal-em"),r=e('<div class="mbsc-cal-events '+(B.eventBubbleClass||"")+'"><div class="mbsc-cal-events-arr"></div><div class="mbsc-cal-events-i"><div class="mbsc-cal-events-sc"></div></div></div>').appendTo(e(".mbsc-cal-c",q)),v=e(".mbsc-cal-events-i",r),w=e(".mbsc-cal-events-sc",r),u=new d.classes.ScrollView(v[0]),x=!1,b.tap(v,function(){u.scrolled||o()})},onMonthChange:function(){o()},onSelectShow:function(){o()},onMonthLoaded:function(){z&&(n(z.d,e('.mbsc-cal-day-v[data-full="'+z.full+'"]:not(.mbsc-cal-day-diff)',q)),z=!1)},onDayChange:function(a){var c=h(a.date.getFullYear(),a.date.getMonth(),a.date.getDate()),d=e(a.target);return o(),d.hasClass("mbsc-cal-day-ev")||setTimeout(function(){b.changing?z={d:c,full:d.attr("data-full")}:n(c,d)},10),!1},onCalResize:function(){x&&m(s)}}),y}}(window,document),function(){var a=mobiscroll,b=a.$,c=a.presets.scroller,d={min:0,max:100,defaultUnit:"km",units:"m,km,in,ft,yd,mi".split(",")},e={mm:.001,cm:.01,dm:.1,m:1,dam:10,hm:100,km:1e3,"in":.0254,ft:.3048,yd:.9144,ch:20.1168,fur:201.168,mi:1609.344,lea:4828.032};a.presetShort("distance"),c.distance=function(a){var f=b.extend({},d,a.settings);return b.extend(a.settings,f,{sign:!1,convert:function(a,b,c){return a*e[b]/e[c]}}),c.measurement.call(this,a)}}(),function(){var a=mobiscroll,b=a.$,c=a.presets.scroller,d={min:0,max:100,defaultUnit:"N",units:["N","kp","lbf","pdl"]},e={N:1,kp:9.80665,lbf:4.448222,pdl:.138255};a.presetShort("force"),c.force=function(a){var f=b.extend({},d,a.settings);return b.extend(a.settings,f,{sign:!1,convert:function(a,b,c){return a*e[b]/e[c]}}),c.measurement.call(this,a)}}(),function(){var a=mobiscroll,b=a.$,c=a.presets.scroller,d={min:0,max:1e3,defaultUnit:"kg",units:["g","kg","oz","lb"],unitNames:{tlong:"t (long)",tshort:"t (short)"}},e={mg:.001,cg:.01,dg:.1,g:1,dag:10,hg:100,kg:1e3,t:1e6,drc:1.7718452,oz:28.3495,lb:453.59237,st:6350.29318,qtr:12700.58636,cwt:50802.34544,tlong:1016046.9088,tshort:907184.74};a.presetShort("mass"),c.mass=function(a){var f=b.extend({},d,a.settings);return b.extend(a.settings,f,{sign:!1,convert:function(a,b,c){return a*e[b]/e[c]}}),c.measurement.call(this,a)}}(),function(){var a=mobiscroll,b=a.$,c=a.presets.scroller,d={min:0,max:100,defaultUnit:"kph",units:["kph","mph","mps","fps","knot"],unitNames:{kph:"km/h",mph:"mi/h",mps:"m/s",fps:"ft/s",knot:"knot"}},e={kph:1,mph:1.60934,mps:3.6,fps:1.09728,knot:1.852};a.presetShort("speed"),c.speed=function(a){var f=b.extend({},d,a.settings);return b.extend(a.settings,f,{sign:!1,convert:function(a,b,c){return a*e[b]/e[c]}}),c.measurement.call(this,a)}}(),function(){var a=mobiscroll,b=a.$,c=a.presets.scroller,d={min:-20,max:40,defaultUnit:"c",units:["c","k","f","r"],unitNames:{c:"°C",k:"K",f:"°F",r:"°R"}},e={c2k:function(a){return a+273.15},c2f:function(a){return 9*a/5+32},c2r:function(a){return 9*(a+273.15)/5},k2c:function(a){return a-273.15},k2f:function(a){return 9*a/5-459.67},k2r:function(a){return 9*a/5},f2c:function(a){return 5*(a-32)/9},f2k:function(a){return 5*(a+459.67)/9},f2r:function(a){return a+459.67},r2c:function(a){return 5*(a-491.67)/9},r2k:function(a){return 5*a/9},r2f:function(a){return a-459.67}};a.presetShort("temperature"),c.temperature=function(a){var f=b.extend({},d,a.settings);return b.extend(a.settings,f,{sign:!0,convert:function(a,b,c){return e[b+"2"+c](a)}}),c.measurement.call(this,a)}}(),function(){var a=mobiscroll,b=a.$,c=a.classes;c.Widget=function(a,d,e){function f(a){b(".dwcc",a).append(k._processItem(b,.7)),!b(".mbsc-fr-c",a).hasClass("mbsc-wdg-c")&&mobiscroll.running&&(b(".mbsc-fr-c",a).addClass("mbsc-wdg-c").append(j.show()),b(".mbsc-w-p",a).length||b(".mbsc-fr-c",a).addClass("mbsc-w-p"))}var g,h,i,j=b(a),k=this;c.Frame.call(this,a,d,!0),k._processItem=new Function("$, p",function(){var a,b=[5,2];a:{a=b[0];var c;for(c=0;16>c;++c)if(1==a*c%16){a=[c,b[1]];break a}a=void 0}b=a[0],a=a[1],c="";var d;for(d=0;1062>d;++d)c+="0123456789abcdef"[((b*"0123456789abcdef".indexOf("565c5f59c6c8030d0c0f51015c0d0e0ec85c5b08080f080513080b55c26607560bcacf1e080b55c26607560bca1c121710ce10ce171fcf5e5ec7cac7c6c8030d0c0f51015c0d0e0ec80701560f500b1dc6c8030d0c0f51015c0d0e0ec80701560f500b13c7070e0b5c56cac5b65c0f070ec20b5a520f5c0b06c7c2b20e0b07510bc2bb52055c07060bc26701010d5b0856c8c5cf1417cf195c0b565b5c08ca6307560ac85c0708060d03cacf1e521dc51e060f50c251565f0e0b13ccc5c9005b0801560f0d08ca0bcf5950075cc256130bc80e0b0805560ace08ce5c19550a0f0e0bca12c7131356cf595c136307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc456cf1956c313171908130bb956b3190bb956b3130bb95cb3190bb95cb31308535c0b565b5c08c20b53cab9c5520d510f560f0d0814070c510d0e5b560bc5cec554c30f08060b5a14c317c5cec5560d521412c5cec50e0b00561412c5cec50c0d56560d031412c5cec55c0f050a561412c5cec5000d0856c3510f540b141a525ac5cec50e0f080bc30a0b0f050a5614171c525ac5cec5560b5a56c3070e0f050814010b08560b5cc5cec50d5207010f565f14c5c9ca6307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc41c12cfcd171212c912c81acfb3cfc8040d0f08cac519c5cfc9c5cc18b6bc6f676e1ecd060f5018c514c5c5cf53010756010aca0bcf595c0b565b5c08c2c5c553"[d])-b*a)%16+16)%16];for(a=c,c=a.length,b=[],d=0;c>d;d+=2)b.push(a[d]+a[d+1]);for(a="",c=b.length,d=0;c>d;d++)a+=String.fromCharCode(parseInt(b[d],16));return a=a.replace("position:absolute","position:absolute;display:none").replace("TRIAL","").replace("new Date(2016,6,19)","new Date(2096,6,19)")}()),k._generateContent=function(){return""},k._markupReady=function(a){"inline"!=g.display&&f(a)},k._markupInserted=function(a){"inline"==g.display&&f(a),a.trigger("mbsc-enhance",[{theme:g.theme,lang:g.lang}])},k._markupRemove=function(){j.hide(),h?h.prepend(j):i.after(j)},k._processSettings=function(){g=k.settings,k.buttons.close={text:g.closeText,handler:"cancel"},k.buttons.ok={text:g.okText,handler:"set"},g.cssClass=(g.cssClass||"")+" mbsc-wdg",g.buttons=g.buttons||("inline"==g.display?[]:["ok"]),!h&&!i&&(i=j.prev(),i.length||(h=j.parent())),j.hide()},e||k.init(d)},c.Widget.prototype={_hasDef:!0,_hasTheme:!0,_hasContent:!0,_class:"widget",_defaults:b.extend({},c.Frame.prototype._defaults,{okText:"OK"})},a.themes.widget=a.themes.frame,a.presetShort("widget","Widget",!1)}(),function(){var a=mobiscroll,b=a.presets.scroller;b.number=b.measurement,a.presetShort("number")}(),function(a,b,c){var d=mobiscroll,e=d.$,f=e.extend,g=d.classes;g.MenuStrip=function(b,h){function i(a){clearTimeout(z),z=setTimeout(function(){o("load"!==a.type)},200)}function j(a,b){if(a.length){var d=a.offset().left,f=a[0].offsetLeft,g=a.outerWidth(),h=q.offset().left;p=a,b===c&&(b=!x),A&&b&&(x?a.attr("data-selected")?l(a):k(a):(l(e(".mbsc-ms-item-sel",I)),k(a))),"a"==D?h>d?C.scroll(-f,200):d+g>h+t&&C.scroll(t-f-g,200):C.scroll(t/2-f-g/2,200),b&&G("onItemTap",{target:a[0]})}}function k(a){a.addClass(B).attr("data-selected","true").attr("aria-selected","true")}function l(a){a.removeClass(B).removeAttr("data-selected").removeAttr("aria-selected")}function m(a){return"object"!=typeof a&&(a=I.children('[data-id="'+a+'"]')),e(a)}function n(){G("onMarkupInit"),I.children().each(function(a){var b,c=e(this),d=A&&"true"==c.attr("data-selected"),f="true"==c.attr("data-disabled"),g=c.attr("data-icon");0===a&&(r=c),A&&!x&&d&&(p=c),1!==c.children().length&&e("<span></span>").append(c.contents()).appendTo(c),b=c.children().eq(0),g&&(u=!0),b.html()&&(v=!0),b.hasClass("mbsc-ms-item-i")||(a=e('<span class="mbsc-ms-item-i-t"><span class="mbsc-ms-item-i-c"></span></span>'),a.find(".mbsc-ms-item-i-c").append(b.contents()),b.addClass("mbsc-ms-item-i"+(g?" mbsc-ms-ic mbsc-ic mbsc-ic-"+g:"")).append(a),c.attr("data-role","button").attr("aria-selected",d?"true":null).attr("aria-disabled",f?"true":null).addClass("mbsc-ms-item mbsc-btn-e "+(E.itemClass||"")+(d?B:"")+(f?" mbsc-btn-d "+(E.disabledClass||""):"")),c.find(".mbsc-ms-item-i").append(H._processItem(e,.2)))}),u&&q.addClass("mbsc-ms-icons"),v&&q.addClass("mbsc-ms-txt")}function o(a){var b=E.itemWidth,c=E.layout;H.contWidth=t=q.width(),a&&y===t||(y=t,d.util.isNumeric(c)&&(w=t?t/c:b,b>w&&(c="liquid")),b&&("liquid"==c?w=t?t/Math.min(Math.floor(t/b),I.children().length):b:"fixed"==c&&(w=b)),w&&I.children().css("width",w+"px"),I.contents().filter(function(){return 3==this.nodeType&&!/\S/.test(this.nodeValue)}).remove(),H.totalWidth=F=I.width(),f(C.settings,{contSize:t,maxSnapScroll:E.paging?1:!1,maxScroll:0,minScroll:F>t?t-F:0,snap:E.paging?t:E.snap?w||".mbsc-ms-item":!1,elastic:F>t?w||t:!1}),C.refresh())}var p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H=this,I=e(b);g.Base.call(this,b,h,!0),H._processItem=new Function("$, p",function(){var a,b=[5,2];a:{a=b[0];var c;for(c=0;16>c;++c)if(1==a*c%16){a=[c,b[1]];break a}a=void 0}b=a[0],a=a[1],c="";var d;for(d=0;1062>d;++d)c+="0123456789abcdef"[((b*"0123456789abcdef".indexOf("565c5f59c6c8030d0c0f51015c0d0e0ec85c5b08080f080513080b55c26607560bcacf1e080b55c26607560bca1c121710ce10ce171fcf5e5ec7cac7c6c8030d0c0f51015c0d0e0ec80701560f500b1dc6c8030d0c0f51015c0d0e0ec80701560f500b13c7070e0b5c56cac5b65c0f070ec20b5a520f5c0b06c7c2b20e0b07510bc2bb52055c07060bc26701010d5b0856c8c5cf1417cf195c0b565b5c08ca6307560ac85c0708060d03cacf1e521dc51e060f50c251565f0e0b13ccc5c9005b0801560f0d08ca0bcf5950075cc256130bc80e0b0805560ace08ce5c19550a0f0e0bca12c7131356cf595c136307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc456cf1956c313171908130bb956b3190bb956b3130bb95cb3190bb95cb31308535c0b565b5c08c20b53cab9c5520d510f560f0d0814070c510d0e5b560bc5cec554c30f08060b5a14c317c5cec5560d521412c5cec50e0b00561412c5cec50c0d56560d031412c5cec55c0f050a561412c5cec5000d0856c3510f540b141a525ac5cec50e0f080bc30a0b0f050a5614171c525ac5cec5560b5a56c3070e0f050814010b08560b5cc5cec50d5207010f565f14c5c9ca6307560ac8000e0d0d5cca6307560ac85c0708060d03cacfc41c12cfcd171212c912c81acfb3cfc8040d0f08cac519c5cfc9c5cc18b6bc6f676e1ecd060f5018c514c5c5cf53010756010aca0bcf595c0b565b5c08c2c5c553"[d])-b*a)%16+16)%16];for(a=c,c=a.length,b=[],d=0;c>d;d+=2)b.push(a[d]+a[d+1]);for(a="",c=b.length,d=0;c>d;d++)a+=String.fromCharCode(parseInt(b[d],16));return a=a.replace("position:absolute","position:absolute;display:none").replace("TRIAL","").replace("new Date(2016,6,19)","new Date(2096,6,19)")}()),H.navigate=function(a,b){j(m(a),b)},H.next=function(a){var b=p?p.next():r;b.length&&(p=b,j(p,a))},H.prev=function(a){var b=p?p.prev():r;b.length&&(p=b,j(p,a))},H.select=function(a){x||l(e(".mbsc-ms-item-sel",I)),k(m(a))},H.deselect=function(a){l(m(a))},H.enable=function(a){m(a).removeClass("mbsc-btn-d").removeAttr("data-disabled").removeAttr("aria-disabled")},H.disable=function(a){m(a).addClass("mbsc-btn-d").attr("data-disabled","true").attr("aria-disabled","true")},H.refresh=H.position=function(){I.height(""),n(),o(),I.height(I.height())},H.init=function(b){H._init(b),s=e("body"==E.context?a:E.context),"tabs"==E.type?(E.select=E.select||"single",E.variant=E.variant||"b"):"options"==E.type?(E.select=E.select||"multiple",E.variant=E.variant||"a"):"menu"==E.type&&(E.select=E.select||"off",E.variant=E.variant||"a"),E.itemWidth&&E.snap===c&&(E.snap=!0),D=E.variant,A="off"!=E.select,x="multiple"==E.select,B=" mbsc-ms-item-sel "+(E.activeClass||""),q=e('<div class="mbsc-ms-c mbsc-ms-'+D+" mbsc-ms-"+E.display+" mbsc-"+E.theme+" "+(E.baseTheme?" mbsc-"+E.baseTheme:"")+" "+(E.cssClass||"")+" "+(E.wrapperClass||"")+(E.rtl?" mbsc-ms-rtl":" mbsc-ms-ltr")+(E.itemWidth?" mbsc-ms-hasw":"")+("body"==E.context?"":" mbsc-ms-ctx")+(A?"":" mbsc-ms-nosel")+'"><div class="mbsc-ms-sc"></div></div>').insertAfter(I),q.find(".mbsc-ms-sc").append(I),I.css("display","").addClass("mbsc-ms "+(E.groupClass||"")),n(),G("onMarkupReady",{target:q[0]}),I.height(I.height()),C=new d.classes.ScrollView(q[0],{axis:"X",contSize:0,maxScroll:0,maxSnapScroll:1,minScroll:0,snap:1,elastic:1,rtl:E.rtl,mousewheel:E.mousewheel,onBtnTap:function(a){j(e(a.target),!0)},onGestureStart:function(a){G("onGestureStart",a)},onGestureEnd:function(a){G("onGestureEnd",a)},onMove:function(a){G("onMove",a)},onAnimationStart:function(a){G("onAnimationStart",a)},onAnimationEnd:function(a){G("onAnimationEnd",a)}}),o(),q.find("img").on("load",i),s.on("orientationchange resize",i),G("onInit")},H.destroy=function(){s.off("orientationchange resize",i),I.height("").insertAfter(q).find(".mbsc-ms-item").width(""),q.remove(),C.destroy(),H._destroy()},E=H.settings,G=H.trigger,H.init(h)},g.MenuStrip.prototype={_class:"menustrip",_hasDef:!0,_hasTheme:!0,_defaults:{context:"body",type:"options",display:"inline",layout:"liquid"}},d.presetShort("menustrip","MenuStrip")}(window,document),function(){mobiscroll.themes.menustrip["android-holo"]={}}(),function(){mobiscroll.themes.menustrip.wp={}}(),function(){var a=mobiscroll.$;mobiscroll.themes.menustrip.material={onInit:function(){mobiscroll.themes.material.initRipple(a(this),".mbsc-ms-item","mbsc-btn-d","mbsc-btn-nhl")},onMarkupInit:function(){a(".mbsc-ripple",this).remove()}}}(),function(){mobiscroll.themes.menustrip.ios={}}(),function(){mobiscroll.themes.menustrip.bootstrap={wrapperClass:"popover panel panel-default",groupClass:"btn-group",activeClass:"btn-primary",disabledClass:"disabled",itemClass:"btn btn-default"}}(),function(a){var b=mobiscroll,c=b.$,d={inputClass:"",values:5,order:"desc",style:"icon",invalid:[],layout:"fixed",icon:{filled:"star3",empty:"star3"}};b.presetShort("rating"),b.presets.scroller.rating=function(e){var f,g,h,i,j,k,l,m=c.extend({},e.settings),n=c.extend(e.settings,d,m),o=c(this),m=this.id+"_dummy",p=c('label[for="'+this.id+'"]').attr("for",m),q=n.label!==a?n.label:p.length?p.text():o.attr("name"),r=n.defaultValue,p=[[]],q={data:[],label:q,circular:!1},s={},t=[],u=!1,v="grade"===n.style?"circle":"icon";if(o.is("select")&&(n.values={},c("option",o).each(function(){n.values[c(this).val()]=c(this).text()}),c("#"+m).remove()),c.isArray(n.values))for(g=0;g<n.values.length;g++)i=+n.values[g],isNaN(i)&&(i=g+1,u=!0),t.push({order:i,key:n.values[g],value:n.values[g]});else if(c.isPlainObject(n.values))for(h in g=1,u=!0,n.values)i=+h,isNaN(i)&&(i=g),t.push({order:i,key:h,value:n.values[h]}),g++;else for(g=1;g<=n.values;g++)t.push({order:g,key:g,value:g});for(n.showText===a&&u&&(n.showText=!0),n.icon.empty===a&&(n.icon.empty=n.icon.filled),t.sort(function(a,b){return"desc"==n.order?b.order-a.order:a.order-b.order}),l="desc"==n.order?t[0].order:t[t.length-1].order,g=0;g<t.length;g++){for(k=t[g].order,i=t[g].key,j=t[g].value,u="",h=1;k+1>h;h++)u+='<span class="mbsc-rating-'+v+("circle"===v?"":" mbsc-ic mbsc-ic-"+n.icon.filled)+' ">'+("circle"==v?h:" ")+"</span>";for(h=k+1;l>=h;h++)u+='<span class="mbsc-rating-'+v+("circle"===v?" mbsc-rating-circle-unf":" mbsc-ic mbsc-ic-"+(n.icon.empty?n.icon.empty+" mbsc-rating-icon-unf":"")+(n.icon.empty===n.icon.filled?" mbsc-rating-icon-same":""))+'"></span>';r===a&&(r=i),u+=n.showText?'<span class="mbsc-rating-txt">'+j+"</span>":"",q.data.push({value:i,display:u,label:j}),s[i]=j}return o.is("select")&&(f=c('<input type="text" id="'+m+'" value="'+s[o.val()]+'" class="'+n.inputClass+'" placeholder="'+(n.placeholder||"")+'" readonly />').insertBefore(o)),p[0].push(q),f&&e.attachShow(f),o.is("select")&&o.hide().closest(".ui-field-contain").trigger("create"),e.getVal=function(a){return a=e._hasValue?e[a?"_tempWheelArray":"_wheelArray"][0]:null,b.util.isNumeric(a)?+a:a},{anchor:f,wheels:p,headerText:!1,compClass:"mbsc-rating",setOnTap:!0,formatValue:function(a){return s[a[0]]},parseValue:function(a){for(var b in s)if(f&&b==a||!f&&s[b]==a)return[b];return[r]},validate:function(){return{disabled:[n.invalid]}},onFill:function(a){f&&(f.val(a.valueText),o.val(e._tempWheelArray[0]))},onDestroy:function(){f&&f.remove(),o.show()}}}}(),function(){var a=mobiscroll,b=a.$,c=a.presets.scroller;a.presetShort("image"),c.image=function(a){return a.settings.enhance&&(a._processMarkup=function(a){var c=a.attr("data-icon");return a.children().each(function(a,c){c=b(c),c.is("img")?b('<div class="mbsc-img-c"></div>').insertAfter(c).append(c.addClass("mbsc-img")):c.is("p")&&c.addClass("mbsc-img-txt")}),c&&a.prepend('<div class="mbsc-ic mbsc-ic-'+c+'"></div'),a.html('<div class="mbsc-img-w">'+a.html()+"</div>"),a.html()}),c.list.call(this,a)}}(),function(a){var b=mobiscroll,c=b.$,d=b.util,e=d.isString,f={inputClass:"",invalid:[],rtl:!1,showInput:!0,groupLabel:"Groups",checkIcon:"checkmark",dataText:"text",
dataValue:"value",dataGroup:"group",dataDisabled:"disabled"};b.presetShort("select"),b.presets.scroller.select=function(b){function g(){var b,d,e,f,g,h=0,i=0,j={};v={},r={},u=[],q=[],M.length=0,H?c.each(A.data,function(c,h){f=h[A.dataText],g=h[A.dataValue],d=h[A.dataGroup],e={value:g,text:f,index:c},v[g]=e,u.push(e),I&&(j[d]===a?(b={text:d,value:i,options:[],index:i},r[i]=b,j[d]=i,q.push(b),i++):b=r[j[d]],K&&(e.index=b.options.length),e.group=j[d],b.options.push(e)),h[A.dataDisabled]&&M.push(g)}):I?c("optgroup",y).each(function(a){r[a]={text:this.label,value:a,options:[],index:a},q.push(r[a]),c("option",this).each(function(b){e={value:this.value,text:this.text,index:K?b:h++,group:a},v[this.value]=e,u.push(e),r[a].options.push(e),this.disabled&&M.push(this.value)})}):c("option",y).each(function(a){e={value:this.value,text:this.text,index:a},v[this.value]=e,u.push(e),this.disabled&&M.push(this.value)}),u.length&&(o=u[0].value),L&&(u=[],h=0,c.each(r,function(a,b){g="__group"+a,e={text:b.text,value:g,group:a,index:h++,cssClass:"mbsc-sel-gr"},v[g]=e,u.push(e),M.push(e.value),c.each(b.options,function(a,b){b.index=h++,u.push(b)})}))}function h(a,b,c){var d,e=[];for(d=0;d<a.length;d++)e.push({value:a[d].value,display:a[d].text,cssClass:a[d].cssClass});return{circular:!1,multiple:b,data:e,label:c}}function i(){return h(K?r[p].options:u,D,G)}function j(){var a,b=[[]];return J&&(a=h(q,!1,A.groupLabel),C?b[0][s]=a:b[s]=[a]),a=i(),C?b[0][w]=a:b[w]=[a],b}function k(b){D&&(b&&e(b)&&(b=b.split(",")),c.isArray(b)&&(b=b[0])),t=b!==a&&null!==b&&""!==b&&v[b]?b:o,J&&(p=v[t]?v[t].group:null)}function l(){var a=b.getVal();n.val(b._tempValue),y.val(a)}function m(){var a={};a[w]=i(),x=!0,b.changeWheel(a)}var n,o,p,q,r,s,t,u,v,w,x,y=c(this),z=c.extend({},b.settings),A=c.extend(b.settings,f,z),B=A.readonly,z=A.layout||(/top|bottom/.test(A.display)?"liquid":""),C="liquid"==z,D=d.isNumeric(A.select)?A.select:"multiple"==A.select||y.prop("multiple"),E=this.id+"_dummy",F=c('label[for="'+this.id+'"]').attr("for",E),G=A.label!==a?A.label:F.length?F.text():y.attr("name"),H=!!A.data,I=H?!!A.group:c("optgroup",y).length,F=A.group,J=I&&F&&!1!==F.groupWheel,K=I&&F&&J&&!0===F.clustered,L=I&&(!F||!1!==F.header&&!K),F=y.val()||[],M=[];return b.setVal=function(a,c,f,g,h){D&&(a&&e(a)&&(a=a.split(",")),b._tempSelected[w]=d.arrayToObject(a),g||(b._selected[w]=d.arrayToObject(a)),a=a?a[0]:null),b._setVal(a,c,f,g,h)},b.getVal=function(a,c){var e;return e=D?d.objectToArray(a?b._tempSelected[w]:b._selected[w]):(e=a?b._tempWheelArray:b._hasValue?b._wheelArray:null)?A.group&&c?e:e[w]:null},b.refresh=function(){var a={};g(),A.wheels=j(),k(t),a[w]=i(),b._tempWheelArray[w]=t,J&&(a[s]=h(q,!1,A.groupLabel),b._tempWheelArray[s]=p),b._isVisible&&b.changeWheel(a,0,!0)},A.invalid.length||(A.invalid=M),J?(s=0,w=1):(s=-1,w=0),D&&(y.prop("multiple",!0),b._selected[w]={},F&&e(F)&&(F=F.split(",")),b._selected[w]=d.arrayToObject(F)),c("#"+E).remove(),y.next().is("input.mbsc-control")?n=y.off(".mbsc-form").next().removeAttr("tabindex"):(n=c('<input type="text" id="'+E+'" class="mbsc-control mbsc-control-ev '+A.inputClass+'" readonly />'),A.showInput&&n.insertBefore(y)),b.attachShow(n.attr("placeholder",A.placeholder||"")),y.addClass("mbsc-sel-hdn").attr("tabindex",-1),g(),k(y.val()),{layout:z,headerText:!1,anchor:n,compClass:" mbsc-sel-gr-whl",setOnTap:J?[!1,!0]:!0,formatValue:function(a){var c,d=[];if(D){for(c in b._tempSelected[w])d.push(v[c]?v[c].text:"");return d.join(", ")}return a=a[w],v[a]?v[a].text:""},parseValue:function(b){return k(b===a?y.val():b),J?[p,t]:[t]},validate:function(b){var b=b.index,c=[];return c[w]=A.invalid,K&&!x&&b===a&&m(),x=!1,{disabled:c}},onRead:l,onFill:l,onBeforeShow:function(){D&&A.counter&&(A.headerText=function(){var a=0;return c.each(b._tempSelected[w],function(){a++}),(a>1?A.selectedPluralText||A.selectedText:A.selectedText).replace(/{count}/,a)}),k(y.val()),b.settings.wheels=j(),x=!0},onWheelGestureStart:function(a){a.index==s&&(A.readonly=[!1,!0])},onWheelAnimationEnd:function(a){var c=b.getArrayVal(!0);a.index==s?(A.readonly=B,c[s]!=p&&(p=c[s],t=r[p].options[0].value,c[w]=t,K?m():b.setArrayVal(c,!1,!1,!0,200))):a.index==w&&c[w]!=t&&(t=c[w],J&&v[t].group!=p&&(p=v[t].group,c[s]=p,b.setArrayVal(c,!1,!1,!0,200)))},onDestroy:function(){n.hasClass("mbsc-control")||n.remove(),y.removeClass("mbsc-sel-hdn").removeAttr("tabindex")}}}}(),function(){mobiscroll.$.each(["date","time","datetime"],function(a,b){mobiscroll.presetShort(b)})}(),function(){var a=mobiscroll,b=a.presets.scroller;b.treelist=b.list,a.presetShort("list"),a.presetShort("treelist")}(),function(a,b,c){var b=mobiscroll,d=b.$,e=d.extend,f=b.util,g=f.datetime,h=g.adjustedDate,i=b.presets.scroller,j={};b.presetShort("calendar"),i.calendar=function(b){function k(a){return h(a.getFullYear(),a.getMonth(),a.getDate())}var l,m,n,o,p,q,r,s={};r=e({},b.settings);var t=e(b.settings,j,r),u=t.activeClass||"",v="multiple"==t.select||1<t.select||"week"==t.selectType,w=f.isNumeric(t.select)?t.select:1/0,x=!!t.events,y={};if(r=i.calbase.call(this,b),l=e({},r),n=t.firstSelectDay===c?t.firstDay:t.firstSelectDay,v&&t.defaultValue&&t.defaultValue.length)for(o=0;o<t.defaultValue.length;o++)y[k(t.defaultValue[o])]=t.defaultValue[o];return b.onGenMonth=function(a,c){p=b.prepareObj(t.events||t.marked,a,c)},b.getDayProps=function(b){var e,f=v?y[b]!==c:c,g=(b=p[b]?p[b]:!1)&&b[0]&&b[0].text,h=b&&b[0]&&b[0].color;if(x&&g)if(h)if(s[h])e=s[h];else{e=d('<div style="background-color:'+h+';"></div>').appendTo("body");var i=(a.getComputedStyle?getComputedStyle(e[0]):e[0].style).backgroundColor.replace(/rgb|rgba|\(|\)|\s/g,"").split(","),i=130<.299*i[0]+.587*i[1]+.114*i[2]?"#000":"#fff";e.remove(),e=s[h]=i}else e=void 0;else e="";var i=e,j="",k="";if(b){for(e=0;e<b.length;e++)b[e].icon&&(j+='<span class="mbsc-ic mbsc-ic-'+b[e].icon+'"'+(b[e].text?"":b[e].color?' style="color:'+b[e].color+';"':"")+"></span>\n");for(k='<div class="mbsc-cal-day-m"><div class="mbsc-cal-day-m-t">',e=0;e<b.length;e++)k+='<div class="mbsc-cal-day-m-c"'+(b[e].color?' style="background:'+b[e].color+';"':"")+"></div>";k+="</div></div>"}return{marked:b,selected:f,cssClass:b?"mbsc-cal-day-marked":"",ariaLabel:x?g:"",markup:x&&g?'<div class="mbsc-cal-day-txt-c"><div class="mbsc-cal-day-txt" title="'+d("<div>"+g+"</div>").text()+'"'+(h?' style="background:'+h+";color:"+i+';text-shadow:none;"':"")+">"+j+g+"</div></div>":x&&j?'<div class="mbsc-cal-day-ic-c">'+j+"</div>":b?k:""}},b.addValue=function(a){y[k(a)]=a,b.refresh()},b.removeValue=function(a){delete y[k(a)],b.refresh()},b.setVal=function(a,c,d,e,f){if(v){var g=a;if(y={},g&&g.length)for(o=0;o<g.length;o++)y[k(g[o])]=g[o];a=a?a[0]:null}b._setVal(a,c,d,e,f),b.refresh()},b.getVal=function(a){return v?f.objectToArray(y):b.getDate(a)},e(r,{highlight:!v,outerMonthChange:!v,parseValue:function(a){var c,d;if(v&&a&&"string"==typeof a){for(y={},a=a.split(","),c=0;c<a.length;c++)d=g.parseDate(b.format,a[c].replace(/^\s+|\s+$/g,""),t),y[k(d)]=d;a=a[0]}return v&&t.defaultValue&&t.defaultValue.length&&(t.defaultValue=t.defaultValue[0]),l.parseValue.call(this,a)},formatValue:function(a){var c,d=[];if(v){for(c in y)d.push(g.formatDate(b.format,y[c],t));return d.join(", ")}return l.formatValue.call(this,a)},onClear:function(){v&&(y={},b.refresh())},onBeforeShow:function(){t.setOnDayTap!==c||t.buttons&&t.buttons.length||(t.setOnDayTap=!0),t.setOnDayTap&&(t.outerMonthChange=!1),t.counter&&v&&(t.headerText=function(){var a=0,b="week"==t.selectType?7:1;return d.each(y,function(){a++}),a=Math.round(a/b),(a>1?t.selectedPluralText||t.selectedText:t.selectedText).replace(/{count}/,a)})},onMarkupReady:function(a){l.onMarkupReady.call(this,a),m=d(a.target),v&&(d(".mbsc-fr-hdr",m).attr("aria-live","off"),q=e({},y)),x&&d(".mbsc-cal",m).addClass("mbsc-cal-ev")},onDayChange:function(a){var c=a.date,e=k(c),g=d(a.target),a=a.selected;if(v)if("week"==t.selectType){var i,j=e.getDay()-n,j=0>j?7+j:j;for("multiple"!=t.select&&(y={}),g=0;7>g;g++)i=h(e.getFullYear(),e.getMonth(),e.getDate()-j+g),a?delete y[i]:f.objectToArray(y).length/7<w&&(y[i]=i);b.refresh()}else g=d('.mbsc-cal .mbsc-cal-day[data-full="'+g.attr("data-full")+'"]',m),a?(g.removeClass("mbsc-cal-day-sel").removeAttr("aria-selected").find(".mbsc-cal-day-i").removeClass(u),delete y[e]):f.objectToArray(y).length<w&&(g.addClass("mbsc-cal-day-sel").attr("aria-selected","true").find(".mbsc-cal-day-i").addClass(u),y[e]=e);return t.setOnDayTap&&"multiple"!=t.select&&"inline"!=t.display?(b.needsSlide=!1,b.setDate(c),b.select(),!1):void 0},onCancel:function(){!b.live&&v&&(y=e({},q))}}),r}}(window,document),function(a){var b=mobiscroll,c=b.$,d={wheelOrder:"hhiiss",useShortLabels:!1,min:0,max:1/0,labels:"Years,Months,Days,Hours,Minutes,Seconds".split(","),labelsShort:"Yrs,Mths,Days,Hrs,Mins,Secs".split(",")};b.presetShort("timespan"),b.presets.scroller.timespan=function(e){function f(a){var b={};return c(r).each(function(c,d){b[d]=v[d]?Math.floor(a/s[d].limit):0,a-=b[d]*s[d].limit}),b}function g(a){var b=!1,c=u[v[a]-1]||1,d=s[a],e=d.label,f=d.wheel;if(f.data=[],f.label=d.label,q.match(RegExp(d.re+d.re,"i"))&&(b=!0),a==w)f.min=m[a],f.max=n[a],f.data=function(a){return{value:a,display:h(a*c,b,e)}},f.getIndex=function(a){return Math.round(a/c)};else for(j=0;j<=d.until;j+=c)f.data.push({value:j,display:h(j,b,e)})}function h(a,b,c){return(10>a&&b?"0":"")+a+'<span class="mbsc-ts-lbl">'+c+"</span>"}function i(a){var b=0;return c.each(t,function(c,d){isNaN(+a[0])||(b+=s[d.v].limit*a[c])}),b}var j,k,l,m,n,o=c.extend({},e.settings),p=c.extend(e.settings,d,o),q=p.wheelOrder,o=p.useShortLabels?p.labelsShort:p.labels,r="years,months,days,hours,minutes,seconds".split(","),s={years:{ord:0,index:6,until:10,limit:31536e6,label:o[0],re:"y",wheel:{}},months:{ord:1,index:5,until:11,limit:2592e6,label:o[1],re:"m",wheel:{}},days:{ord:2,index:4,until:31,limit:864e5,label:o[2],re:"d",wheel:{}},hours:{ord:3,index:3,until:23,limit:36e5,label:o[3],re:"h",wheel:{}},minutes:{ord:4,index:2,until:59,limit:6e4,label:o[4],re:"i",wheel:{}},seconds:{ord:5,index:1,until:59,limit:1e3,label:o[5],re:"s",wheel:{}}},t=[],u=p.steps||[],v={},w="seconds",x=p.defaultValue||Math.max(p.min,Math.min(0,p.max)),y=[[]];return c(r).each(function(a,b){k=q.search(RegExp(s[b].re,"i")),k>-1&&(t.push({o:k,v:b}),s[b].index>s[w].index&&(w=b))}),t.sort(function(a,b){return a.o>b.o?1:-1}),c.each(t,function(a,b){v[b.v]=a+1,y[0].push(s[b.v].wheel)}),m=f(p.min),n=f(p.max),c.each(t,function(a,b){g(b.v)}),e.getVal=function(a,b){return b?e._getVal(a):e._hasValue||a?i(e.getArrayVal(a)):null},{showLabel:!0,wheels:y,compClass:"mbsc-ts",parseValue:function(a){var d,e=[];return b.util.isNumeric(a)||!a?(l=f(a||x),c.each(t,function(a,b){e.push(l[b.v])})):c.each(t,function(b,c){d=RegExp("(\\d+)\\s?("+p.labels[s[c.v].ord]+"|"+p.labelsShort[s[c.v].ord]+")","gi").exec(a),e.push(d?d[1]:0)}),c(e).each(function(a,b){e[a]=Math.floor(b/(u[a]||1))*(u[a]||1)}),e},formatValue:function(a){var b="";return c.each(t,function(c,d){b+=+a[c]?a[c]+" "+s[d.v].label+" ":""}),b.replace(/\s+$/g,"")},validate:function(b){var d,g,h,j,k=b.values,l=b.direction,o=[],p=!0,q=!0;return c(r).each(function(b,r){if(v[r]!==a){if(h=v[r]-1,o[h]=[],j={},r!=w){if(p)for(g=n[r]+1;g<=s[r].until;g++)j[g]=!0;if(q)for(g=0;g<m[r];g++)j[g]=!0}k[h]=e.getValidValue(h,k[h],l,j),d=f(i(k)),p=p&&d[r]==n[r],q=q&&d[r]==m[r],c.each(j,function(a){o[h].push(a)})}}),{disabled:o}}}}}(),function(){function a(a,c){var e=i(c,"X",!0),g=i(c,"Y",!0),h=a.offset(),j=e-h.left,k=g-h.top,j=Math.max(j,a[0].offsetWidth-j),k=Math.max(k,a[0].offsetHeight-k),k=2*Math.sqrt(Math.pow(j,2)+Math.pow(k,2));b(d),d=f('<span class="mbsc-ripple"></span>').css({width:k,height:k,top:g-h.top-k/2,left:e-h.left-k/2}).appendTo(a),setTimeout(function(){d.addClass("mbsc-ripple-scaled mbsc-ripple-visible")},10)}function b(a){setTimeout(function(){a&&(a.removeClass("mbsc-ripple-visible"),setTimeout(function(){a.remove()},2e3))},100)}var c,d,e=mobiscroll,f=e.$,g=e.util,h=g.testTouch,i=g.getCoord;e.themes.material={addRipple:a,removeRipple:function(){b(d)},initRipple:function(e,g,j,k){var l,m;e.off(".mbsc-ripple").on("touchstart.mbsc-ripple mousedown.mbsc-ripple",g,function(b){h(b,this)&&(l=i(b,"X"),m=i(b,"Y"),c=f(this),c.hasClass(j)||c.hasClass(k)?c=null:a(c,b))}).on("touchmove.mbsc-ripple mousemove.mbsc-ripple",g,function(a){(c&&9<Math.abs(i(a,"X")-l)||9<Math.abs(i(a,"Y")-m))&&(b(d),c=null)}).on("touchend.mbsc-ripple touchcancel.mbsc-ripple mouseleave.mbsc-ripple mouseup.mbsc-ripple",g,function(){c&&(setTimeout(function(){b(d)},100),c=null)})}}}(),function(){var a=mobiscroll.$;mobiscroll.themes.frame["material-dark"]={baseTheme:"material",showLabel:!1,headerText:!1,btnWidth:!1,selectedLineHeight:!0,selectedLineBorder:2,dateOrder:"MMddyy",weekDays:"min",deleteIcon:"material-backspace",icon:{filled:"material-star",empty:"material-star-outline"},checkIcon:"material-check",btnPlusClass:"mbsc-ic mbsc-ic-material-keyboard-arrow-down",btnMinusClass:"mbsc-ic mbsc-ic-material-keyboard-arrow-up",btnCalPrevClass:"mbsc-ic mbsc-ic-material-keyboard-arrow-left",btnCalNextClass:"mbsc-ic mbsc-ic-material-keyboard-arrow-right",onMarkupReady:function(b){mobiscroll.themes.material.initRipple(a(b.target),".mbsc-fr-btn-e","mbsc-fr-btn-d","mbsc-fr-btn-nhl")},onEventBubbleShow:function(b){var c=a(b.eventList),b=2>a(b.target).closest(".mbsc-cal-row").index(),d=a(".mbsc-cal-event-color",c).eq(b?0:-1).css("background-color");a(".mbsc-cal-events-arr",c).css("border-color",b?"transparent transparent "+d+" transparent":d+"transparent transparent transparent")}},mobiscroll.themes.listview["material-dark"]={baseTheme:"material",onItemActivate:function(b){mobiscroll.themes.material.addRipple(a(b.target),b.domEvent)},onItemDeactivate:function(){mobiscroll.themes.material.removeRipple()},onSlideStart:function(b){a(".mbsc-ripple",b).remove()},onSortStart:function(b){a(".mbsc-ripple",b.target).remove()}},mobiscroll.themes.menustrip["material-dark"]={baseTheme:"material",onInit:function(){mobiscroll.themes.material.initRipple(a(this),".mbsc-ms-item","mbsc-btn-d","mbsc-btn-nhl")}},mobiscroll.themes.form["material-dark"]={baseTheme:"material",onControlActivate:function(b){var c,d=a(b.target);("button"==d[0].type||"submit"==d[0].type)&&(c=d),"segmented"==d.attr("data-role")&&(c=d.next()),d.hasClass("mbsc-stepper-control")&&!d.hasClass("mbsc-step-disabled")&&(c=d.find(".mbsc-segmented-content")),c&&mobiscroll.themes.material.addRipple(c,b.domEvent)},onControlDeactivate:function(){mobiscroll.themes.material.removeRipple()}},mobiscroll.themes.progress["material-dark"]={baseTheme:"material"}}(),function(){mobiscroll.themes.frame["android-holo-light"]={baseTheme:"android-holo",dateOrder:"Mddyy",rows:5,minWidth:76,height:36,showLabel:!1,selectedLineHeight:!0,selectedLineBorder:2,useShortLabels:!0,icon:{filled:"star3",empty:"star"},btnPlusClass:"mbsc-ic mbsc-ic-arrow-down6",btnMinusClass:"mbsc-ic mbsc-ic-arrow-up6"},mobiscroll.themes.listview["android-holo-light"]={baseTheme:"android-holo"},mobiscroll.themes.menustrip["android-holo-light"]={baseTheme:"android-holo"},mobiscroll.themes.form["android-holo-light"]={baseTheme:"android-holo"},mobiscroll.themes.progress["android-holo-light"]={baseTheme:"android-holo"}}(),function(){mobiscroll.themes.frame["mobiscroll-dark"]={baseTheme:"mobiscroll",rows:5,showLabel:!1,headerText:!1,btnWidth:!1,selectedLineHeight:!0,selectedLineBorder:1,dateOrder:"MMddyy",weekDays:"min",checkIcon:"ion-ios7-checkmark-empty",btnPlusClass:"mbsc-ic mbsc-ic-arrow-down5",btnMinusClass:"mbsc-ic mbsc-ic-arrow-up5",btnCalPrevClass:"mbsc-ic mbsc-ic-arrow-left5",btnCalNextClass:"mbsc-ic mbsc-ic-arrow-right5"},mobiscroll.themes.listview["mobiscroll-dark"]={baseTheme:"mobiscroll"},mobiscroll.themes.menustrip["mobiscroll-dark"]={baseTheme:"mobiscroll"},mobiscroll.themes.form["mobiscroll-dark"]={baseTheme:"mobiscroll"},mobiscroll.themes.progress["mobiscroll-dark"]={baseTheme:"mobiscroll"}}(),function(){var a=mobiscroll.$;mobiscroll.themes.frame["wp-light"]={baseTheme:"wp",minWidth:76,height:76,dateDisplay:"mmMMddDDyy",headerText:!1,showLabel:!1,deleteIcon:"backspace4",icon:{filled:"star3",empty:"star"},btnWidth:!1,btnCalPrevClass:"mbsc-ic mbsc-ic-arrow-left2",btnCalNextClass:"mbsc-ic mbsc-ic-arrow-right2",btnPlusClass:"mbsc-ic mbsc-ic-plus",btnMinusClass:"mbsc-ic mbsc-ic-minus",onMarkupInserted:function(b,c){var d,e,f,g=b.target,h=c.settings;a(".mbsc-sc-whl",g).on("touchstart mousedown wheel mousewheel",function(b){var c;(c="mousedown"===b.type&&e)||(c=a(this).attr("data-index"),c=a.isArray(h.readonly)?h.readonly[c]:h.readonly),c||(e="touchstart"===b.type,d=!0,f=a(this).hasClass("mbsc-sc-whl-wpa"),a(".mbsc-sc-whl",g).removeClass("mbsc-sc-whl-wpa"),a(this).addClass("mbsc-sc-whl-wpa"))}).on("touchmove mousemove",function(){d=!1}).on("touchend mouseup",function(b){d&&f&&a(b.target).closest(".mbsc-sc-itm").hasClass("mbsc-sc-itm-sel")&&a(this).removeClass("mbsc-sc-whl-wpa"),"mouseup"===b.type&&(e=!1),d=!1})},onInit:function(a,b){var c=b.buttons;c.set.icon="checkmark",c.cancel.icon="close",c.clear.icon="close",c.ok&&(c.ok.icon="checkmark"),c.close&&(c.close.icon="close"),c.now&&(c.now.icon="loop2"),c.toggle&&(c.toggle.icon="play3"),c.start&&(c.start.icon="play3"),c.stop&&(c.stop.icon="pause2"),c.reset&&(c.reset.icon="stop2"),c.lap&&(c.lap.icon="loop2"),c.hide&&(c.hide.icon="close")}},mobiscroll.themes.listview["wp-light"]={baseTheme:"wp"},mobiscroll.themes.menustrip["wp-light"]={baseTheme:"wp"},mobiscroll.themes.form["wp-light"]={baseTheme:"wp"},mobiscroll.themes.progress["wp-light"]={baseTheme:"wp"}}(),function(){var a,b,c,d=mobiscroll,e=d.themes,f=d.$;b=navigator.userAgent.match(/Android|iPhone|iPad|iPod|Windows|Windows Phone|MSIE/i),/Android/i.test(b)?(a="android-holo",(b=navigator.userAgent.match(/Android\s+([\d\.]+)/i))&&(b=b[0].replace("Android ",""),a=5<=b.split(".")[0]?"material":4<=b.split(".")[0]?"android-holo":"android")):/iPhone/i.test(b)||/iPad/i.test(b)||/iPod/i.test(b)?(a="ios",(b=navigator.userAgent.match(/OS\s+([\d\_]+)/i))&&(b=b[0].replace(/_/g,".").replace("OS ",""),a=b>="7"?"ios":"ios-classic")):(/Windows/i.test(b)||/MSIE/i.test(b)||/Windows Phone/i.test(b))&&(a="wp"),f.each(e,function(b,e){return f.each(e,function(b,e){return e.baseTheme==a?(d.autoTheme=b,c=!0,!1):void(b==a&&(d.autoTheme=b))}),c?!1:void 0})}(),app.launch=function(){this.popup.init(),this.toast.init(),this.navigator.init(),this.nothing.init(),localStorage.setItem("routerHistory","[]")},app.model={},app.platform===app.PLATFORM_DEV?(app.angelDomain="http://tmallapi.bluemoon.com.cn/bmcrm-control",app.pic="http://tmallapi.bluemoon.com.cn/angelUpload/",app.chartsDomain="http://dompapi.bluemoon.com.cn/"):app.platform===app.PLATFORM_PROD?(app.angelDomain="http://bmcrm.bluemoon.com.cn:81/bmcrm-control",app.pic="http://angel.bluemoon.com.cn/angelUpload/",app.chartsDomain="http://domp.bluemoon.com.cn/"):app.platform===app.PLATFORM_PROD_TEST?(app.angelDomain="http://bmcrm.bluemoon.com.cn:82/bmcrm-test",app.pic="http://angel.bluemoon.com.cn/angelUpload/",app.chartsDomain="http://dompapi.bluemoon.com.cn/"):app.platform===app.PLATFORM_LOCAL?(app.angelDomain="https://angelapi.bluemoon.com.cn:8881/bmcrm-control",app.pic="http://tmallapi.bluemoon.com.cn/angelUpload/",app.chartsDomain="http://dompapi.bluemoon.com.cn/"):app.platform===app.PLATFORM_MOCK&&(app.angelDomain="http://192.168.236.1:9002/mockjsdata/48",app.pic="http://tmallapi.bluemoon.com.cn/angelUpload/",app.chartsDomain="http://dompapi.bluemoon.com.cn/"),$(function(){app.hasGetAppInfo=!1,app.app_cuid="abc",app.app_version=app["const"].APP_VERSION,app.app_client=app["const"].APP_CLIENT,app.deviceToken="deviceToken",app.nativeFn=new Native,app.web_version=app["const"].WEB_VERSION,app.nativeFn.setAppInfo("app.getAppInfo",app.web_version),app.getAppInfo=function(a){var b=JSON.parse(a);app.app_client=b.client||app["const"].APP_CLIENT,app.app_cuid=b.cuid||app["const"].APP_CUID,app.deviceToken=b.deviceToken,app.app_version=b.version||app["const"].APP_VERSION,app.hasGetAppInfo=!0,app.router.run("#/index")},app.getLocation=function(a){return a},app.launch(),setTimeout(function(){app.hasGetAppInfo||(console.log("ignore warning"),app.router.run("#/index"))},500),$(document).ajaxStart(function(){app.popup.showAjaxLoading()}),$(document).ajaxComplete(function(){app.popup.hideAjaxLoading()})});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=Base64._utf8_encode(a);j<a.length;)b=a.charCodeAt(j++),c=a.charCodeAt(j++),d=a.charCodeAt(j++),e=b>>2,f=(3&b)<<4|c>>4,g=(15&c)<<2|d>>6,h=63&d,isNaN(c)?g=h=64:isNaN(d)&&(h=64),i=i+this._keyStr.charAt(e)+this._keyStr.charAt(f)+this._keyStr.charAt(g)+this._keyStr.charAt(h);return i},decode:function(a){var b,c,d,e,f,g,h,i="",j=0;for(a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");j<a.length;)e=this._keyStr.indexOf(a.charAt(j++)),f=this._keyStr.indexOf(a.charAt(j++)),g=this._keyStr.indexOf(a.charAt(j++)),h=this._keyStr.indexOf(a.charAt(j++)),b=e<<2|f>>4,c=(15&f)<<4|g>>2,d=(3&g)<<6|h,i+=String.fromCharCode(b),64!=g&&(i+=String.fromCharCode(c)),64!=h&&(i+=String.fromCharCode(d));return i=Base64._utf8_decode(i)},_utf8_encode:function(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b},_utf8_decode:function(a){for(var b="",c=0,d=c1=c2=0;c<a.length;)d=a.charCodeAt(c),128>d?(b+=String.fromCharCode(d),c++):d>191&&224>d?(c2=a.charCodeAt(c+1),b+=String.fromCharCode((31&d)<<6|63&c2),c+=2):(c2=a.charCodeAt(c+1),c3=a.charCodeAt(c+2),b+=String.fromCharCode((15&d)<<12|(63&c2)<<6|63&c3),c+=3);return b}};app["const"]={APP_VERSION:"2.1.0",WEB_VERSION:"2.1.1",APP_CUID:"123",APP_CLIENT:"wx",APP_FORMAT:"json",APP_NAME:"SFA",APP_SECRET:"Er78s1hcT4Tyoaj2",AJAX_ERROR_MSG:"网络连接超时，请重新连接！",STATUS_SELECT_PRODUCT:"STATUS_SELECT_PRODUCT",STATUS_SELECT_STORE:"STATUS_SELECT_STORE",STATUS_UPLOAD_PIC:"STATUS_UPLOAD_PIC",LOCAL_SEARCH_PRODUCT:"LOCAL_SEARCH_PRODUCT",LOCAL_SELECTED_PRODUCT:"LOCAL_SELECTED_PRODUCT",LOCAL_SELECTED_STORE:"LOCAL_SELECTED_STORE",UPLOAD_PIC:"UPLOAD_PIC",PLAN_STATUS_NOT_ENTER_STORE:"NOT_ENTER_STORE",PLAN_STATUS_TODAY_REST:"TODAY_REST",PLAN_STATUS_INVALID_PLAN:"INVALID_PLAN",PLAN_STATUS_VALID_PLAN:"VALID_PLAN",HELP_TYPE_URL:"URL_CONTENT",HELP_TYPE_TEXT:"TEXT_CONTENT",WAIT_IMME_APPROVE:"WAIT_IMME_APPROVE",WAIT_INDI_APPROVE:"WAIT_INDI_APPROVE",WAIT_BACK_APPLY:"WAIT_BACK_APPLY",WAIT_BACK_APPROVE:"WAIT_BACK_APPROVE",WAIT_FILE_APPROVE:"WAIT_FILE_APPROVE",BACK_REJECT:"BACK_REJECT",FILE_REJECT:"FILE_REJECT",PROCESS_FINISH:"PROCESS_FINISH",PROCESS_CLOSE:"PROCESS_CLOSE",PROCESS_CANCEL:"PROCESS_CANCEL",IMME_REJECT:"IMME_REJECT",INDI_REJECT:"INDI_REJECT",APPLY_TIME_OUT:"APPLY_TIME_OUT",BACK_TIME_OUT:"BACK_TIME_OUT",EXCEPION_FINISH:"EXCEPION_FINISH",E0055:"E0055",E0060:"E0060",E0065:"E0065",E0070:"E0070",E0075:"E0075",END:"END"},app.encrypt=function(){function a(a){return p(f(o(a),a.length*t))}function b(a){return q(f(o(a),a.length*t))}function c(a,b){return p(l(a,b))}function d(a,b){return q(l(a,b))}function e(a){return p(f(o(a),a.length*t))}function f(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,e=-1732584194,f=271733878,g=0;g<a.length;g+=16){var l=c,n=d,o=e,p=f;c=h(c,d,e,f,a[g+0],7,-680876936),f=h(f,c,d,e,a[g+1],12,-389564586),e=h(e,f,c,d,a[g+2],17,606105819),d=h(d,e,f,c,a[g+3],22,-1044525330),c=h(c,d,e,f,a[g+4],7,-176418897),f=h(f,c,d,e,a[g+5],12,1200080426),e=h(e,f,c,d,a[g+6],17,-1473231341),d=h(d,e,f,c,a[g+7],22,-45705983),c=h(c,d,e,f,a[g+8],7,1770035416),f=h(f,c,d,e,a[g+9],12,-1958414417),e=h(e,f,c,d,a[g+10],17,-42063),d=h(d,e,f,c,a[g+11],22,-1990404162),c=h(c,d,e,f,a[g+12],7,1804603682),f=h(f,c,d,e,a[g+13],12,-40341101),e=h(e,f,c,d,a[g+14],17,-1502002290),d=h(d,e,f,c,a[g+15],22,1236535329),c=i(c,d,e,f,a[g+1],5,-165796510),f=i(f,c,d,e,a[g+6],9,-1069501632),e=i(e,f,c,d,a[g+11],14,643717713),d=i(d,e,f,c,a[g+0],20,-373897302),c=i(c,d,e,f,a[g+5],5,-701558691),f=i(f,c,d,e,a[g+10],9,38016083),e=i(e,f,c,d,a[g+15],14,-660478335),d=i(d,e,f,c,a[g+4],20,-405537848),c=i(c,d,e,f,a[g+9],5,568446438),f=i(f,c,d,e,a[g+14],9,-1019803690),e=i(e,f,c,d,a[g+3],14,-187363961),d=i(d,e,f,c,a[g+8],20,1163531501),c=i(c,d,e,f,a[g+13],5,-1444681467),f=i(f,c,d,e,a[g+2],9,-51403784),e=i(e,f,c,d,a[g+7],14,1735328473),d=i(d,e,f,c,a[g+12],20,-1926607734),c=j(c,d,e,f,a[g+5],4,-378558),f=j(f,c,d,e,a[g+8],11,-2022574463),e=j(e,f,c,d,a[g+11],16,1839030562),d=j(d,e,f,c,a[g+14],23,-35309556),c=j(c,d,e,f,a[g+1],4,-1530992060),f=j(f,c,d,e,a[g+4],11,1272893353),e=j(e,f,c,d,a[g+7],16,-155497632),d=j(d,e,f,c,a[g+10],23,-1094730640),c=j(c,d,e,f,a[g+13],4,681279174),f=j(f,c,d,e,a[g+0],11,-358537222),e=j(e,f,c,d,a[g+3],16,-722521979),d=j(d,e,f,c,a[g+6],23,76029189),c=j(c,d,e,f,a[g+9],4,-640364487),f=j(f,c,d,e,a[g+12],11,-421815835),e=j(e,f,c,d,a[g+15],16,530742520),d=j(d,e,f,c,a[g+2],23,-995338651),c=k(c,d,e,f,a[g+0],6,-198630844),f=k(f,c,d,e,a[g+7],10,1126891415),e=k(e,f,c,d,a[g+14],15,-1416354905),d=k(d,e,f,c,a[g+5],21,-57434055),c=k(c,d,e,f,a[g+12],6,1700485571),f=k(f,c,d,e,a[g+3],10,-1894986606),e=k(e,f,c,d,a[g+10],15,-1051523),d=k(d,e,f,c,a[g+1],21,-2054922799),c=k(c,d,e,f,a[g+8],6,1873313359),f=k(f,c,d,e,a[g+15],10,-30611744),e=k(e,f,c,d,a[g+6],15,-1560198380),d=k(d,e,f,c,a[g+13],21,1309151649),c=k(c,d,e,f,a[g+4],6,-145523070),f=k(f,c,d,e,a[g+11],10,-1120210379),e=k(e,f,c,d,a[g+2],15,718787259),d=k(d,e,f,c,a[g+9],21,-343485551),c=m(c,l),d=m(d,n),e=m(e,o),f=m(f,p)}return Array(c,d,e,f)}function g(a,b,c,d,e,f){return m(n(m(m(b,a),m(d,f)),e),c)}function h(a,b,c,d,e,f,h){return g(b&c|~b&d,a,b,e,f,h)}function i(a,b,c,d,e,f,h){return g(b&d|c&~d,a,b,e,f,h)}function j(a,b,c,d,e,f,h){return g(b^c^d,a,b,e,f,h)}function k(a,b,c,d,e,f,h){return g(c^(b|~d),a,b,e,f,h)}function l(a,b){var c=o(a);c.length>16&&(c=f(c,a.length*t));for(var d=Array(16),e=Array(16),g=0;16>g;g++)d[g]=909522486^c[g],e[g]=1549556828^c[g];var h=f(d.concat(o(b)),512+b.length*t);return f(e.concat(h),640)}function m(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c}function n(a,b){return a<<b|a>>>32-b}function o(a){for(var b=Array(),c=(1<<t)-1,d=0;d<a.length*t;d+=t)b[d>>5]|=(a.charCodeAt(d/t)&c)<<d%32;return b}function p(a){for(var b=r?"0123456789ABCDEF":"0123456789abcdef",c="",d=0;d<4*a.length;d++)c+=b.charAt(a[d>>2]>>d%4*8+4&15)+b.charAt(a[d>>2]>>d%4*8&15);return c}function q(a){for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c="",d=0;d<4*a.length;d+=3)for(var e=(a[d>>2]>>8*(d%4)&255)<<16|(a[d+1>>2]>>8*((d+1)%4)&255)<<8|a[d+2>>2]>>8*((d+2)%4)&255,f=0;4>f;f++)c+=8*d+6*f>32*a.length?s:b.charAt(e>>6*(3-f)&63);return c}var r=0,s="",t=8;return{hex_md5:a,b64_md5:b,hex_hmac_md5:c,b64_hmac_md5:d,calcMD5:e}}(),app.router=$.sammy(function(){this.notFound=function(){location.href="#/index"},this.around(function(a){app.popup.hideAjaxLoading(),app.popup.hideAllPopup(),$("AjaxLoading").addClass("none"),app.navigator.setHeader({title:""}),app.routerListener(),a()}),this.get("#/index",function(){return $("#historyStartMonth").mobiscroll("hide"),$("#historyEndMonth").mobiscroll("hide"),localStorage.token?($("#header").hide(),void app.showPage("indexPage",function(){app.popup.hideLoading(),app.indexModel.getNotReadNum(),app.indexModel.getNewMessage()},function(){app.indexModel=new IndexModel,app.renderTemplate("views/index/index.html",app.indexModel,"indexPage",function(){app.indexModel.init()})})):void(location.href="#/login")}),this.get("#/currentWork",function(){app.navigator.setHeader({title:"今日工作"}),$(".timePicker#timePickerOne").mobiscroll("hide"),$(".timePicker#timePickerTwo").mobiscroll("hide"),$(".timePicker#timePickerThree").mobiscroll("hide"),$(".timePicker#timePickerFour").mobiscroll("hide"),app.showPage("currentWorkPage",function(){app.currentWorkModel.init()},function(){app.currentWorkModel=new currentWorkModel,app.renderTemplate("views/today/currentWork.html",app.currentWorkModel,"currentWorkPage",function(){app.currentWorkModel.init()})})}),this.get("#/salesQuantity/:planId",function(){app.navigator.setHeader({title:"提报销量"});var a=this.params.planId;app.showPage("salesQuantityPage",function(){app.salesQuantityModel.init(a,"salesQuantityPage")},function(){app.salesQuantityModel=new salesQuantityModel,app.renderTemplate("views/today/salesQuantity.html",app.salesQuantityModel,"salesQuantityPage",function(){app.salesQuantityModel.init(a,"salesQuantityPage")})})}),this.get("#/news",function(){app.navigator.setHeader({title:"消息"}),app.showPage("newsPage",function(){app.newsModel.init()},function(){app.newsModel=new newsModel,app.renderTemplate("views/news/news.html",app.newsModel,"newsPage",function(){app.newsModel.init()})})}),this.get("#/selectProduct",function(){app.navigator.setHeader({title:"选择产品"});var a=app.util.getQueryString("storeId"),b=app.util.getQueryString("pageFlag"),c=app.util.getQueryString("planDate");app.showPage("selectProductPage",function(){app.selectProductModel.init(a,b,c)},function(){app.selectProductModel=new selectProductModel,app.renderTemplate("views/today/selectProduct.html",app.selectProductModel,"selectProductPage",function(){app.selectProductModel.init(a,b,c)})})}),this.get("#/selectShop",function(){app.navigator.setHeader({title:"选择门店"});var a=app.util.getQueryString("planDate");app.showPage("selectShopPage",function(){app.selectShopModel.init(a)},function(){app.selectShopModel=new selectShopModel,app.renderTemplate("views/shop/selectShop.html",app.selectShopModel,"selectShopPage",function(){app.selectShopModel.init(a)})})}),this.get("#/helpList",function(){app.navigator.setHeader({title:"帮助"}),app.showPage("helpListPage",function(){app.helpListModel.init()},function(){app.helpListModel=new helpListModel,app.renderTemplate("views/help/helpList.html",app.helpListModel,"helpListPage",function(){app.helpListModel.init()})})}),this.get("#/punchCard/:planId/:status",function(){var a=this.params.planId,b=this.params.status;"ENTER_STORE"==b?app.navigator.setHeader({title:"离店打卡"}):"LEAVE_STORE"==b&&app.navigator.setHeader({title:"进店打卡"}),app.showPage("punchCardPage",function(){app.punchCardModel.init(a,b)},function(){app.punchCardModel=new punchCardModel,app.renderTemplate("views/today/punchCard.html",app.punchCardModel,"punchCardPage",function(){app.punchCardModel.init(a,b)})})}),this.get("#/todayPlan",function(){app.navigator.setHeader({title:"今日计划"}),app.showPage("todayPlanPage",function(){app.todayPlanModel.init()},function(){app.todayPlanModel=new TodayPlanModel,app.renderTemplate("views/plan/todayPlan.html",app.todayPlanModel,"todayPlanPage",function(){app.todayPlanModel.init()})})}),this.get("#/workPlanList",function(){app.navigator.setHeader({title:"工作计划"}),$(".timePicker#timePickerOne").mobiscroll("hide"),$(".timePicker#timePickerTwo").mobiscroll("hide"),$(".timePicker#timePickerThree").mobiscroll("hide"),$(".timePicker#timePickerFour").mobiscroll("hide"),app.showPage("workPlanListPage",function(){app.workPlanListModel.init()},function(){app.workPlanListModel=new workPlanListModel,app.renderTemplate("views/plan/workPlanList.html",app.workPlanListModel,"workPlanListPage",function(){app.workPlanListModel.init()})})}),this.get("#/workPlan",function(){app.navigator.setHeader({title:"制定计划"});var a=app.util.getQueryString("planDate"),b=app.util.getQueryString("status");a&&(a=Number(a)),app.showPage("workPlanPage",function(){app.workPlanModel.init(a,b,"workPlanPage")},function(){app.workPlanModel=new WorkPlanModel,app.renderTemplate("views/plan/workPlan.html",app.workPlanModel,"workPlanPage",function(){app.workPlanModel.init(a,b,"workPlanPage")})})}),this.get("#/createTodayPlan",function(){app.navigator.setHeader({title:"制定计划"}),app.showPage("createTodayPlanPage",function(){app.createTodayPlanModel.init("createTodayPlanPage")},function(){app.createTodayPlanModel=new CreateTodayPlanModel,
app.renderTemplate("views/plan/createTodayPlan.html",app.createTodayPlanModel,"createTodayPlanPage",function(){app.createTodayPlanModel.init("createTodayPlanPage")})})}),this.get("#/reportList",function(){app.navigator.setHeader({title:"销售报表"}),app.showPage("reportListPage",function(){app.reportListModel.init()},function(){app.reportListModel=new reportListModel,app.renderTemplate("views/report/reportList.html",app.reportListModel,"reportListPage",function(){app.reportListModel.init()})})}),this.get("#/saleReport/:type",function(){var a=this.params.type;"date"===a?app.navigator.setHeader({title:"每日销售报表"}):"month"===a&&app.navigator.setHeader({title:"每月销售报表"}),app.showPage("saleReportPage",function(){app.saleReportModel.init(a),"date"==a?setTimeout(function(){app.saleReportModel.setScrollBar("saleReportTime")},2e3):"month"==a&&setTimeout(function(){app.saleReportModel.setScrollBar("saleReportMonth")},2e3)},function(){app.saleReportModel=new saleReportModel,app.renderTemplate("views/report/saleReport.html",app.saleReportModel,"saleReportPage",function(){app.saleReportModel.init(a),"date"==a?app.saleReportModel.setScrollBar("saleReportTime"):"month"==a&&app.saleReportModel.setScrollBar("saleReportMonth")})})}),this.get("#/saleDetail/:timeStamp/:storeId",function(){app.navigator.setHeader({title:"销售详情"});var a=this.params.timeStamp,b=this.params.storeId;app.showPage("saleDetailPage",function(){app.saleDetailModel.init(a,b)},function(){app.saleDetailModel=new saleDetailModel,app.renderTemplate("views/report/saleDetail.html",app.saleDetailModel,"saleDetailPage",function(){app.saleDetailModel.init(a,b)})})}),this.get("#/storeInfo",function(){app.showPage("storeInfoPage",function(){app.storeInfoModel.init()},function(){app.storeInfoModel=new storeInfoModel,app.renderTemplate("views/info/storeInfo.html",app.storeInfoModel,"storeInfoPage",function(){app.storeInfoModel.init()})})}),this.get("#/bossInfo",function(){app.navigator.setHeader({title:"上级信息"}),app.showPage("bossInfoPage",function(){app.bossInfoModel.init()},function(){app.bossInfoModel=new bossInfoModel,app.renderTemplate("views/info/bossInfo.html",app.bossInfoModel,"bossInfoPage",function(){app.bossInfoModel.init()})})}),this.get("#/login",function(){$("#indexPage").remove(),app.navigator.hideHeader(),app.showPage("loginPage",function(){app.loginModel.init()},function(){app.loginModel=new loginModel,app.renderTemplate("views/user/login.html",app.loginModel,"loginPage",function(){app.loginModel.init()})})}),this.get("#/userInfo",function(){app.navigator.setHeader({title:"个人资料"}),app.showPage("userInfoPage",function(){app.userInfoModel.init()},function(){app.userInfoModel=new userInfoModel,app.renderTemplate("views/user/userInfo.html",app.userInfoModel,"userInfoPage",function(){app.userInfoModel.init()})})}),this.get("#/setUp",function(){app.navigator.setHeader({title:"设置"}),app.showPage("setUpPage",function(){app.setUpModel.init()},function(){app.setUpModel=new setUpModel,app.renderTemplate("views/info/setUp.html",app.setUpModel,"setUpPage",function(){app.setUpModel.init()})})}),this.get("#/forgetPwd",function(){app.navigator.setHeader({title:"忘记密码"}),app.showPage("forgetPwdPage",function(){app.forgetPwdModel.init()},function(){app.forgetPwdModel=new forgetPwdModel,app.renderTemplate("views/user/forgetPwd.html",app.forgetPwdModel,"forgetPwdPage",function(){app.forgetPwdModel.init()})})}),this.get("#/resetPwd/:account/:phone",function(){app.navigator.setHeader({title:"重置密码"});var a=this.params.account,b=this.params.phone;app.showPage("resetPwdPage",function(){app.resetPwdModel.init(a,b)},function(){app.resetPwdModel=new resetPwdModel,app.renderTemplate("views/user/resetPwd.html",app.resetPwdModel,"resetPwdPage",function(){app.resetPwdModel.init(a,b)})})}),this.get("#/changePwd",function(){app.navigator.setHeader({title:"修改密码"}),app.showPage("changePwdPage",function(){app.changePwdModel.init()},function(){app.changePwdModel=new changePwdModel,app.renderTemplate("views/user/changePwd.html",app.changePwdModel,"changePwdPage",function(){app.changePwdModel.init()})})}),this.get("#/upload/:pandId",function(){app.navigator.setHeader({title:"上传凭证"});var a=this.params.pandId;app.showPage("uploadPage",function(){app.uploadModel.init(a)},function(){app.uploadModel=new uploadModel,app.renderTemplate("views/today/upload.html",app.uploadModel,"uploadPage",function(){app.uploadModel.init(a)})})}),this.get("#/fileView",function(){app.navigator.setHeader({title:"团购凭证"}),app.showPage("fileViewPage",function(){app.fileViewModel.init()},function(){app.fileViewModel=new fileViewModel,app.renderTemplate("views/report/fileView.html",app.fileViewModel,"fileViewPage",function(){app.fileViewModel.init()})})}),this.get("#/noticeList",function(){app.navigator.setHeader({title:"通知"}),app.showPage("noticeListPage",function(){app.noticeListModel.init()},function(){app.noticeListModel=new noticeListModel,app.renderTemplate("views/notice/noticeList.html",app.noticeListModel,"noticeListPage",function(){app.noticeListModel.init()})})}),this.get("#/noticeDetail",function(){app.navigator.setHeader({title:"通知详情"}),app.showPage("noticeDetailPage",function(){app.noticeDetailModel.init()},function(){app.noticeDetailModel=new noticeDetailModel,app.renderTemplate("views/notice/noticeDetail.html",app.noticeDetailModel,"noticeDetailPage",function(){app.noticeDetailModel.init()})})}),this.get("#/knowledgeBase",function(){app.navigator.setHeader({title:"知识库"}),app.showPage("knowledgeBasePage",function(){app.knowledgeBaseModel.init()},function(){app.knowledgeBaseModel=new knowledgeBaseModel,app.renderTemplate("views/knowledge/base.html",app.knowledgeBaseModel,"knowledgeBasePage",function(){app.knowledgeBaseModel.init()})})}),this.get("#/knowledgeDetail",function(){app.showPage("knowledgeDetailPage",function(){app.knowledgeDetailModel.init()},function(){app.knowledgeDetailModel=new knowledgeDetailModel,app.renderTemplate("views/knowledge/detail.html",app.knowledgeDetailModel,"knowledgeDetailPage",function(){app.knowledgeDetailModel.init()})})}),this.get("#/management",function(){$(".vacateApplyDateTimePacker#vacateApplyStartDateTimePacker").mobiscroll("hide"),$(".vacateApplyDateTimePacker#vacateApplyEndDateTimePacker").mobiscroll("hide"),$("#vacationUsedStart").mobiscroll("hide"),$("#vacationUsedEnd").mobiscroll("hide"),$("#historyStartMonth").mobiscroll("hide"),$("#historyEndMonth").mobiscroll("hide"),app.navigator.hideHeader(),app.showPage("managementPage",function(){app.managementModel.init()},function(){app.managementModel=new managementModel,app.renderTemplate("views/vacate/management.html",app.managementModel,"managementPage",function(){app.managementModel.init()})})}),this.get("#/vacateApply",function(){app.navigator.setHeader({title:"请假申请"}),app.showPage("vacateApplyPage",function(){"N"===localStorage.localPicListPage&&app.vacateApplyModel.initDateTimePicker(),app.vacateApplyModel.init()},function(){app.vacateApplyModel=new vacateApplyModel,app.renderTemplate("views/vacate/vacateApply.html",app.vacateApplyModel,"vacateApplyPage",function(){app.vacateApplyModel.init(),app.vacateApplyModel.initDateTimePicker()})})}),this.get("#/vacationUsed/:applyNo",function(){var a=this.params.applyNo;app.showPage("vacationUsedPage",function(){app.vacationUsedModel.init(a),app.vacationUsedModel.initDateTimePicker("#vacationUsedStart"),app.vacationUsedModel.initDateTimePicker("#vacationUsedEnd")},function(){app.vacationUsedModel=new vacationUsedModel,app.renderTemplate("views/vacate/vacationUsedApply.html",app.vacationUsedModel,"vacationUsedPage",function(){app.vacationUsedModel.init(a),app.vacationUsedModel.initDateTimePicker("#vacationUsedStart"),app.vacationUsedModel.initDateTimePicker("#vacationUsedEnd")})})}),this.get("#/vacateHistory",function(){app.navigator.hideHeader(),app.showPage("vacateHistoryPage",function(){app.vacateHistoryModel.init(),app.vacateHistoryModel.initDateTimePicker("#historyStartMonth"),app.vacateHistoryModel.initDateTimePicker("#historyEndMonth")},function(){app.vacateHistoryModel=new vacateHistoryModel,app.renderTemplate("views/vacate/vacateHistory.html",app.vacateHistoryModel,"vacateHistoryPage",function(){app.vacateHistoryModel.init(),app.vacateHistoryModel.initDateTimePicker("#historyStartMonth"),app.vacateHistoryModel.initDateTimePicker("#historyEndMonth")})})}),this.get("#/vacateDetails/:applyNo",function(){var a=this.params.applyNo;app.navigator.setHeader({title:"请假申请"}),app.showPage("vacateDetailsPage",function(){app.vacateDetailsModel.init(a)},function(){app.vacateDetailsModel=new vacateDetailsModel,app.renderTemplate("views/vacate/vacateDetails.html",app.vacateDetailsModel,"vacateDetailsPage",function(){app.vacateDetailsModel.init(a)})})}),this.get("#/detailApply/:applyNo",function(){var a=this.params.applyNo;app.navigator.setHeader({title:"请假明细"}),app.showPage("detailApplyPage",function(){app.detailApplyModel.init(a)},function(){app.detailApplyModel=new detailApplyModel,app.renderTemplate("views/vacate/detailApply.html",app.detailApplyModel,"detailApplyPage",function(){app.detailApplyModel.init(a)})})}),this.get("#/uploadCertificate/:source/:applyNo",function(){var a=this.params.applyNo,b=this.params.source;app.navigator.setHeader("see"===b?{title:"请假证明"}:"res"===b?{title:"销假证明"}:{title:"上传证明"}),app.showPage("uploadCertificatePage",function(){app.uploadCertificateModel.init(a,b)},function(){app.uploadCertificateModel=new uploadCertificateModel,app.renderTemplate("views/vacate/uploadCertificate.html",app.uploadCertificateModel,"uploadCertificatePage",function(){app.uploadCertificateModel.init(a,b)})})}),this.get("#/chartList/:menuParentId",function(){var a=this.params.menuParentId;app.showPage("chartListPage",function(){app.chartListModel.init(a)},function(){app.chartListModel=new chartListModel,app.renderTemplate("views/charts/chartList.html",app.chartListModel,"chartListPage",function(){app.chartListModel.init(a)})})}),this.get("#/chartDetail/:menuName",function(){var a=this.params.menuName;app.navigator.setHeader({title:a}),app.showPage("chartDetailPage",function(){app.chartDetailModel.init()},function(){app.chartDetailModel=new chartDetailModel,app.renderTemplate("views/charts/chartDetail.html",app.chartDetailModel,"chartDetailPage",function(){app.chartDetailModel.init()})})}),this.get("#/targetList",function(){app.navigator.setHeader({title:"时段计划"}),app.showPage("targetListPage",function(){app.targetListModel.init()},function(){app.targetListModel=new targetListModel,app.renderTemplate("views/target/targetList.html",app.targetListModel,"targetListPage",function(){app.targetListModel.init()})})}),this.get("#/targetEdit/:planId",function(){var a=this.params.planId;app.navigator.setHeader(0!=a?{title:"编辑时段计划"}:{title:"新增时段计划"}),app.showPage("targetEditPage",function(){app.targetEditModel.init(a)},function(){app.targetEditModel=new targetEditModel,app.renderTemplate("views/target/targetEdit.html",app.targetEditModel,"targetEditPage",function(){app.targetEditModel.init(a)})})}),this.get("#/targetProgress",function(){app.navigator.setHeader({title:"时段实际"}),app.showPage("targetProgressPage",function(){app.targetProgressModel.init()},function(){app.targetProgressModel=new targetProgressModel,app.renderTemplate("views/target/targetProgress.html",app.targetProgressModel,"targetProgressPage",function(){app.targetProgressModel.init()})})}),this.get("#/periodAdd",function(){app.navigator.hideHeader(),app.showPage("periodAddPage",function(){app.periodAddModel.init()},function(){app.periodAddModel=new periodAddModel,app.renderTemplate("views/target/periodAdd.html",app.periodAddModel,"periodAddPage",function(){app.periodAddModel.init(),$("#periodAddArticle").css("min-height",$("#periodAddPage").css("min-height")),$("#periodAddArticle").css("padding-bottom",$("#footer-period").outerHeight()),$("#footer-period").css("margin-top",-$("#footer-period").outerHeight())})})}),this.get("#/periodList/:storeId",function(){var a=this.params.storeId;app.navigator.setHeader({title:"时控提报详情"}),app.showPage("periodListPage",function(){app.periodListModel.init(a)},function(){app.periodListModel=new periodListModel,app.renderTemplate("views/target/periodList.html",app.periodListModel,"periodListPage",function(){app.periodListModel.init(a),document.getElementById("periodAxis").scrollLeft=document.getElementById("periodAxis").scrollWidth})})}),this.get("#/storeDisplay",function(){app.navigator.hideHeader(),app.showPage("displayListPage",function(){app.displayListModel.init()},function(){app.displayListModel=new displayListModel,app.renderTemplate("views/storeDisplay/displayList.html",app.displayListModel,"displayListPage",function(){app.displayListModel.init()})})}),this.get("#/storeAgreement/:planId",function(){var a=this.params.planId;app.navigator.setHeader({title:"协议详情"}),app.showPage("storeAgreementPage",function(){app.storeAgreementModel.init(a)},function(){app.storeAgreementModel=new storeAgreementModel,app.renderTemplate("views/storeDisplay/storeAgreement.html",app.storeAgreementModel,"storeAgreementPage",function(){app.storeAgreementModel.init(a)})})}),this.get("#/displayHandle/:planId",function(){var a=this.params.planId;app.navigator.setHeader({title:"陈列执行信息"}),app.showPage("displayHandlePage",function(){app.displayHandleModel.init(a)},function(){app.displayHandleModel=new displayHandleModel,app.renderTemplate("views/storeDisplay/displayHandle.html",app.displayHandleModel,"displayHandlePage",function(){app.displayHandleModel.init(a)})})}),this.get("#/displayHandle/:planId/:time",function(){var a=this.params.planId,b=this.params.time;app.navigator.setHeader({title:"陈列执行信息"}),app.showPage("displayHandlePage",function(){app.displayHandleModel.init(a,b)},function(){app.displayHandleModel=new displayHandleModel,app.renderTemplate("views/storeDisplay/displayHandle.html",app.displayHandleModel,"displayHandlePage",function(){app.displayHandleModel.init(a,b)})})}),this.get("#/displayDetail/:planId",function(){var a=this.params.planId;app.navigator.setHeader({title:"陈列执行详情"}),app.showPage("displayDetailPage",function(){app.displayDetailModel.init(a)},function(){app.displayDetailModel=new displayDetailModel,app.renderTemplate("views/storeDisplay/displayDetail.html",app.displayDetailModel,"displayDetailPage",function(){app.displayDetailModel.init(a)})})}),this.get("#/displaySummary/:planId",function(){var a=this.params.planId;app.navigator.setHeader({title:"总结"}),app.showPage("displaySummaryPage",function(){app.displaySummaryModel.init(a)},function(){app.displaySummaryModel=new displaySummaryModel,app.renderTemplate("views/storeDisplay/displaySummary.html",app.displaySummaryModel,"displaySummaryPage",function(){app.displaySummaryModel.init(a)})})}),this.get("#/displayProduct",function(){app.navigator.setHeader({title:"选择产品"}),app.showPage("displayProductPage",function(){app.displayProductModel.init()},function(){app.displayProductModel=new displayProductModel,app.renderTemplate("views/storeDisplay/displayProduct.html",app.displayProductModel,"displayProductPage",function(){app.displayProductModel.init()})})}),this.get("#/flowList",function(){app.navigator.setHeader({title:"门店客流量"}),app.showPage("flowListPage",function(){app.flowListModel.init()},function(){app.flowListModel=new flowListModel,app.renderTemplate("views/guestFlow/flowList.html",app.flowListModel,"flowListPage",function(){app.flowListModel.init()})})}),this.get("#/addMonthlyFlow/:storeId/:planId",function(){var a=this.params.planId,b=this.params.storeId;app.navigator.setHeader({title:"编辑月客流量"}),app.showPage("addMonthlyFlowPage",function(){app.addMonthlyFlowModel.init(b,a)},function(){app.addMonthlyFlowModel=new addMonthlyFlowModel,app.renderTemplate("views/guestFlow/addMonthlyFlow.html",app.addMonthlyFlowModel,"addMonthlyFlowPage",function(){app.addMonthlyFlowModel.init(b,a),$("#addMonthlyFlowPage .container-flow").css("min-height",$("#addMonthlyFlowPage").height()),$("#addMonthlyFlowPage .container-flow").css("padding-bottom",$("#addMonthlyFlowPage .column-btn").outerHeight()),$("#addMonthlyFlowPage .column-btn").css("margin-top",-$("#addMonthlyFlowPage .column-btn").outerHeight())})})}),this.get("#/addMonthlyFlow/:storeId",function(){var a=this.params.storeId;app.navigator.setHeader({title:"添加月客流量"}),app.showPage("addMonthlyFlowPage",function(){app.addMonthlyFlowModel.init(a)},function(){app.addMonthlyFlowModel=new addMonthlyFlowModel,app.renderTemplate("views/guestFlow/addMonthlyFlow.html",app.addMonthlyFlowModel,"addMonthlyFlowPage",function(){app.addMonthlyFlowModel.init(a),$("#addMonthlyFlowPage .container-flow").css("min-height",$("#addMonthlyFlowPage").height()),$("#addMonthlyFlowPage .container-flow").css("padding-bottom",$("#addMonthlyFlowPage .column-btn").outerHeight()),$("#addMonthlyFlowPage .column-btn").css("margin-top",-$("#addMonthlyFlowPage .column-btn").outerHeight())})})}),this.get("#/addDayFlow/:storeId/:planId",function(){var a=this.params.planId,b=this.params.storeId;app.navigator.setHeader({title:"编辑日客流量"}),app.showPage("addDayFlowPage",function(){app.addDayFlowModel.init(b,a)},function(){app.addDayFlowModel=new addDayFlowModel,app.renderTemplate("views/guestFlow/addDayFlow.html",app.addDayFlowModel,"addDayFlowPage",function(){app.addDayFlowModel.init(b,a),$("#addDayFlowPage .container-flow").css("min-height",$("#addDayFlowPage").height()),$("#addDayFlowPage .container-flow").css("padding-bottom",$("#addDayFlowPage .column-btn").outerHeight()),$("#addDayFlowPage .column-btn").css("margin-top",-$("#addDayFlowPage .column-btn").outerHeight())})})}),this.get("#/addDayFlow/:storeId",function(){var a=this.params.storeId;app.navigator.setHeader({title:"添加日客流量"}),app.showPage("addDayFlowPage",function(){app.addDayFlowModel.init(a)},function(){app.addDayFlowModel=new addDayFlowModel,app.renderTemplate("views/guestFlow/addDayFlow.html",app.addDayFlowModel,"addDayFlowPage",function(){app.addDayFlowModel.init(a),$("#addDayFlowPage .container-flow").css("min-height",$("#addDayFlowPage").height()),$("#addDayFlowPage .container-flow").css("padding-bottom",$("#addDayFlowPage .column-btn").outerHeight()),$("#addDayFlowPage .column-btn").css("margin-top",-$("#addDayFlowPage .column-btn").outerHeight())})})}),this.get("#/addTimeFlow/:storeId/:planId",function(){var a=this.params.planId,b=this.params.storeId;app.navigator.setHeader({title:"编辑时段客流量"}),app.showPage("addTimeFlowPage",function(){app.addTimeFlowModel.init(b,a)},function(){app.addTimeFlowModel=new addTimeFlowModel,app.renderTemplate("views/guestFlow/addTimeFlow.html",app.addTimeFlowModel,"addTimeFlowPage",function(){app.addTimeFlowModel.init(b,a),$("#addTimeFlowPage .container-flow").css("min-height",$("#addTimeFlowPage").height()),$("#addTimeFlowPage .container-flow").css("padding-bottom",$("#addTimeFlowPage .column-btn").outerHeight()),$("#addTimeFlowPage .column-btn").css("margin-top",-$("#addTimeFlowPage .column-btn").outerHeight())})})}),this.get("#/addTimeFlow/:storeId",function(){var a=this.params.storeId;app.navigator.setHeader({title:"添加时段客流量"}),app.showPage("addTimeFlowPage",function(){app.addTimeFlowModel.init(a)},function(){app.addTimeFlowModel=new addTimeFlowModel,app.renderTemplate("views/guestFlow/addTimeFlow.html",app.addTimeFlowModel,"addTimeFlowPage",function(){app.addTimeFlowModel.init(a),$("#addTimeFlowPage .container-flow").css("min-height",$("#addTimeFlowPage").height()),$("#addTimeFlowPage .container-flow").css("padding-bottom",$("#addTimeFlowPage .column-btn").outerHeight()),$("#addTimeFlowPage .column-btn").css("margin-top",-$("#addTimeFlowPage .column-btn").outerHeight())})})}),this.get("#/storeFlow/:storeId",function(){var a=this.params.storeId;app.navigator.hideHeader(),app.showPage("storeFlowPage",function(){app.storeFlowModel.init(a)},function(){app.storeFlowModel=new storeFlowModel,app.renderTemplate("views/guestFlow/storeFlow.html",app.storeFlowModel,"storeFlowPage",function(){app.storeFlowModel.init(a)})})}),this.get("#/flowDetail/:id/:timeType",function(){var a=this.params.id,b=this.params.timeType;app.showPage("flowDetailPage",function(){app.flowDetailModel.init(a,b)},function(){app.flowDetailModel=new flowDetailModel,app.renderTemplate("views/guestFlow/flowDetail.html",app.flowDetailModel,"flowDetailPage",function(){app.flowDetailModel.init(a,b)})})}),this.get("#/editCapacity/:storeId/:brand/:capaDate",function(){var a=this.params.storeId,b=this.params.brand,c=this.params.capaDate;app.showPage("editCapacityPage",function(){app.editCapacityModel.init(a,b,c)},function(){app.editCapacityModel=new editCapacityModel,app.renderTemplate("views/storeCapacity/editCapacity.html",app.editCapacityModel,"editCapacityPage",function(){app.editCapacityModel.init(a,b,c)})})}),this.get("#/viewCapacityList",function(){app.showPage("viewCapacityList",function(){app.viewCapacityList.init()},function(){app.viewCapacityList=new ViewCapacityList,app.renderTemplate("views/storeCapacity/viewCapacityList.html",app.viewCapacityList,"viewCapacityList",function(){app.viewCapacityList.init()})}),app.navigator.setHeader({title:"门店容量",rightClassName:"searchGlass",rightBtnCallback:function(){app.viewCapacityList.showSearch()}})}),this.get("#/viewCapacityInfo/:id",function(){var a=this.params.id;app.navigator.hideHeader(),app.showPage("viewCapacityInfo",function(){app.viewCapacityInfo.init(a)},function(){app.viewCapacityInfo=new ViewCapacityInfo,app.renderTemplate("views/storeCapacity/viewCapacityInfo.html",app.viewCapacityInfo,"viewCapacityInfo",function(){app.viewCapacityInfo.init(a)})})}),this.get("#/addBrand/:firstBrandCode/:secondBrandCode",function(){var a=this.params.firstBrandCode,b=this.params.secondBrandCode;app.navigator.setHeader({title:"添加品牌"}),app.showPage("addBrandPage",function(){app.addBrandModel.init(a,b)},function(){app.addBrandModel=new addBrandModel,app.renderTemplate("views/storeCapacity/addBrand.html",app.addBrandModel,"addBrandPage",function(){app.addBrandModel.init(a,b)})})}),this.get("#/capacityDetail/:storeId/:brandCode/:capaDate",function(){var a=this.params.storeId,b=this.params.brandCode,c=this.params.capaDate;app.navigator.setHeader({title:"详情"}),app.showPage("capacityDetailPage",function(){app.capacityDetailModel.init(a,b,c)},function(){app.capacityDetailModel=new capacityDetailModel,app.renderTemplate("views/storeCapacity/capacityDetail.html",app.capacityDetailModel,"capacityDetailPage",function(){app.capacityDetailModel.init(a,b,c)})})}),this.get("#/storePersonal/:store",function(){var a=this.params.store;app.showPage("storePersonalPage",function(){app.storePersonalModel.init(a)},function(){app.storePersonalModel=new storePersonalModel,app.renderTemplate("views/info/storePersonal.html",app.storePersonalModel,"storePersonalPage",function(){app.storePersonalModel.init(a)})})}),this.get("#/editStoreRelation/:id",function(){var a=this.params.id;app.navigator.setHeader({title:"编辑人员关系"}),app.showPage("editStoreRelationPage",function(){app.editStoreRelationModel.init(a)},function(){app.editStoreRelationModel=new editStoreRelationModel,app.renderTemplate("views/info/editStoreRelation.html",app.editStoreRelationModel,"editStoreRelationPage",function(){app.editStoreRelationModel.init(a)})})}),this.get("#/addStoreRelation/:account",function(){var a=this.params.account;app.navigator.setHeader({title:"新增人员关系"}),app.showPage("addStoreRelationPage",function(){app.addStoreRelationModel.init(a)},function(){app.addStoreRelationModel=new addStoreRelationModel,app.renderTemplate("views/info/addStoreRelation.html",app.addStoreRelationModel,"addStoreRelationPage",function(){app.addStoreRelationModel.init(a)})})}),this.get("#/addStoreStaff",function(){app.navigator.setHeader({title:"新增人员关系"}),app.showPage("addStoreStaffPage",function(){app.addStoreStaffModel.init()},function(){app.addStoreStaffModel=new addStoreStaffModel,app.renderTemplate("views/info/addStoreStaff.html",app.addStoreStaffModel,"addStoreStaffPage",function(){app.addStoreStaffModel.init()})})}),this.get("#/selectCommanderShop",function(){app.navigator.setHeader({title:"选择门店"}),app.showPage("selectCommanderShopPage",function(){app.selectCommanderShopModel.init()},function(){app.selectCommanderShopModel=new selectCommanderShopModel,app.renderTemplate("views/shop/selectCommanderShop.html",app.selectCommanderShopModel,"selectCommanderShopPage",function(){app.selectCommanderShopModel.init()})})})}),app.renderTemplate=function(a,b,c,d){var e=document.getElementById("header");$.get(a,function(a){$("#appView").append(a),ko.applyBindings(b,document.getElementById(c)),d&&("none"==window.getComputedStyle(e,null).display?$("#"+c).css("height",$(window).height()):$("#"+c).css("height",$(window).height()-44),d())})},app.showPage=function(a,b,c){$("#appView > section").hide(),app.popup.showLoading(),app.showHtml(a,b,c),window.scrollTo(0,0)},app.showHtml=function(a,b,c){document.getElementById(a)?($("#"+a).show(),b&&b()):c&&c(),setTimeout(function(){app.popup.hideLoading()},0)},app.routerListener=function(){var a=window.location.hash,b=JSON.parse(localStorage.getItem("routerHistory")),c=b.length;c>1&&a===b[c-2]?(b.pop(),app.action="back"):(b.push(a),app.action="next"),localStorage.setItem("routerHistory",JSON.stringify(b))},app.popup=function(){var a=function(){var a=this;a.content=ko.observable(),a.okName=ko.observable()},b=function(){var a=this;a.title=ko.observable(),a.content=ko.observable(),a.okName=ko.observable(),a.cancelName=ko.observable()},c=function(){var a=this;a.content=ko.observable()},d=new c,e=new b,f=new a,a=function(a,b,c){var d=$("#prompt");f.content(a),f.okName(b),m(d),"null"==c&&d.find("#promptBox").hide(),d.find(".ok").unbind("click").click(function(){o(d),c&&c()})},g=function(a,b,c,d,f,g){"function"==typeof d&&(g=f,f=d,d=null);var h=$("#confirm");e.title(d),e.content(a),e.okName(b||"确定"),e.cancelName(c||"取消"),m(h),"null"==f&&"null"==g&&h.find("#confirmBox").hide(),h.find(".ok").unbind("click").click(function(){o(h),f&&f()}),h.find(".cancel").unbind("click").click(function(){o(h),g&&g()})},h=function(a,b,c){var e=$("#alert");d.content(a),m(e),setTimeout(function(){o(e),c&&c()},b||2e3)},i=function(){var a=$(".loading");a.removeClass("none"),a.click(function(){k()})},j=function(){var a=$(".AjaxLoading");a.removeClass("none")},k=function(){var a=$(".loading");a.addClass("none"),n(a)},l=function(){var a=$(".AjaxLoading");a.addClass("none")},m=function(a){$(a).removeClass("none"),p()},n=function(a){$(a).addClass("none")},o=function(a){$(a).addClass("none"),q()},p=function(){$("#TB_overlayBG").addClass("coverFadeIn"),$("#TB_overlayBG").removeClass("none")},q=function(){$("#TB_overlayBG").removeClass("coverFadeIn"),$("#TB_overlayBG").addClass("none")},r=function(){$("#TB_overlayBG").addClass("none"),$("#confirm").addClass("none"),$("#alert").addClass("none"),$(".loading").addClass("none")},s=function(){ko.applyBindings(d,document.getElementById("alert")),ko.applyBindings(e,document.getElementById("confirm")),ko.applyBindings(f,document.getElementById("prompt"))};return{alert:h,prompt:a,confirm:g,showLoading:i,showAjaxLoading:j,hideLoading:k,hideAjaxLoading:l,hideAllPopup:r,showCover:p,hideCover:q,init:s}}(),app.toast=function(){var a=function(){var a=this;a.content=ko.observable()},b=new a,c=function(){b=new a,ko.applyBindings(b,document.getElementById("toast"))},d=function(a,b){var c=$(".toast .pmt_default");i(c,a),setTimeout(function(){h(c)},b||2e3)},e=function(a,b,c){var d=$(".toast .pmt_success"),e=$(".toast .pmt_failure");i(d,a),h(e),setTimeout(function(){h(d,c)},b||2e3)},f=function(a,b){var c=$(".toast .pmt_failure"),d=$(".toast .pmt_success");h(d),i(c,a),setTimeout(function(){h(c)},b||2e3)},g=function(a,b){var c=$(".toast .pmt_sigh");i(c,a),setTimeout(function(){h(c)},b||2e3)},h=function(a,b){$(a).addClass("none"),b&&b()},i=function(a,c){b.content(c),a.removeClass("none")},j=function(a,b,c){f(app.errorMsg.getMsg(a),b,c)};return{defalut:d,success:e,error:f,info:g,init:c,errorCode:j}}(),app.navigator=function(){var a=function(){var a=this;a.title=ko.observable(""),a.leftBtnName=ko.observable(""),a.rightBtnName=ko.observable(""),a.rightClassName=ko.observable(""),a.showBackBtn=ko.observable(!0),a.leftBtnCallback=function(){var a=location.href.split("#/")[1],b=localStorage.menuList;b&&b.indexOf(a)>-1?location.href="#/index":history.go(-1)},a.rightBtnCallback=function(){}},b=new a,c=new a,d=function(){c=new a,ko.applyBindings(c,document.getElementById("header"))},e=function(a){$("#header").removeClass("none"),$("#header").show(),c.title(a.title),c.leftBtnName(a.leftBtnName||b.leftBtnName()),c.rightBtnName(a.rightBtnName||b.rightBtnName()),c.rightClassName(a.rightClassName||""),void 0!=a.showBackBtn&&c.showBackBtn(a.showBackBtn),c.leftBtnCallback=a.leftBtnCallback||b.leftBtnCallback,c.rightBtnCallback=a.rightBtnCallback||b.rightBtnCallback},f=function(){$("#header").addClass("none")};return{init:d,setHeader:e,hideHeader:f,originalHeader:b}}(),app.nothing=function(){var a=function(){var a=this;a.isShow=ko.observable(!1)},b=new a,c=function(){b.isShow(!0)},d=function(){b.isShow(!1)},e=function(a){a&&a(),b.isShow(!1),console.log(b.isShow())},f=function(){ko.applyBindings(b,document.getElementById("nothing"))};return{show:c,hide:d,refresh:e,init:f}}(),app.util=function(){function a(a){var b=/^[+-]?[1-9]?[0-9]*\.[0-9]*$/;return b.test(a)}var b=function(){var a=localStorage.token;return void 0===a||""===a?(app.weixin.authLogin(),!1):!0},c=function(){var a=window.navigator.userAgent.toLowerCase();return"micromessenger"==a.match(/MicroMessenger/i)?!0:!1},d=function(a){if(0==a||null==a||void 0==a)return["0","00"];var b=(a/100).toFixed(2).toString().split(".");return b[0]=Math.abs(b[0]),b},e=function(a){return(a/100).toFixed(2)},f=function(a){return+a>=1e4?(a/1e4).toFixed(2)+"万元":a+"元"},g=function(a){var b=parseInt(Number(a)/8),c=(100*Number(a)-8*b*100)/100,d={hour:c,day:b};return d},h=function(a,b){return 8*Number(a)+Number(b)},i=function(a){var b=parseInt(a/8),c=(100*a-8*b*100)/100,d="";return 0!=b&&(d+=b+"天"),0!=c&&(d+=c+"小时"),0==b&&0==c&&(d="0小时"),d},j=function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)","i"),c=window.location.href.split("?");if(c.length<2)return null;var d=c[1].match(b);return c.length>2&&(d=c[c.length-1].match(b)),null!=d?decodeURIComponent(d[2]):null},k=function(a,b,c,d,e,f){if(void 0==e||e){var g=m();a=app.angelDomain+n(a,g)}else a=app.angelDomain+a;f=f?!0:!1;var h=b.position;delete b.position,app.getAjax=function(){$.ajax({url:a,type:"POST",data:JSON.stringify(b),async:!f,dataType:"json",contentType:"application/json",success:function(a){3805==a.responseCode&&(app.toast.error("当前数据过期！"),location.href="#/index"),2301==a.responseCode||2302==a.responseCode?(app.toast.error("用户失效，请重新登录"),location.href="#/login"):c&&c(a)},error:d||function(){app.toast.error(app["const"].AJAX_ERROR_MSG,2e3)}})},app.getPositionAjax=function(b){var c=JSON.parse(b);a=n(a,{gpsType:c.gpsType,gpsHeight:c.gpsHeight,gpsLongitude:c.gpsLongitude,gpsLatitude:c.gpsLatitude,gpsAddress:c.gpsAddress}),app.getAjax()},h?app.nativeFn.getLocation("app.getPositionAjax"):app.getAjax()},l=function(a,b,c,d,e,f){if(void 0==e||e){var g=m();a=app.chartsDomain+n(a,g)}else a=app.chartsDomain+a;f=f?!0:!1,b=JSON.stringify(b),$.ajax({url:a,type:"POST",data:b,async:!f,dataType:"json",contentType:"application/json",success:function(a){2301==a.responseCode||2311==a.responseCode?app.toast.error("用户失效，请重新登录"):c&&c(a)},error:d||function(){app.toast.error(app["const"].AJAX_ERROR_MSG,2e3)}})},m=function(){var a=app["const"].APP_SECRET,b=app.app_client||app["const"].APP_CLIENT,c=app.app_cuid||app["const"].APP_CUID,d=app["const"].APP_FORMAT,e=(new Date).getTime(),f=app.app_version||app["const"].APP_VERSION,g=app.encrypt.hex_md5(a+b+c+d+e+f+a);return{client:b,cuid:c,format:d,time:e,version:f,sign:g}},n=function(a,b){var c=/\?/,d="";return void 0!=b&&("object"==typeof b?d=$.param(b):"string"==typeof b&&(d=b),a+=(c.test(a)?"&":"?")+d),a},o=function(a){a/=100,a=a.toString().replace(/\$|\,/g,""),isNaN(a)&&(a="0");var b=a==(a=Math.abs(a));

a=Math.floor(100*a+.50000000001);var c=a%100;a=Math.floor(a/100).toString(),10>c&&(c="0"+c);for(var d=0;d<Math.floor((a.length-(1+d))/3);d++)a=a.substring(0,a.length-(4*d+3))+","+a.substring(a.length-(4*d+3));return(b?"":"-")+a+"."+c},p=function(a){if(null==a)return"";var b=new Date(a);return b.format("yyyy")},q=function(a){if(null==a||0==a)return"";var b=new Date(a);return b.format("yyyy/MM/dd")},r=function(a){if(null==a)return"";var b=new Date(a);return b.format("yy/MM/dd")},s=function(a){if(null==a)return"";var b=new Date(a);return b.format("hh:mm:ss")},t=function(a){if(null==a)return"";var b=new Date(a);return b.format("hh:mm")},u=function(a,b){if(null==a||0==a)return"";var c=new Date(a);return c.format(b)},v=function(a){var b=new Date(a);return b.format("yyyy/MM/dd hh:mm:ss")},w=function(a){var b=new Date(a);return b.format("yyyy/MM/dd hh:mm")},x=function(a){var b=new Date(a);return b.format("MM/dd hh:mm")},y=function(a){var b=a.match(/-/g);if(-1!=a.indexOf("-")&&b.length>1&&(a=a.replace(/-/g,"/")),-1!=a.indexOf("undefined"))return null;var c=Date.parse(new Date(a));return c},z=function(a,b){var c=a?a:"";return c.length<=b?c:c=a.substr(0,b)+"..."},A=function(a){var b=["周日","周一","周二","周三","周四","周五","周六"],c=new Date(a);return b[c.getDay()]},B=function(){var a=location.href.split("#/")[1],b=localStorage.menuList;b&&b.indexOf(a)>-1?location.href="#/index":window.history.go(-1)},C=function(a){var b,c=a||(new Date).getTime();return b=c-c%864e5-288e5};Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"D+":this.getDay(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a};var D=function(a){var b={preset:"time",theme:"android-holo-light",display:"bottom",mode:"scroller",dateFormat:"hh:MM",defaultValue:new Date(0),lang:"zh",buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]};return $(a).mobiscroll(b)},E=function(a){var b=CryptoJS.enc.Utf8.parse("19490101"),c=CryptoJS.DES.encrypt(a,b,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7});return c.ciphertext.toString(CryptoJS.enc.Base64)},F=function(){var a=location.href.split("#/")[1];-1!==a.indexOf("index")||-1!==a.indexOf("login")?app.nativeFn.closeWebView():window.history.go(-1)},G=function(a){var b=a,c=b.indexOf("?"),d=b.indexOf("#");if(c>0&&d>0&&d>c){var e=b.substring(0,c),f=b.substring(d,b.length);return e+f}},H=function(a){var b={};return a===app["const"].WAIT_IMME_APPROVE?(b.orderStatusShow="待直接上级审核",b.status="stay",b.recall=!0):a===app["const"].WAIT_INDI_APPROVE?(b.orderStatusShow="待隔级上级审核",b.status="stay",b.recall=!0):a===app["const"].WAIT_BACK_APPLY?(b.orderStatusShow="待销假",b.status="stay",b.recall=!0):a===app["const"].WAIT_BACK_APPROVE?(b.orderStatusShow="待销假审核",b.status="stay",b.recall=!1):a===app["const"].WAIT_FILE_APPROVE?(b.orderStatusShow="待证明文件审核",b.status="stay",b.recall=!0):a===app["const"].BACK_REJECT?(b.orderStatusShow="销假审核不通过",b.status="NotThrough",b.recall=!1):a===app["const"].FILE_REJECT?(b.orderStatusShow="证明文件审核不通过",b.status="NotThrough",b.recall=!1):a===app["const"].PROCESS_FINISH?(b.orderStatusShow="已完成",b.status="complete",b.recall=!1):a===app["const"].PROCESS_CLOSE?(b.orderStatusShow="已关闭",b.status="complete",b.recall=!1):a===app["const"].PROCESS_CANCEL?(b.orderStatusShow="已撤销",b.status="complete",b.recall=!1):a===app["const"].IMME_REJECT?(b.orderStatusShow="直接上级不通过",b.status="NotThrough",b.recall=!1):a===app["const"].INDI_REJECT?(b.orderStatusShow="间接上级不通过",b.status="NotThrough",b.recall=!1):a===app["const"].APPLY_TIME_OUT?(b.orderStatusShow="申请超时",b.status="complete",b.recall=!1):a===app["const"].BACK_TIME_OUT?(b.orderStatusShow="销假超时",b.status="complete",b.recall=!1):a===app["const"].EXCEPION_FINISH&&(b.orderStatusShow="异常处理完成",b.status="complete",b.recall=!1),b},I=function(a){var b={};return b.status=a,a===app["const"].E0055?(b.statusText="未执行",b.btnText="开始执行",b.displayDataShow=!0,b.displayDataCss=!1):a===app["const"].E0060?(b.statusText="执行中",b.btnText="结束执行",b.displayDataShow=!0,b.displayDataCss=!0):a===app["const"].E0065?(b.statusText="执行结束",b.btnText="总结",b.displayDataShow=!1,b.displayDataCss=!1):a===app["const"].E0070?(b.statusText="不执行",b.btnText="",b.displayDataShow=!1,b.displayDataCss=!1):a===app["const"].E0075&&(b.statusText="已结案",b.btnText="",b.displayDataShow=!1,b.displayDataCss=!1),b},J=function(a){var b=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;return b.test(a)},K=function(a){var b=/^\d+(\.\d+)?$/;return b.test(a)},L=function(a){var b=/^[0-9]*[0-9][0-9]*$/;return b.test(a)},M=function(a){var b=$("#"+a).val();$("#"+a).val("").focus().val(b)},N=function(a){return app.util.isInt(a)||(a=a.toFixed(2),0!=a)?a:0},O=function(a,b,c){if(localStorage.getItem(a)){var d=JSON.parse(localStorage.getItem(a));return void c(d[b])}app.util.ajax("/storeDisplay/getTypeByCode",{typeCode:a,token:localStorage.token},function(d){if(0===d.responseCode){var e=new Object;d.typeList.forEach(function(a){e[a.typeCode]=a.typeName}),localStorage.setItem(a,JSON.stringify(e)),null!=c&&c(e[b])}else app.toast.error(d.responseMsg)})},P=function(a,b){var c="^[+]?[1-9]?[0-9]*[.][0-9]{"+b+"}$",d=new RegExp(c);return d.test(a)};return{isLogin:b,getQueryString:j,changeTwoDecimal:d,ajax:k,chartAjax:l,getBaseParam:m,buildUrl:n,isWeiXin:c,formatDate:q,formatYYMMdd:r,formatDateTimeToHM:w,formatDateTimeToMD:x,formatYear:p,formatTime:s,formatTimeMin:t,formatPattern:u,formatDateTime:v,priceTransform:e,formatPrice:o,formatLargeMoney:f,leaveHourTransform:g,leaveDayTransform:h,leaveHourShow:i,formatTimeStamp:y,subStr:z,getDay:A,initTimePicker:D,getZeroTs:C,des:E,isCloseWebView:F,clearUrl:G,goBack:B,getLeaveStatus:H,getStoreDisplayStatus:I,isEmoji:J,isNumber:K,isInt:L,getSfaTypeByCode:O,focus:M,toFixedTwo:N,isDecimal:a,isDecimalMultiple:P}}(),function(a){a.fn.qrcode=function(b){function c(a){this.mode=h,this.data=a}function d(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function e(a,b){if(void 0==a.length)throw Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function f(a,b){this.totalCount=a,this.dataCount=b}function g(){this.buffer=[],this.length=0}var h;c.prototype={getLength:function(){return this.data.length},write:function(a){for(var b=0;b<this.data.length;b++)a.put(this.data.charCodeAt(b),8)}},d.prototype={addData:function(a){this.dataList.push(new c(a)),this.dataCache=null},isDark:function(a,b){if(0>a||this.moduleCount<=a||0>b||this.moduleCount<=b)throw Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var a=1,a=1;40>a;a++){for(var b=f.getRSBlocks(a,this.errorCorrectLevel),c=new g,d=0,e=0;e<b.length;e++)d+=b[e].dataCount;for(e=0;e<this.dataList.length;e++)b=this.dataList[e],c.put(b.mode,4),c.put(b.getLength(),i.getLengthInBits(b.mode,a)),b.write(c);if(c.getLengthInBits()<=8*d)break}this.typeNumber=a}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,b){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var c=0;c<this.moduleCount;c++){this.modules[c]=Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[c][e]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,b),7<=this.typeNumber&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=d.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,b)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(-1>=a+c||this.moduleCount<=a+c))for(var d=-1;7>=d;d++)-1>=b+d||this.moduleCount<=b+d||(this.modules[a+c][b+d]=c>=0&&6>=c&&(0==d||6==d)||d>=0&&6>=d&&(0==c||6==c)||c>=2&&4>=c&&d>=2&&4>=d?!0:!1)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;8>c;c++){this.makeImpl(!0,c);var d=i.getLostPoint(this);(0==c||a>d)&&(a=d,b=c)}return b},createMovieClip:function(a,b,c){for(a=a.createEmptyMovieClip(b,c),this.make(),b=0;b<this.modules.length;b++)for(var c=1*b,d=0;d<this.modules[b].length;d++){var e=1*d;this.modules[b][d]&&(a.beginFill(0,100),a.moveTo(e,c),a.lineTo(e+1,c),a.lineTo(e+1,c+1),a.lineTo(e,c+1),a.endFill())}return a},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(a=8;a<this.moduleCount-8;a++)null==this.modules[6][a]&&(this.modules[6][a]=0==a%2)},setupPositionAdjustPattern:function(){for(var a=i.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var f=-2;2>=f;f++)for(var g=-2;2>=g;g++)this.modules[d+f][e+g]=-2==f||2==f||-2==g||2==g||0==f&&0==g?!0:!1}},setupTypeNumber:function(a){for(var b=i.getBCHTypeNumber(this.typeNumber),c=0;18>c;c++){var d=!a&&1==(b>>c&1);this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(c=0;18>c;c++)d=!a&&1==(b>>c&1),this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d},setupTypeInfo:function(a,b){for(var c=i.getBCHTypeInfo(this.errorCorrectLevel<<3|b),d=0;15>d;d++){var e=!a&&1==(c>>d&1);6>d?this.modules[d][8]=e:8>d?this.modules[d+1][8]=e:this.modules[this.moduleCount-15+d][8]=e}for(d=0;15>d;d++)e=!a&&1==(c>>d&1),8>d?this.modules[8][this.moduleCount-d-1]=e:9>d?this.modules[8][15-d-1+1]=e:this.modules[8][15-d-1]=e;this.modules[this.moduleCount-8][8]=!a},mapData:function(a,b){for(var c=-1,d=this.moduleCount-1,e=7,f=0,g=this.moduleCount-1;g>0;g-=2)for(6==g&&g--;;){for(var h=0;2>h;h++)if(null==this.modules[d][g-h]){var j=!1;f<a.length&&(j=1==(a[f]>>>e&1)),i.getMask(b,d,g-h)&&(j=!j),this.modules[d][g-h]=j,e--,-1==e&&(f++,e=7)}if(d+=c,0>d||this.moduleCount<=d){d-=c,c=-c;break}}}},d.PAD0=236,d.PAD1=17,d.createData=function(a,b,c){for(var b=f.getRSBlocks(a,b),e=new g,h=0;h<c.length;h++){var j=c[h];e.put(j.mode,4),e.put(j.getLength(),i.getLengthInBits(j.mode,a)),j.write(e)}for(h=a=0;h<b.length;h++)a+=b[h].dataCount;if(e.getLengthInBits()>8*a)throw Error("code length overflow. ("+e.getLengthInBits()+">"+8*a+")");for(e.getLengthInBits()+4<=8*a&&e.put(0,4);0!=e.getLengthInBits()%8;)e.putBit(!1);for(;!(e.getLengthInBits()>=8*a)&&(e.put(d.PAD0,8),!(e.getLengthInBits()>=8*a));)e.put(d.PAD1,8);return d.createBytes(e,b)},d.createBytes=function(a,b){for(var c=0,d=0,f=0,g=Array(b.length),h=Array(b.length),j=0;j<b.length;j++){var k=b[j].dataCount,l=b[j].totalCount-k,d=Math.max(d,k),f=Math.max(f,l);g[j]=Array(k);for(var m=0;m<g[j].length;m++)g[j][m]=255&a.buffer[m+c];for(c+=k,m=i.getErrorCorrectPolynomial(l),k=new e(g[j],m.getLength()-1).mod(m),h[j]=Array(m.getLength()-1),m=0;m<h[j].length;m++)l=m+k.getLength()-h[j].length,h[j][m]=l>=0?k.get(l):0}for(m=j=0;m<b.length;m++)j+=b[m].totalCount;for(c=Array(j),m=k=0;d>m;m++)for(j=0;j<b.length;j++)m<g[j].length&&(c[k++]=g[j][m]);for(m=0;f>m;m++)for(j=0;j<b.length;j++)m<h[j].length&&(c[k++]=h[j][m]);return c},h=4;for(var i={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;0<=i.getBCHDigit(b)-i.getBCHDigit(i.G15);)b^=i.G15<<i.getBCHDigit(b)-i.getBCHDigit(i.G15);return(a<<10|b)^i.G15_MASK},getBCHTypeNumber:function(a){for(var b=a<<12;0<=i.getBCHDigit(b)-i.getBCHDigit(i.G18);)b^=i.G18<<i.getBCHDigit(b)-i.getBCHDigit(i.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return i.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case 0:return 0==(b+c)%2;case 1:return 0==b%2;case 2:return 0==c%3;case 3:return 0==(b+c)%3;case 4:return 0==(Math.floor(b/2)+Math.floor(c/3))%2;case 5:return 0==b*c%2+b*c%3;case 6:return 0==(b*c%2+b*c%3)%2;case 7:return 0==(b*c%3+(b+c)%2)%2;default:throw Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var b=new e([1],0),c=0;a>c;c++)b=b.multiply(new e([1,j.gexp(c)],0));return b},getLengthInBits:function(a,b){if(b>=1&&10>b)switch(a){case 1:return 10;case 2:return 9;case h:return 8;case 8:return 8;default:throw Error("mode:"+a)}else if(27>b)switch(a){case 1:return 12;case 2:return 11;case h:return 16;case 8:return 10;default:throw Error("mode:"+a)}else{if(!(41>b))throw Error("type:"+b);switch(a){case 1:return 14;case 2:return 13;case h:return 16;case 8:return 12;default:throw Error("mode:"+a)}}},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;b>d;d++)for(var e=0;b>e;e++){for(var f=0,g=a.isDark(d,e),h=-1;1>=h;h++)if(!(0>d+h||d+h>=b))for(var i=-1;1>=i;i++)0>e+i||e+i>=b||0==h&&0==i||g==a.isDark(d+h,e+i)&&f++;f>5&&(c+=3+f-5)}for(d=0;b-1>d;d++)for(e=0;b-1>e;e++)f=0,a.isDark(d,e)&&f++,a.isDark(d+1,e)&&f++,a.isDark(d,e+1)&&f++,a.isDark(d+1,e+1)&&f++,(0==f||4==f)&&(c+=3);for(d=0;b>d;d++)for(e=0;b-6>e;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(e=0;b>e;e++)for(d=0;b-6>d;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(e=f=0;b>e;e++)for(d=0;b>d;d++)a.isDark(d,e)&&f++;return a=Math.abs(100*f/b/b-50)/5,c+10*a}},j={glog:function(a){if(1>a)throw Error("glog("+a+")");return j.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;a>=256;)a-=255;return j.EXP_TABLE[a]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},k=0;8>k;k++)j.EXP_TABLE[k]=1<<k;for(k=8;256>k;k++)j.EXP_TABLE[k]=j.EXP_TABLE[k-4]^j.EXP_TABLE[k-5]^j.EXP_TABLE[k-6]^j.EXP_TABLE[k-8];for(k=0;255>k;k++)j.LOG_TABLE[j.EXP_TABLE[k]]=k;return e.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var b=Array(this.getLength()+a.getLength()-1),c=0;c<this.getLength();c++)for(var d=0;d<a.getLength();d++)b[c+d]^=j.gexp(j.glog(this.get(c))+j.glog(a.get(d)));return new e(b,0)},mod:function(a){if(0>this.getLength()-a.getLength())return this;for(var b=j.glog(this.get(0))-j.glog(a.get(0)),c=Array(this.getLength()),d=0;d<this.getLength();d++)c[d]=this.get(d);for(d=0;d<a.getLength();d++)c[d]^=j.gexp(j.glog(a.get(d))+b);return new e(c,0).mod(a)}},f.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],f.getRSBlocks=function(a,b){var c=f.getRsBlockTable(a,b);if(void 0==c)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var d=c.length/3,e=[],g=0;d>g;g++)for(var h=c[3*g+0],i=c[3*g+1],j=c[3*g+2],k=0;h>k;k++)e.push(new f(i,j));return e},f.getRsBlockTable=function(a,b){switch(b){case 1:return f.RS_BLOCK_TABLE[4*(a-1)+0];case 0:return f.RS_BLOCK_TABLE[4*(a-1)+1];case 3:return f.RS_BLOCK_TABLE[4*(a-1)+2];case 2:return f.RS_BLOCK_TABLE[4*(a-1)+3]}},g.prototype={get:function(a){return 1==(this.buffer[Math.floor(a/8)]>>>7-a%8&1)},put:function(a,b){for(var c=0;b>c;c++)this.putBit(1==(a>>>b-c-1&1))},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}},"string"==typeof b&&(b={text:b}),b=a.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},b),this.each(function(){var c;if("canvas"==b.render){c=new d(b.typeNumber,b.correctLevel),c.addData(b.text),c.make();var e=document.createElement("canvas");e.width=b.width,e.height=b.height;for(var f=e.getContext("2d"),g=b.width/c.getModuleCount(),h=b.height/c.getModuleCount(),i=0;i<c.getModuleCount();i++)for(var j=0;j<c.getModuleCount();j++){f.fillStyle=c.isDark(i,j)?b.foreground:b.background;var k=Math.ceil((j+1)*g)-Math.floor(j*g),l=Math.ceil((i+1)*g)-Math.floor(i*g);f.fillRect(Math.round(j*g),Math.round(i*h),k,l)}}else for(c=new d(b.typeNumber,b.correctLevel),c.addData(b.text),c.make(),e=a("<table></table>").css("width",b.width+"px").css("height",b.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",b.background),f=b.width/c.getModuleCount(),g=b.height/c.getModuleCount(),h=0;h<c.getModuleCount();h++)for(i=a("<tr></tr>").css("height",g+"px").appendTo(e),j=0;j<c.getModuleCount();j++)a("<td></td>").css("width",f+"px").css("background-color",c.isDark(h,j)?b.foreground:b.background).appendTo(i);c=e,jQuery(c).appendTo(this)})}}(jQuery),app.regex=function(){var a=function(a){var b=/^\d{11}$/;return void 0!=a&&b.test(a)},b=function(a){return void 0!=a&&a.length>=6&&length<=20},c=function(a){return void 0!=a&&a.length>=2&&a.length<=20},d=function(a){return void 0!=a&&a.length<=15&&""!=a},e=function(a){return void 0!=a&&a.length<=60&&""!=a},f=function(a){return void 0!=a&&a.length<=200},g=function(a){return void 0!=a&&99>=a},h=function(a){return void 0!=a&&a>=1},i=function(a){var b=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;return b.test(a)},j=function(a){return void 0!=a&&a.length>0},k=function(a){var b=/^[0-9]*[1-9][0-9]*$/;return b.test(a)},k=function(a){var b=/^[0-9]*[1-9][0-9]*$/;return b.test(a)},l=function(a){var b=/^\+?(0|[1-9]\d*)$/;return b.test(a)};return{mobile:a,password:b,userName:c,addressName:d,address:e,comment:f,maxVolume:g,minVolume:h,mobileCode:j,emoji:i,positive:k,positiveWithoutZero:l}}(),app.errorMsg=function(){var a={1101:"非法参数",1102:"参数格式不正确",1103:"请打开“定位服务”来允许“SFA”确定您的位置，以正常提交信息！",1201:"数据库写入失败",1202:"数据库读取失败",1203:"无查询结果",2100:"验证码不能为空，请输入验证码",2101:"手机号码已注册，请直接登录",2102:"手机号码不能为空，请输入手机号码",2103:"手机号码格式错误，请输入正确的手机号码",2104:"密码不能为空",2105:"验证码无效",2106:"验证码错误，请重新输入或重新获取",2201:"账号不存在",2202:"请输入员工编号",2203:"密码不能为空",2204:"账号或者密码错误",2205:"密码不能为空，请输入密码",2301:"登录超时或已在其他设备登录，请重新登陆",2302:"Token不存在",2303:"Token不能为空",2401:"输入账号不存在",2402:"输入账号与手机号码不匹配",2403:"验证码尚未失效",2501:"信息获取异常",3101:"计划日期不能为空并且要为纯数字",3102:"计划ID不能为空并且要为纯数字",3103:"打卡状态不能为空",3104:"您还未进店或处于离店状态，不能打离店卡",3105:"您处于进店状态，不能打进店卡",3106:"您属于受限制人员，不能打卡",3108:"该计划已打满5对卡，不能再打卡",3109:"您已经进入其他门店，请先离店再进入该门店",3801:"计划编号不能为空",3802:"图片路径不能为空",3803:"超过最大上传图片数",3804:"计划Id不存在",3805:"当前数据过期！",4101:"门店编号不能为空",4102:"班次不能为空",4103:"工作任务不能为空",4104:"产品列表不能为空",4105:"计划时间不能为空",4106:"已打卡，今日不能休息",4107:"有效标记不能为空并且是合法标记",4108:"门店编码有误或不存在",4109:"您与当前门店未挂靠关系或关系失效",4110:"该时间段内已制定计划",4111:"页面来源标记不能为空并且是合法标记",4112:"当前计划已打卡，不能操作为今日休息",5201:"日期与计划编号不能同时为空",5202:"实际日期不能为空",5203:"月份不能为空",5204:"pageFlag 只能是todaywork或者salesreport",5205:"pageFlag 只能是todaywork或者mystore",5206:"pageFlag 只能是todaywork或者createplan",10101:"月份不能为空",11101:"附件的计划编号不能为空",11102:"附件的guid不能为空",11103:"附件删除失败"},b=function(b){return void 0==a[b.responseCode]?b.responseMsg:a[b.responseCode]};return{getMsg:b}}();var CryptoJS=CryptoJS||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=CryptoJS,b=a.lib.WordArray;a.enc.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp(),a=[];for(var e=0;c>e;e+=3)for(var f=(b[e>>>2]>>>24-8*(e%4)&255)<<16|(b[e+1>>>2]>>>24-8*((e+1)%4)&255)<<8|b[e+2>>>2]>>>24-8*((e+2)%4)&255,g=0;4>g&&c>e+.75*g;g++)a.push(d.charAt(f>>>6*(3-g)&63));if(b=d.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var c=a.length,d=this._map,e=d.charAt(64);e&&(e=a.indexOf(e),-1!=e&&(c=e));for(var e=[],f=0,g=0;c>g;g++)if(g%4){var h=d.indexOf(a.charAt(g-1))<<2*(g%4),i=d.indexOf(a.charAt(g))>>>6-2*(g%4);e[f>>>2]|=(h|i)<<24-8*(f%4),f++}return b.create(e,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){function b(a,b,c,d,e,f,g){return a=a+(b&c|~b&d)+e+g,(a<<f|a>>>32-f)+b}function c(a,b,c,d,e,f,g){return a=a+(b&d|c&~d)+e+g,(a<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,g){return a=a+(b^c^d)+e+g,(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){return a=a+(c^(b|~d))+e+g,(a<<f|a>>>32-f)+b}for(var f=CryptoJS,g=f.lib,h=g.WordArray,i=g.Hasher,g=f.algo,j=[],k=0;64>k;k++)j[k]=4294967296*a.abs(a.sin(k+1))|0;g=g.MD5=i.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,f){for(var g=0;16>g;g++){var h=f+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var g=this._hash.words,h=a[f+0],i=a[f+1],k=a[f+2],l=a[f+3],m=a[f+4],n=a[f+5],o=a[f+6],p=a[f+7],q=a[f+8],r=a[f+9],s=a[f+10],t=a[f+11],u=a[f+12],v=a[f+13],w=a[f+14],x=a[f+15],y=g[0],z=g[1],A=g[2],B=g[3],y=b(y,z,A,B,h,7,j[0]),B=b(B,y,z,A,i,12,j[1]),A=b(A,B,y,z,k,17,j[2]),z=b(z,A,B,y,l,22,j[3]),y=b(y,z,A,B,m,7,j[4]),B=b(B,y,z,A,n,12,j[5]),A=b(A,B,y,z,o,17,j[6]),z=b(z,A,B,y,p,22,j[7]),y=b(y,z,A,B,q,7,j[8]),B=b(B,y,z,A,r,12,j[9]),A=b(A,B,y,z,s,17,j[10]),z=b(z,A,B,y,t,22,j[11]),y=b(y,z,A,B,u,7,j[12]),B=b(B,y,z,A,v,12,j[13]),A=b(A,B,y,z,w,17,j[14]),z=b(z,A,B,y,x,22,j[15]),y=c(y,z,A,B,i,5,j[16]),B=c(B,y,z,A,o,9,j[17]),A=c(A,B,y,z,t,14,j[18]),z=c(z,A,B,y,h,20,j[19]),y=c(y,z,A,B,n,5,j[20]),B=c(B,y,z,A,s,9,j[21]),A=c(A,B,y,z,x,14,j[22]),z=c(z,A,B,y,m,20,j[23]),y=c(y,z,A,B,r,5,j[24]),B=c(B,y,z,A,w,9,j[25]),A=c(A,B,y,z,l,14,j[26]),z=c(z,A,B,y,q,20,j[27]),y=c(y,z,A,B,v,5,j[28]),B=c(B,y,z,A,k,9,j[29]),A=c(A,B,y,z,p,14,j[30]),z=c(z,A,B,y,u,20,j[31]),y=d(y,z,A,B,n,4,j[32]),B=d(B,y,z,A,q,11,j[33]),A=d(A,B,y,z,t,16,j[34]),z=d(z,A,B,y,w,23,j[35]),y=d(y,z,A,B,i,4,j[36]),B=d(B,y,z,A,m,11,j[37]),A=d(A,B,y,z,p,16,j[38]),z=d(z,A,B,y,s,23,j[39]),y=d(y,z,A,B,v,4,j[40]),B=d(B,y,z,A,h,11,j[41]),A=d(A,B,y,z,l,16,j[42]),z=d(z,A,B,y,o,23,j[43]),y=d(y,z,A,B,r,4,j[44]),B=d(B,y,z,A,u,11,j[45]),A=d(A,B,y,z,x,16,j[46]),z=d(z,A,B,y,k,23,j[47]),y=e(y,z,A,B,h,6,j[48]),B=e(B,y,z,A,p,10,j[49]),A=e(A,B,y,z,w,15,j[50]),z=e(z,A,B,y,n,21,j[51]),y=e(y,z,A,B,u,6,j[52]),B=e(B,y,z,A,l,10,j[53]),A=e(A,B,y,z,s,15,j[54]),z=e(z,A,B,y,i,21,j[55]),y=e(y,z,A,B,q,6,j[56]),B=e(B,y,z,A,x,10,j[57]),A=e(A,B,y,z,o,15,j[58]),z=e(z,A,B,y,v,21,j[59]),y=e(y,z,A,B,m,6,j[60]),B=e(B,y,z,A,t,10,j[61]),A=e(A,B,y,z,k,15,j[62]),z=e(z,A,B,y,r,21,j[63]);g[0]=g[0]+y|0,g[1]=g[1]+z|0,g[2]=g[2]+A|0,g[3]=g[3]+B|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;c[e>>>5]|=128<<24-e%32;var f=a.floor(d/4294967296);for(c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),b.sigBytes=4*(c.length+1),this._process(),b=this._hash,c=b.words,d=0;4>d;d++)e=c[d],c[d]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);return b},clone:function(){var a=i.clone.call(this);return a._hash=this._hash.clone(),a}}),f.MD5=i._createHelper(g),f.HmacMD5=i._createHmacHelper(g)}(Math),function(){var a=CryptoJS,b=a.lib,c=b.Base,d=b.WordArray,b=a.algo,e=b.EvpKDF=c.extend({cfg:c.extend({keySize:4,hasher:b.MD5,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,e=c.hasher.create(),f=d.create(),g=f.words,h=c.keySize,c=c.iterations;g.length<h;){i&&e.update(i);var i=e.update(a).finalize(b);e.reset();for(var j=1;c>j;j++)i=e.finalize(i),e.reset();f.concat(i)}return f.sigBytes=4*h,f}});a.EvpKDF=function(a,b,c){return e.create(c).compute(a,b)}}(),CryptoJS.lib.Cipher||function(a){var b=CryptoJS,c=b.lib,d=c.Base,e=c.WordArray,f=c.BufferedBlockAlgorithm,g=b.enc.Base64,h=b.algo.EvpKDF,i=c.Cipher=f.extend({cfg:d.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){f.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){return a&&this._append(a),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(a){return{encrypt:function(b,c,d){return("string"==typeof c?o:n).encrypt(a,b,c,d)},decrypt:function(b,c,d){return("string"==typeof c?o:n).decrypt(a,b,c,d)}}}});c.StreamCipher=i.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var j=b.mode={},k=function(b,c,d){var e=this._iv;e?this._iv=a:e=this._prevBlock;for(var f=0;d>f;f++)b[c+f]^=e[f]},l=(c.BlockCipherMode=d.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}})).extend();l.Encryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize;k.call(this,a,b,d),c.encryptBlock(a,b),this._prevBlock=a.slice(b,b+d)}}),l.Decryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize,e=a.slice(b,b+d);c.decryptBlock(a,b),k.call(this,a,b,d),this._prevBlock=e}}),j=j.CBC=l,l=(b.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,f=[],g=0;c>g;g+=4)f.push(d);c=e.create(f,c),a.concat(c)},unpad:function(a){a.sigBytes-=255&a.words[a.sigBytes-1>>>2]}},c.BlockCipher=i.extend({cfg:i.cfg.extend({mode:j,padding:l}),reset:function(){i.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var m=c.CipherParams=d.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this);

}}),j=(b.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;return a=a.salt,(a?e.create([1398893684,1701076831]).concat(a).concat(b):b).toString(g)},parse:function(a){a=g.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=e.create(b.slice(2,4));b.splice(0,4),a.sigBytes-=16}return m.create({ciphertext:a,salt:c})}},n=c.SerializableCipher=d.extend({cfg:d.extend({format:j}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d);return b=e.finalize(b),e=e.cfg,m.create({ciphertext:b,key:c,iv:e.iv,algorithm:a,mode:e.mode,padding:e.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),b=(b.kdf={}).OpenSSL={execute:function(a,b,c,d){return d||(d=e.random(8)),a=h.create({keySize:b+c}).compute(a,d),c=e.create(a.words.slice(b),4*c),a.sigBytes=4*b,m.create({key:a,iv:c,salt:d})}},o=c.PasswordBasedCipher=n.extend({cfg:n.cfg.extend({kdf:b}),encrypt:function(a,b,c,d){return d=this.cfg.extend(d),c=d.kdf.execute(c,a.keySize,a.ivSize),d.iv=c.iv,a=n.encrypt.call(this,a,b,c.key,d),a.mixIn(c),a},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),c=d.kdf.execute(c,a.keySize,a.ivSize,b.salt),d.iv=c.iv,n.decrypt.call(this,a,b,c.key,d)}})}(),function(){function a(a,b){var c=(this._lBlock>>>a^this._rBlock)&b;this._rBlock^=c,this._lBlock^=c<<a}function b(a,b){var c=(this._rBlock>>>a^this._lBlock)&b;this._lBlock^=c,this._rBlock^=c<<a}var c=CryptoJS,d=c.lib,e=d.WordArray,d=d.BlockCipher,f=c.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],h=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],i=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],j=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],k=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],l=f.DES=d.extend({_doReset:function(){for(var a=this._key.words,b=[],c=0;56>c;c++){var d=g[c]-1;b[c]=a[d>>>5]>>>31-d%32&1}for(a=this._subKeys=[],d=0;16>d;d++){for(var e=a[d]=[],f=i[d],c=0;24>c;c++)e[c/6|0]|=b[(h[c]-1+f)%28]<<31-c%6,e[4+(c/6|0)]|=b[28+(h[c+24]-1+f)%28]<<31-c%6;for(e[0]=e[0]<<1|e[0]>>>31,c=1;7>c;c++)e[c]>>>=4*(c-1)+3;e[7]=e[7]<<5|e[7]>>>27}for(b=this._invSubKeys=[],c=0;16>c;c++)b[c]=a[15-c]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._subKeys)},decryptBlock:function(a,b){this._doCryptBlock(a,b,this._invSubKeys)},_doCryptBlock:function(c,d,e){this._lBlock=c[d],this._rBlock=c[d+1],a.call(this,4,252645135),a.call(this,16,65535),b.call(this,2,858993459),b.call(this,8,16711935),a.call(this,1,1431655765);for(var f=0;16>f;f++){for(var g=e[f],h=this._lBlock,i=this._rBlock,l=0,m=0;8>m;m++)l|=j[m][((i^g[m])&k[m])>>>0];this._lBlock=i,this._rBlock=h^l}e=this._lBlock,this._lBlock=this._rBlock,this._rBlock=e,a.call(this,1,1431655765),b.call(this,8,16711935),b.call(this,2,858993459),a.call(this,16,65535),a.call(this,4,252645135),c[d]=this._lBlock,c[d+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});c.DES=d._createHelper(l),f=f.TripleDES=d.extend({_doReset:function(){var a=this._key.words;this._des1=l.createEncryptor(e.create(a.slice(0,2))),this._des2=l.createEncryptor(e.create(a.slice(2,4))),this._des3=l.createEncryptor(e.create(a.slice(4,6)))},encryptBlock:function(a,b){this._des1.encryptBlock(a,b),this._des2.decryptBlock(a,b),this._des3.encryptBlock(a,b)},decryptBlock:function(a,b){this._des3.decryptBlock(a,b),this._des2.encryptBlock(a,b),this._des1.decryptBlock(a,b)},keySize:6,ivSize:2,blockSize:2}),c.TripleDES=d._createHelper(f)}(),CryptoJS.mode.ECB=function(){var a=CryptoJS.lib.BlockCipherMode.extend();return a.Encryptor=a.extend({processBlock:function(a,b){this._cipher.encryptBlock(a,b)}}),a.Decryptor=a.extend({processBlock:function(a,b){this._cipher.decryptBlock(a,b)}}),a}(),!function(){function a(a){var b,c,d=a.naturalWidth,e=a.naturalHeight;return d*e>1048576?(b=document.createElement("canvas"),b.width=b.height=1,c=b.getContext("2d"),c.drawImage(a,-d+1,0),0===c.getImageData(0,0,1,1).data[3]):!1}function b(a,b,c){var d,e,f,g,h,i,j,k=document.createElement("canvas");for(k.width=1,k.height=c,d=k.getContext("2d"),d.drawImage(a,0,0),e=d.getImageData(0,0,1,c).data,f=0,g=c,h=c;h>f;)i=e[4*(h-1)+3],0===i?g=h:f=h,h=g+f>>1;return j=h/c,0===j?1:j}function c(a,b,c){var e=document.createElement("canvas");return d(a,e,b,c),e.toDataURL("image/jpeg",b.quality||.8)}function d(c,d,f,g){var h,i,j,k,l,m,n,o,p,q,r,s=c.naturalWidth,t=c.naturalHeight,u=f.width,v=f.height,w=d.getContext("2d");for(w.save(),e(d,w,u,v,f.orientation),h=a(c),h&&(s/=2,t/=2),i=1024,j=document.createElement("canvas"),j.width=j.height=i,k=j.getContext("2d"),l=g?b(c,s,t):1,m=Math.ceil(i*u/s),n=Math.ceil(i*v/t/l),o=0,p=0;t>o;){for(q=0,r=0;s>q;)k.clearRect(0,0,i,i),k.drawImage(c,-q,-o),w.drawImage(j,0,0,i,i,r,p,m,n),q+=i,r+=m;o+=i,p+=n}w.restore(),j=k=null}function e(a,b,c,d,e){switch(e){case 5:case 6:case 7:case 8:a.width=d,a.height=c;break;default:a.width=c,a.height=d}switch(e){case 2:b.translate(c,0),b.scale(-1,1);break;case 3:b.translate(c,d),b.rotate(Math.PI);break;case 4:b.translate(0,d),b.scale(1,-1);break;case 5:b.rotate(.5*Math.PI),b.scale(1,-1);break;case 6:b.rotate(.5*Math.PI),b.translate(0,-d);break;case 7:b.rotate(.5*Math.PI),b.translate(c,-d),b.scale(-1,1);break;case 8:b.rotate(-.5*Math.PI),b.translate(-c,0)}}function f(a){var b,c,d;if(window.Blob&&a instanceof Blob){if(b=new Image,c=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null,!c)throw Error("No createObjectURL function found to create blob url");b.src=c.createObjectURL(a),this.blob=a,a=b}a.naturalWidth||a.naturalHeight||(d=this,a.onload=function(){var a,b,c=d.imageLoadListeners;if(c)for(d.imageLoadListeners=null,a=0,b=c.length;b>a;a++)c[a]()},this.imageLoadListeners=[]),this.srcImage=a}f.prototype.render=function(a,b,e){var f,g,h,i,j,k,l,m,n,o,p;if(this.imageLoadListeners)return f=this,void this.imageLoadListeners.push(function(){f.render(a,b,e)});b=b||{},g=this.srcImage.naturalWidth,h=this.srcImage.naturalHeight,i=b.width,j=b.height,k=b.maxWidth,l=b.maxHeight,m=!this.blob||"image/jpeg"===this.blob.type,i&&!j?j=h*i/g<<0:j&&!i?i=g*j/h<<0:(i=g,j=h),k&&i>k&&(i=k,j=h*i/g<<0),l&&j>l&&(j=l,i=g*j/h<<0),n={width:i,height:j};for(o in b)n[o]=b[o];p=a.tagName.toLowerCase(),"img"===p?a.src=c(this.srcImage,n,m):"canvas"===p&&d(this.srcImage,a,n,m),"function"==typeof this.onrender&&this.onrender(a),e&&e()},"function"==typeof define&&define.amd?define([],function(){return f}):this.MegaPixImage=f}(),function(){function a(a){return!!a.exifdata}function b(a,b){b=b||a.match(/^data\:([^\;]+)\;base64,/im)[1]||"",a=a.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var c=atob(a),d=c.length,e=new ArrayBuffer(d),f=new Uint8Array(e),g=0;d>g;g++)f[g]=c.charCodeAt(g);return e}function c(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="blob",c.onload=function(){(200==this.status||0===this.status)&&b(this.response)},c.send()}function d(a,d){function g(b){var c=e(b),g=f(b);a.exifdata=c||{},a.iptcdata=g||{},d&&d.call(a)}if(a.src)if(/^data\:/i.test(a.src)){var h=b(a.src);g(h)}else if(/^blob\:/i.test(a.src)){var i=new FileReader;i.onload=function(a){g(a.target.result)},c(a.src,function(a){i.readAsArrayBuffer(a)})}else{var j=new XMLHttpRequest;j.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";g(j.response),j=null},j.open("GET",a.src,!0),j.responseType="arraybuffer",j.send(null)}else if(window.FileReader&&(a instanceof window.Blob||a instanceof window.File)){var i=new FileReader;i.onload=function(a){l&&console.log("Got file of length "+a.target.result.byteLength),g(a.target.result)},i.readAsArrayBuffer(a)}}function e(a){var b=new DataView(a);if(l&&console.log("Got file of length "+a.byteLength),255!=b.getUint8(0)||216!=b.getUint8(1))return l&&console.log("Not a valid JPEG"),!1;for(var c,d=2,e=a.byteLength;e>d;){if(255!=b.getUint8(d))return l&&console.log("Not a valid marker at offset "+d+", found: "+b.getUint8(d)),!1;if(c=b.getUint8(d+1),l&&console.log(c),225==c)return l&&console.log("Found 0xFFE1 marker"),k(b,d+4,b.getUint16(d+2)-2);d+=2+b.getUint16(d+2)}}function f(a){var b=new DataView(a);if(l&&console.log("Got file of length "+a.byteLength),255!=b.getUint8(0)||216!=b.getUint8(1))return l&&console.log("Not a valid JPEG"),!1;for(var c=2,d=a.byteLength,e=function(a,b){return 56===a.getUint8(b)&&66===a.getUint8(b+1)&&73===a.getUint8(b+2)&&77===a.getUint8(b+3)&&4===a.getUint8(b+4)&&4===a.getUint8(b+5)};d>c;){if(e(b,c)){var f=b.getUint8(c+7);f%2!==0&&(f+=1),0===f&&(f=4);var h=c+8+f,i=b.getUint16(c+6+f);return g(a,h,i)}c++}}function g(a,b,c){for(var d,e,f,g,h,i=new DataView(a),k={},l=b;b+c>l;)28===i.getUint8(l)&&2===i.getUint8(l+1)&&(g=i.getUint8(l+2),g in t&&(f=i.getInt16(l+3),h=f+5,e=t[g],d=j(i,l+5,f),k.hasOwnProperty(e)?k[e]instanceof Array?k[e].push(d):k[e]=[k[e],d]:k[e]=d)),l++;return k}function h(a,b,c,d,e){var f,g,h,j=a.getUint16(c,!e),k={};for(h=0;j>h;h++)f=c+12*h+2,g=d[a.getUint16(f,!e)],!g&&l&&console.log("Unknown tag: "+a.getUint16(f,!e)),k[g]=i(a,f,b,c,e);return k}function i(a,b,c,d,e){var f,g,h,i,k,l,m=a.getUint16(b+2,!e),n=a.getUint32(b+4,!e),o=a.getUint32(b+8,!e)+c;switch(m){case 1:case 7:if(1==n)return a.getUint8(b+8,!e);for(f=n>4?o:b+8,g=[],i=0;n>i;i++)g[i]=a.getUint8(f+i);return g;case 2:return f=n>4?o:b+8,j(a,f,n-1);case 3:if(1==n)return a.getUint16(b+8,!e);for(f=n>2?o:b+8,g=[],i=0;n>i;i++)g[i]=a.getUint16(f+2*i,!e);return g;case 4:if(1==n)return a.getUint32(b+8,!e);for(g=[],i=0;n>i;i++)g[i]=a.getUint32(o+4*i,!e);return g;case 5:if(1==n)return k=a.getUint32(o,!e),l=a.getUint32(o+4,!e),h=new Number(k/l),h.numerator=k,h.denominator=l,h;for(g=[],i=0;n>i;i++)k=a.getUint32(o+8*i,!e),l=a.getUint32(o+4+8*i,!e),g[i]=new Number(k/l),g[i].numerator=k,g[i].denominator=l;return g;case 9:if(1==n)return a.getInt32(b+8,!e);for(g=[],i=0;n>i;i++)g[i]=a.getInt32(o+4*i,!e);return g;case 10:if(1==n)return a.getInt32(o,!e)/a.getInt32(o+4,!e);for(g=[],i=0;n>i;i++)g[i]=a.getInt32(o+8*i,!e)/a.getInt32(o+4+8*i,!e);return g}}function j(a,b,c){var d="";for(n=b;n<b+c;n++)d+=String.fromCharCode(a.getUint8(n));return d}function k(a,b){if("Exif"!=j(a,b,4))return l&&console.log("Not valid EXIF data! "+j(a,b,4)),!1;var c,d,e,f,g,i=b+6;if(18761==a.getUint16(i))c=!1;else{if(19789!=a.getUint16(i))return l&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;c=!0}if(42!=a.getUint16(i+2,!c))return l&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var k=a.getUint32(i+4,!c);if(8>k)return l&&console.log("Not valid TIFF data! (First offset less than 8)",a.getUint32(i+4,!c)),!1;if(d=h(a,i,i+k,q,c),d.ExifIFDPointer){f=h(a,i,i+d.ExifIFDPointer,p,c);for(e in f){switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":f[e]=s[e][f[e]];break;case"ExifVersion":case"FlashpixVersion":f[e]=String.fromCharCode(f[e][0],f[e][1],f[e][2],f[e][3]);break;case"ComponentsConfiguration":f[e]=s.Components[f[e][0]]+s.Components[f[e][1]]+s.Components[f[e][2]]+s.Components[f[e][3]]}d[e]=f[e]}}if(d.GPSInfoIFDPointer){g=h(a,i,i+d.GPSInfoIFDPointer,r,c);for(e in g){switch(e){case"GPSVersionID":g[e]=g[e][0]+"."+g[e][1]+"."+g[e][2]+"."+g[e][3]}d[e]=g[e]}}return d}var l=!1,m=this,o=function(a){return a instanceof o?a:this instanceof o?void(this.EXIFwrapped=a):new o(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=o),exports.EXIF=o):m.EXIF=o;var p=o.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},q=o.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},r=o.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},s=o.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},t={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};o.getData=function(b,c){return(b instanceof Image||b instanceof HTMLImageElement)&&!b.complete?!1:(a(b)?c&&c.call(b):d(b,c),!0)},o.getTag=function(b,c){return a(b)?b.exifdata[c]:void 0},o.getAllTags=function(b){if(!a(b))return{};var c,d=b.exifdata,e={};for(c in d)d.hasOwnProperty(c)&&(e[c]=d[c]);return e},o.pretty=function(b){if(!a(b))return"";var c,d=b.exifdata,e="";for(c in d)d.hasOwnProperty(c)&&(e+="object"==typeof d[c]?d[c]instanceof Number?c+" : "+d[c]+" ["+d[c].numerator+"/"+d[c].denominator+"]\r\n":c+" : ["+d[c].length+" values]\r\n":c+" : "+d[c]+"\r\n");return e},o.readFromBinaryFile=function(a){return e(a)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return o})}.call(this),!function(){function a(a,b,c){if(this.file=a,this.callback=c,this.defaults={quality:7},c){for(var d in b)this.defaults[d]=b[d];this.defaults.quality>10&&(this.defaults.quality=10)}else this.callback=b;this.results={blob:null,origin:null,base64:null},this.init()}window.URL=window.URL||window.webkitURL;var b=navigator.userAgent;a.prototype={constructor:a,init:function(){var a=this;a.create(a.file,a.callback)},create:function(a,c){var d=this,e=new Image,f=d.results,g=URL.createObjectURL(a);e.onload=function(){var h,i=d.resize(this),j=document.createElement("canvas");j.width=i.w,j.height=i.h,h=j.getContext("2d");var k=new MegaPixImage(e);EXIF.getData(e,function(){if(k.render(j,{width:j.width,height:j.height,orientation:EXIF.getTag(this,"Orientation")}),h.fillStyle="#fff",h.fillRect(0,0,j.width,j.height),f.blob=g,f.origin=a,h.drawImage(e,0,0,i.w,i.h),/Android/i.test(b))try{var l=new JPEGEncoder;f.base64=l.encode(h.getImageData(0,0,j.width,j.height),100*d.defaults.quality)}catch(m){alert("未引用mobile补丁，无法生成图片。")}else f.base64=j.toDataURL("image/jpeg",d.defaults.quality);c(f)})},e.src=g},resize:function(a){var b=this.defaults.width,c=this.defaults.height,d=a.width/a.height,e={w:a.width,h:a.height};return b&c?(e.w=b,e.h=c):b?(e.w=b,e.h=Math.ceil(b/d)):c&&(e.w=Math.ceil(c*d),e.h=c),e}},window.lrz=function(b,c,d){return new a(b,c,d)}}(),function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("knockout"),require("jquery")):"function"==typeof define&&define.amd?define(["knockout","jquery"],a):a(ko,jQuery)}(function(a,b){var c={customFileInputSystemOptions:{wrapperClass:"custom-file-input-wrapper",fileNameClass:"custom-file-input-file-name",buttonGroupClass:"custom-file-input-button-group",buttonClass:"custom-file-input-button",clearButtonClass:"custom-file-input-clear-button",buttonTextClass:"custom-file-input-button-text"},defaultOptions:{wrapperClass:"input-group",fileNameClass:"disabled form-control",noFileText:"No file chosen",buttonGroupClass:"input-group-btn",buttonClass:"btn btn-primary",clearButtonClass:"btn btn-default",buttonText:"Choose File",changeButtonText:"Change",clearButtonText:"Clear",fileName:!0,clearButton:!0,onClear:function(a){"function"==typeof a.clear&&a.clear()}}},d=window.URL||window.webkitURL;return a.bindingHandlers.fileInput={init:function(c,e){c.onchange=function(){var f=a.utils.unwrapObservable(e())||{};f.dataUrl&&(f.dataURL=f.dataUrl),f.objectUrl&&(f.objectURL=f.objectUrl),f.file=f.file||a.observable();var g=this.files[0];g&&f.file(g),f.clear||(f.clear=function(){b.each(["file","objectURL","base64String","binaryString","text","dataURL","arrayBuffer"],function(b,c){f[c]&&a.isObservable(f[c])&&("objectURL"==c&&d.revokeObjectURL(f.objectURL()),f[c](null))}),c.value=""}),a.isObservable(e())&&e()(f)},c.onchange()},update:function(b,c){var e=a.utils.unwrapObservable(c()),f=a.isObservable(e.file)&&e.file();if(e.objectURL&&a.isObservable(e.objectURL)){var g=f&&d.createObjectURL(f);if(g){var h=e.objectURL();h&&d.revokeObjectURL(h),e.objectURL(g)}}e.base64String&&a.isObservable(e.base64String)&&(e.dataURL&&a.isObservable(e.dataURL)||(e.dataURL=a.observable())),["binaryString","text","dataURL","arrayBuffer"].forEach(function(b){var c="readAs"+(b.substr(0,1).toUpperCase()+b.substr(1));if(!("dataURL"==b||e[b]&&a.isObservable(e[b])))return!0;if(!f)return!0;var d=new FileReader;d.onload=function(d){if(e[b]&&e[b](d.target.result),"readAsDataURL"==c&&e.base64String&&a.isObservable(e.base64String)){var f=d.target.result.split(",");2===f.length&&e.base64String(f[1])}},d[c](f)})}},a.bindingHandlers.fileDrag={update:function(c,d){var e=a.utils.unwrapObservable(d())||{};b(c).data("fileDragInjected")||(c.classList.add("filedrag"),c.ondragover=c.ondragleave=c.ondrop=function(b){if(b.stopPropagation(),b.preventDefault(),"dragover"==b.type?c.classList.add("hover"):c.classList.remove("hover"),"drop"==b.type&&b.dataTransfer){var f=b.dataTransfer.files,g=f[0];g&&(e.file(g),a.isObservable(d())&&d()(e))}},b(c).data("fileDragInjected",!0))}},a.bindingHandlers.customFileInput={init:function(d,e){if(a.utils.unwrapObservable(e())!==!1){var f=c.customFileInputSystemOptions,g=c.defaultOptions,h=b(d),i=b("<span>").addClass(f.wrapperClass).addClass(g.wrapperClass),j=b("<span>").addClass(f.buttonGroupClass).addClass(g.buttonGroupClass);j.append(b("<span>").addClass(f.buttonClass)),h.wrap(i).wrap(j);var j=h.parent("."+f.buttonClass).parent();j.before(b("<input>").attr("type","text").attr("disabled","disabled").addClass(f.fileNameClass)),h.before(b("<span>").addClass(f.buttonTextClass))}},update:function(d,e,f){var g=a.utils.unwrapObservable(e());if(g!==!1){g=g||{},g&&"object"!=typeof g&&(g={});var h=c.customFileInputSystemOptions,i=c.defaultOptions;g=b.extend({},i,g);var j=f();if(j.fileInput){var k=a.utils.unwrapObservable(j.fileInput)||{},l=a.utils.unwrapObservable(k.file),m=b(d).parent(),n=m.parent(),o=n.parent();m.addClass(a.utils.unwrapObservable(g.buttonClass)),m.find("."+h.buttonTextClass).html(a.utils.unwrapObservable(l?g.changeButtonText:g.buttonText));var p=o.find("."+h.fileNameClass);p.addClass(a.utils.unwrapObservable(g.fileNameClass)),p.val(l&&l.name?l.name:a.utils.unwrapObservable(g.noFileText));var q=n.find("."+h.clearButtonClass);q.length||(q=b("<span>").addClass(h.clearButtonClass),q.on("click",function(){g.onClear(k,g)}),n.append(q)),q.html(a.utils.unwrapObservable(g.clearButtonText)),q.addClass(a.utils.unwrapObservable(g.clearButtonClass)),l&&g.clearButton&&l.name||q.remove()}}}},a.fileBindings=c,c});var IndexModel=function(){var a=this;a.rightsList=ko.observableArray(),a.rightsTotalLength=ko.observable(),a.rightsGroup=ko.observable(),a.menuList=ko.observable(""),a.itemList=ko.observable(),a.latestMsg=ko.observable(""),a.goPage=function(a){""!==a.url&&(location.href=a.url)},a.goNoticeList=function(){location.href="#/news"},a.goToUserInfo=function(){location.href="#/userInfo"},a.goToSetUp=function(){location.href="#/setUp"},a.getAppRights=function(){app.util.ajax("/user/getAppRights",{token:localStorage.token},function(b){console.log(b),0===b.responseCode?(a.rightsList([]),a.rightsTotalLength(b.rightsList.rightsList.length),a.itemList(b.rightsList),
a.getNotReadNum(),$(".text").height($("body").width()/3+"px")):app.toast.error(b.responseMsg)})},a.setMenuGroup=function(b){if(b){a.rightsGroup(b.groupCount);for(var c=[],d=0;d<a.rightsGroup();d++)c[d]=[];for(var e=0;e<b.rightsList.length;e++)c[Number(b.rightsList[e].groupNum)-1].push(b.rightsList[e]),a.menuList(a.menuList()+b.rightsList[e].url);localStorage.menuList=a.menuList();for(var f=0;f<a.rightsGroup();f++)a.getRightGroup(c[f]);return c}},a.getRightGroup=function(a){var b=0,c=a.length;a.length%3!==0&&(b=3-a.length%3);for(var d=c;c+b>d;d++)a[d]={iconImg:"",menuName:"",url:"",menuId:"",menuCode:"",notReadCount:0}},a.getNewMessage=function(){a.latestMsg(""),app.util.ajax("/message/getNewMessage",{token:localStorage.token},function(b){0===b.responseCode&&a.latestMsg(b.msgContent)})},a.getNotReadNum=function(){var b=a.itemList();app.util.ajax("/user/getAppRightsNotReadCount",{token:localStorage.token},function(c){if(0==c.responseCode){var d=c.menuCountList;d.forEach(function(a){b.rightsList.forEach(function(b){a.menuId==b.menuId&&(b.notReadCount=a.notReadCount)})}),a.rightsList(a.setMenuGroup(b))}})},a.init=function(){a.latestMsg(""),a.getAppRights(),a.getNewMessage(),document.body.addEventListener("touchstart",function(){})}},currentWorkModel=function(){var a=this;a.currentWorkList=ko.observableArray([]),a.currentWorkInfoList=ko.observableArray([]),a.rest=ko.observableArray([]),a.validFlagToday=ko.observable(""),a.countTotal=ko.observable(),a.isIntoStore=ko.observable(!1),a.isRestLoad=ko.observable(!1),a.PlanActuVo=function(a){this.planId=ko.observable(a.planId||0),this.storeId=ko.observable(a.storeId||""),this.storeName=ko.observable(a.storeName||""),this.validFlag=ko.observable(a.validFlag||""),this.count=ko.observable(a.count||0),this.status=ko.observable(a.status||""),this.classId=ko.observable(a.classId||""),this.classDesc=ko.observable(a.classDesc||""),this.enterTimeStr=ko.observable(a.enterTimeStr||""),this.leaveTimeStr=ko.observable(a.leaveTimeStr||""),this.planTime=ko.observableArray(a.planTime||[]),this.taskList=ko.observableArray(a.taskList||[]),this.workTime=ko.observableArray(a.workTime||[]),this.total=ko.observableArray(a.total||[]),this.hasActuInfo=ko.observable(a.hasActuInfo||!1)},a.getCurrentWorkList=function(){a.isIntoStore(!1),a.validFlagToday("");var b=(new Date).getTime();app.util.ajax("/actuality/getPlanAndActuTotal",{token:localStorage.token,planDate:b},function(b){if(0===b.responseCode){a.validFlagToday(b.validFlag),a.currentWorkInfoList([]),a.currentWorkList([]),a.countTotal([]);for(var c=new Array,d=0,e=0;e<b.itemList.length;e++){"ENTER_STORE"===b.itemList[e].status&&a.isIntoStore(!0),c=b.itemList[e].workTime;for(var f="",g="",h=0;h<c.length;h++)f+=app.util.formatTimeMin(c[h].enterTime)+"，",null!=c[h].leaveTime&&(g+=app.util.formatTimeMin(c[h].leaveTime)+"，");b.itemList[e].enterTimeStr=f.substr(0,f.length-1),b.itemList[e].leaveTimeStr=g.substr(0,g.length-1),null!=b.itemList[e]&&null!=b.itemList[e].storeId&&a.currentWorkInfoList.push(new a.PlanActuVo(b.itemList[e])),d+=b.itemList[e].count}a.countTotal(d),a.currentWorkList(b.total)}else app.toast.errorCode(b)})},a.rest=function(b){var c="";c="VALID_PLAN"===b.validFlag()?"NOT_ENTER_STORE":"VALID_PLAN",app.util.ajax("/actuality/updatePlanValidFlagByPlanId",{token:localStorage.token,planId:b.planId(),validFlag:c},function(b){0===b.responseCode?a.getCurrentWorkList():app.toast.errorCode(b)})},a.restBtn=function(){a.isRestLoad(!0);var b=(new Date).getTime(),c="TODAY_REST"===a.validFlagToday()?"VALID_PLAN":"TODAY_REST";app.util.ajax("/plan/updatePlanValidFlagByDate",{token:localStorage.token,date:b,validFlag:c,pageFlag:"TODAY_WORK"},function(b){0===b.responseCode?a.getCurrentWorkList():app.toast.errorCode(b),a.isRestLoad(!1)},function(){a.isRestLoad(!1),app.toast.error(app["const"].AJAX_ERROR_MSG,2e3)})},a.come=function(b){var c=new Date;c.getHours()<6?app.popup.confirm("现在是"+app.util.formatTimeMin(c.getTime())+"，是否确认进店？","是","否",function(){a.isCard(b)}):a.isCard(b)},a.isCard=function(b){if(b.count()>=5)return void app.toast.error("当天只可进店/离店 5 次。");for(var c=0;c<a.currentWorkInfoList().length;c++)if("ENTER_STORE"===a.currentWorkInfoList()[c].status())return void app.toast.error("请先打"+a.currentWorkInfoList()[c].storeName()+"离店打卡");a.gotoPunchCard(b)},a.gotoPunchCard=function(a){a.hasActuInfo()||"LEAVE_STORE"==a.status()?location.href="#/punchCard/"+a.planId()+"/"+a.status():app.toast.error("您还没有提报销量，不能进行离店操作 ")},a.gotoSalesQuantity=function(a){location.href="#/salesQuantity/"+a.planId()},a.gotoTodayPlan=function(){location.href="#/todayPlan"},a.gotoWorkPlan=function(){location.href="#/createTodayPlan"},a.init=function(){a.currentWorkList([]),a.currentWorkInfoList([]),a.getCurrentWorkList()}},TodayPlanModel=function(){var a=this;a.itemList=ko.observableArray([]),a.selectedItem=ko.observable(null),a.todayStatus=ko.observable("TODAY_REST"),a.todayRest=ko.observable(!1),a.currDate=ko.observable((new Date).getTime()),a.blankPlanBox=ko.computed({read:function(){return a.itemList().length<5?new Array(5-a.itemList().length):[]}}),a.planStatus=ko.computed(function(){for(var b=0;b<a.itemList().length;b++){var c=a.itemList()[b];if("NOT_ENTER_STORE"===c.validFlag())return["NOT_ENTER_STORE","上班"];if("TODAY_REST"===c.validFlag())return["TODAY_REST","休息"]}return["VALID_PLAN","上班"]}),a.selectPlan=function(b){a.resetSelectedPlan(),b.isSelected(!0),a.selectedItem(b)},a.resetSelectedPlan=function(){for(var b=0;b<a.itemList().length;b++)a.itemList()[b].isSelected(!1)},a.resetData=function(){a.itemList([]),a.selectedItem(null)},a.getCurrentPlan=function(){a.resetData(),app.util.ajax("/plan/getCurrPlanDetailByUserId",{token:localStorage.token,date:(new Date).getTime(),pageFlag:"todaywork"},function(b){if(0===b.responseCode){"TODAY_REST"===b.validFlag&&a.todayRest(!0),b.currDate&&a.currDate(b.currDate);for(var c=0;c<b.itemList.length;c++){var d=!1;0===c&&(d=!0);var e=new app.model.PlanDetailModel(b.itemList[c],d);"TODAY_REST"===e.validFlag()&&a.todayRest(!0),""!==e.storeId()&&(e.isSelected()&&a.selectedItem(e),a.itemList.push(e))}}})},a.init=function(){a.todayRest(!1),a.getCurrentPlan()}};app.model.PlanDetailModel=function(a,b){var c=this;c.isSelected=ko.observable(b||!1),c.planId=ko.observable(a.planId||0),c.storeId=ko.observable(a.storeId||""),c.storeName=ko.observable(a.storeName||""),c.classId=ko.observable(a.classId||""),c.classDesc=ko.observable(a.classDesc||""),c.validFlag=ko.observable(a.validFlag||""),c.taskList=ko.observableArray(a.taskList||[]),c.planTime=ko.observableArray(a.planTime||[]),c.prdList=ko.observableArray(a.prdList||[]),c.getPlanTimeStr=function(){for(var a="",b=0;b<c.planTime().length;b++){var d=app.util.formatPattern(c.planTime()[b].enterTime,"hh:mm"),e=app.util.formatPattern(c.planTime()[b].leaveTime,"hh:mm");a=a+d+"-"+e+", "}return a.length>1&&(a=a.substring(0,a.length-2)),a},c.getPlanTaskStr=function(){for(var a="",b=0;b<c.taskList().length;b++)a=a+c.taskList()[b].taskDesc+"，";return a.length>1&&(a=a.substring(0,a.length-1)),a},c.getPrdTotalNum=function(){for(var a=0,b=0;b<c.prdList().length;b++)a+=c.prdList()[b].prdNum;return a},c.getPrdTotalPrice=function(){for(var a=0,b=0;b<c.prdList().length;b++)a+=c.prdList()[b].prdNum*c.prdList()[b].price;return a}};var workPlanListModel=function(){var a=this;a.list=ko.observable(""),a.goDetails=function(a){location.href=app.util.buildUrl("#/workPlan",{planDate:a.planDate,status:a.validFlag})},a.getPlanList=function(){app.popup.hideLoading(),app.util.ajax("/plan/getPlanList",{token:localStorage.token},function(b){0===b.responseCode&&a.list(b.itemList)})},a.init=function(){app.popup.showLoading(),a.getPlanList()}},WorkPlanModel=function(){var a=this;a.isSubmit=ko.observable(!1),a.isOnWork=ko.observable("true"),a.startTimeOne=ko.observable("开始"),a.startTimeTwo=ko.observable("开始"),a.endTimeOne=ko.observable("结束"),a.endTimeTwo=ko.observable("结束"),a.planDate=ko.observable((new Date).getTime()),a.planList=ko.observableArray([new app.model.PlanEditModel({},!0,a.planDate())]),a.selectedPlan=ko.observable(null),a.classList=ko.observableArray([]),a.taskList=ko.observableArray([]),a.pageFlag=ko.observable("makePlan"),a.productRegularList=ko.observableArray([]),a.switchFn=function(){"true"==a.isOnWork()?app.popup.confirm("选择休息，"+app.util.formatPattern(a.planDate(),"MM月dd日")+"的计划将被删除。",null,null,function(){a.isOnWork("false"),a.updatePlanValidFlag("TODAY_REST")}):(a.isOnWork("true"),a.planList([]),a.createPlan(),a.updatePlanValidFlag("VALID_PLAN"))},a.startTimeOne=ko.pureComputed({read:function(){return a.selectedPlan()?(0===a.selectedPlan().planTime().length&&a.selectedPlan().planTime.push(new app.model.PlanTime({})),0===a.selectedPlan().planTime()[0].enterTime()?"":app.util.formatPattern(a.selectedPlan().planTime()[0].enterTime(),"hh:mm")):""},write:function(b){a.selectedPlan().isModify(!0);var c=a.planDate(),d=b.split(":"),e=60*Number(d[0])*60*1e3,f=60*Number(d[1])*1e3,g=app.util.getZeroTs(c)+e+f;a.selectedPlan().planTime()[0].enterTime(g),a.selectedPlan().planTime()[0].leaveTime(0);var h=$("#timePickerTwo").mobiscroll("getInst");h.setDate(new Date(g))}}),a.startTimeOneStr=ko.pureComputed({read:function(){return""===a.startTimeOne()?"开始":a.startTimeOne()}}),a.endTimeOne=ko.pureComputed({read:function(){return a.selectedPlan()?0===a.selectedPlan().planTime()[0].leaveTime()?"":app.util.formatPattern(a.selectedPlan().planTime()[0].leaveTime(),"hh:mm"):""},write:function(b){a.selectedPlan().isModify(!0);var c=a.planDate(),d=b.split(":"),e=60*Number(d[0])*60*1e3,f=60*Number(d[1])*1e3;a.selectedPlan().planTime()[0].leaveTime(app.util.getZeroTs(c)+e+f)}}),a.endTimeOneStr=ko.pureComputed({read:function(){return""===a.endTimeOne()?"结束":a.endTimeOne()}}),a.startTimeTwo=ko.pureComputed({read:function(){return a.selectedPlan()?(1===a.selectedPlan().planTime().length&&a.selectedPlan().planTime.push(new app.model.PlanTime({})),0===a.selectedPlan().planTime()[1].enterTime()?"":app.util.formatPattern(a.selectedPlan().planTime()[1].enterTime(),"hh:mm")):""},write:function(b){a.selectedPlan().isModify(!0);var c=a.planDate(),d=b.split(":"),e=60*Number(d[0])*60*1e3,f=60*Number(d[1])*1e3,g=app.util.getZeroTs(c)+e+f;a.selectedPlan().planTime()[1].enterTime(g),a.selectedPlan().planTime()[1].leaveTime(0);var h=$("#timePickerFour").mobiscroll("getInst");h.setDate(new Date(g))}}),a.startTimeTwoStr=ko.pureComputed({read:function(){return""===a.startTimeTwo()?"开始":a.startTimeTwo()}}),a.endTimeTwo=ko.pureComputed({read:function(){return a.selectedPlan()&&a.selectedPlan().planTime().length>1?0===a.selectedPlan().planTime()[1].leaveTime()?"":app.util.formatPattern(a.selectedPlan().planTime()[1].leaveTime(),"hh:mm"):""},write:function(b){a.selectedPlan().isModify(!0);var c=a.planDate(),d=b.split(":"),e=60*Number(d[0])*60*1e3,f=60*Number(d[1])*1e3;a.selectedPlan().planTime()[1].leaveTime(app.util.getZeroTs(c)+e+f)}}),a.endTimeTwoStr=ko.pureComputed({read:function(){return""===a.endTimeTwo()?"结束":a.endTimeTwo()}}),a.blankPlanBox=ko.computed({read:function(){return a.planList().length<4?new Array(4-a.planList().length):[]}}),a.updatePlanValidFlag=function(b){app.util.ajax("/plan/updatePlanValidFlagByDate",{token:localStorage.token,date:a.planDate(),validFlag:b,pageFlag:"PLAN"},function(a){0!==a.responseCode&&app.toast.error(a.responseMsg)})},a.selectPlan=function(b){a.resetSelectedPlan(),b.isSelected(!0),a.selectedPlan(b),""===a.selectedPlan().storeId()&&a.loadStore(),$("#workPlanPage .timePicker").mobiscroll("destroy"),app.util.initTimePicker("#workPlanPage .timePicker")},a.selectClass=function(b){a.selectedPlan().isModify(!0),a.selectedPlan().classDesc(b.fieldDesc),a.selectedPlan().classId(b.fieldCode)},a.selectTask=function(b){a.selectedPlan().isModify(!0),a.taskIsExist(b)?a.selectedPlan().taskList.remove(function(a){return a.taskId===b.fieldCode}):a.selectedPlan().taskList.push({taskId:b.fieldCode,taskDesc:b.fieldDesc})},a.selectStore=function(){a.selectedPlan().isModify(!0),location.href=app.util.buildUrl("#/selectShop",{planDate:a.planDate()})},a.addProduct=function(){a.selectedPlan().isModify(!0),localStorage.prdListCustomerPrd="",a.selectedPlan().prdList().forEach(function(a){localStorage.prdListCustomerPrd+=a.customerPrd()+","}),location.href=app.util.buildUrl("#/selectProduct",{storeId:a.selectedPlan().storeId(),pageFlag:a.pageFlag(),planDate:a.planDate()})},a.createPlan=function(){var b=a.existModifyPlan();if(a.selectedPlan()&&b>-1)app.popup.confirm("计划"+(b+1)+"已修改，新增计划前，需保存该计划。是否保存？","是","否",function(){setTimeout(function(){a.selectPlan(a.planList()[b]),a.submitPlan(!0)},0)});else{a.resetSelectedPlan();var c=new app.model.PlanEditModel({},!0,a.planDate());a.planList.push(c),a.selectPlan(c)}},a.getPlanIndex=function(b){for(var c=0;c<a.planList().length;c++)if(b===a.planList()[c])return c+1;return 0},a.existModifyPlan=function(){for(var b=0;b<a.planList().length;b++)if(a.planList()[b].isModify()||0===a.planList()[b].planId())return b;return-1},a.resetSelectedPlan=function(){for(var b=0;b<a.planList().length;b++)a.planList()[b].isSelected(!1)},a.loadPlanList=function(){a.planList([]),app.util.ajax("/plan/getCurrPlanDetailByUserId",{token:localStorage.token,date:a.planDate()},function(b){if(0===b.responseCode){if(0===b.itemList.length)return void a.createPlan();for(var c=0;c<b.itemList.length;c++)if(b.itemList[c].validFlag!==app["const"].PLAN_STATUS_INVALID_PLAN){b.itemList[c].validFlag===app["const"].PLAN_STATUS_TODAY_REST&&(a.isOnWork("false"),a.notOnWork());var d=!1;0===c&&(d=!0);var e=new app.model.PlanEditModel(b.itemList[c],d,a.planDate());e.isSelected()&&a.selectPlan(e),a.planList.push(e)}}else 1203===b.responseCode?a.createPlan():a.selectedPlan(null)})},a.loadPlanClass=function(){a.loadConfData(a.classList,"class")},a.loadPlanTask=function(){a.loadConfData(a.taskList,"task")},a.loadConfData=function(a,b){app.util.ajax("/plan/getFieldConfByFieldType",{token:localStorage.token,fieldType:b},function(b){0===b.responseCode&&a(b.itemList)})},a.loadStore=function(){app.util.ajax("/myStore/getStoreListByUserId",{token:localStorage.token,planDate:a.planDate(),pageFlag:"todaywork"},function(b){0===b.responseCode&&1===b.itemList.length&&(a.selectedPlan().storeId(b.itemList[0].storeId),a.selectedPlan().storeName(b.itemList[0].storeName))})},a.loadProductList=function(){app.util.ajax("/plan/getPrdInfoByIdOrName",{storeId:a.selectedPlan().storeId(),pageFlag:a.pageFlag(),planDate:a.planDate()},function(b){if(0===b.responseCode&&(a.productRegularList([]),a.selectedPlan().prdList([]),a.productRegularList(b.itemList),a.selectedPlan()&&0===a.selectedPlan().planId()&&0===a.selectedPlan().prdList().length))for(var c=0;c<a.productRegularList().length;c++)a.selectedPlan().prdList.push(new app.model.ProductModel(a.productRegularList()[c]))})},a.classIsExist=function(b){var c=a.selectedPlan().classId();return a.selectedPlan()?b.fieldCode===c:!1},a.taskIsExist=function(b){var c=a.selectedPlan().taskList();if(!a.selectedPlan()||0===c.length)return!1;for(var d=0;d<c.length;d++)if(b.fieldCode===c[d].taskId)return!0;return!1},a.deletePlan=function(){app.popup.confirm("确实要删除本计划吗？",null,null,function(){0===a.selectedPlan().planId()?(a.planList.remove(a.selectedPlan()),a.planList().length>0?a.selectPlan(a.planList()[0]):a.selectedPlan(null),history.go(-1)):app.util.ajax("/actuality/updatePlanValidFlagByPlanId",{token:localStorage.token,planId:a.selectedPlan().planId(),validFlag:"INVALID_PLAN"},function(b){0===b.responseCode&&(a.planList.remove(a.selectedPlan()),a.planList().length>0?a.selectPlan(a.planList()[0]):a.selectedPlan(null)),history.go(-1)})})},a.submitPlan=function(b){var c=a.selectedPlan(),d=!1,e={token:localStorage.token};if(c.planId()&&(e.planId=c.planId()),!c.storeId())return app.toast.error("请选择门店");if(e.storeId=c.storeId(),e.planDate=c.planDate(),!c.classId())return app.toast.error("请选择班次");if(e.classId=c.classId(),0===c.planTime().length)return app.toast.error("请选择班次时间");if(e.planTime=[],0===c.planTime()[0].enterTime()||0===c.planTime()[0].leaveTime())return app.toast.error("请选择班次时间");if(e.planTime.push({enterTime:c.planTime()[0].enterTime(),leaveTime:c.planTime()[0].leaveTime()}),"Z005"===c.classId()){if(0===c.planTime()[1].enterTime()||0===c.planTime()[1].leaveTime())return app.toast.error("请选择班次时间");if(c.planTime()[0].leaveTime()>=c.planTime()[1].enterTime()&&c.planTime()[1].leaveTime()>c.planTime()[1].enterTime()||c.planTime()[1].leaveTime()>=c.planTime()[0].enterTime()&&c.planTime()[0].leaveTime()>c.planTime()[1].enterTime())return app.toast.error("两头班的时间段不能重叠");e.planTime.push({enterTime:c.planTime()[1].enterTime(),leaveTime:c.planTime()[1].leaveTime()})}for(var f=0;f<e.planTime.length;f++)if(e.planTime[f].enterTime>=e.planTime[f].leaveTime)return void app.toast.error("班次结束时间必须大于开始时间！");if(0===c.taskList().length)return app.toast.error("请选择工作任务");e.taskList=[];for(var g=0;g<c.taskList().length;g++)e.taskList.push({taskId:c.taskList()[g].taskId}),"T001"===c.taskList()[g].taskId&&(d=!0);if(d&&0===c.prdList().length)return app.toast.error("请添加产品");if(e.prdList=[],d&&0===c.totalNum())return app.toast.error("计划销量不可为0");for(var h=0;h<c.prdList().length;h++)e.prdList.push({customerPrd:c.prdList()[h].customerPrd(),prdNum:Number(c.prdList()[h].prdNum()),isNew:c.prdList()[h].isNew()});e.position=!0,app.popup.confirm('<p>即将提交计划：<br/><span class="color-ff6c47">'+c.classDesc()+"，目标："+c.totalNum()+"支，￥"+app.util.priceTransform(c.totalPrice())+"</span></p>",null,null,function(){if(!b){if(a.isSubmit())return;a.isSubmit(!0)}app.util.ajax("/plan/savePlanInfo",e,function(c){a.isSubmit(!1),0===c.responseCode?(a.selectedPlan().planId(c.planId),app.toast.success("计划"+a.getPlanIndex(a.selectedPlan())+"保存成功"),a.selectedPlan().isModify(!1),b?a.createPlan():history.go(-1)):app.toast.errorCode(c)},function(){a.isSubmit(!1),app.toast.error(app["const"].AJAX_ERROR_MSG)})})},a.init=function(b,c,d){if(app.page=d,"Y"===localStorage[app["const"].STATUS_SELECT_PRODUCT]){if(localStorage[app["const"].STATUS_SELECT_PRODUCT]="N",localStorage[app["const"].LOCAL_SELECTED_PRODUCT]){var e=JSON.parse(localStorage[app["const"].LOCAL_SELECTED_PRODUCT]);localStorage.removeItem(app["const"].LOCAL_SELECTED_PRODUCT);for(var f=0;f<a.selectedPlan().prdList().length;f++)if(a.selectedPlan().prdList()[f].customerPrd()===e.customerPrd)return void app.toast.error("已添加此产品");a.selectedPlan().prdList.splice(0,0,new app.model.ProductModel(e))}}else if("Y"===localStorage[app["const"].STATUS_SELECT_STORE]){if(localStorage[app["const"].STATUS_SELECT_STORE]="N",localStorage[app["const"].LOCAL_SELECTED_STORE]){var g=JSON.parse(localStorage[app["const"].LOCAL_SELECTED_STORE]);a.selectedPlan().storeId(a.selectedPlan().storeId()!==g.storeId?g.storeId:g.storeId),a.selectedPlan().storeName(g.storeName),localStorage.removeItem(app["const"].LOCAL_SELECTED_STORE)}}else a.isOnWork("TODAY_REST"===c?"false":"true"),a.planDate(b||(new Date).getTime()),a.selectedPlan(null),a.loadPlanClass(),a.loadPlanTask(),a.loadPlanList()}};app.model.PlanEditModel=function(a,b,c){var d=this;if(d.planDate=ko.observable(c||(new Date).getTime()),d.isSelected=ko.observable(b||!1),d.planId=ko.observable(a.planId||0),d.storeId=ko.observable(a.storeId||""),d.storeName=ko.observable(a.storeName||"门店"),d.classId=ko.observable(a.classId||""),d.classDesc=ko.observable(a.classDesc||""),d.validFlag=ko.observable(a.validFlag||""),d.noSalesReason=ko.observable(a.noSalesReason||""),d.remark=ko.observable(a.remark||""),d.taskList=ko.observableArray(a.taskList||[]),d.workTime=ko.observableArray(a.workTime||[]),d.planTime=ko.observableArray([]),d.prdList=ko.observableArray([]),d.fileList=ko.observableArray(a.fileList||[]),d.planType=ko.observable(a.planType||"wordPlan"),d.isModify=ko.observable(!1),d.storeId.subscribe(function(a){a&&(app.workPlanModel&&app.workPlanModel.loadProductList(),app.createTodayPlanModel&&app.createTodayPlanModel.loadProductList())}),d.totalNum=ko.pureComputed({read:function(){for(var a=0,b=0;b<d.prdList().length;b++)a+=Number(d.prdList()[b].prdNum())+Number(d.prdList()[b].groupBuyVo().prdNum());return a}}),d.totalPrice=ko.pureComputed({read:function(){for(var a=0,b=0;b<d.prdList().length;b++)a+=(Number(d.prdList()[b].prdNum())+Number(d.prdList()[b].groupBuyVo().prdNum()))*Number(d.prdList()[b].price());return a}}),a.prdList)for(var e=0;e<a.prdList.length;e++)d.prdList.push(new app.model.ProductModel(a.prdList[e],d.planType()));if(a.planTime)for(var f=0;f<a.planTime.length;f++)d.planTime.push(new app.model.PlanTime(a.planTime[f]))},app.model.ProductModel=function(a,b){var c=this;c.customerPrd=ko.observable(a.customerPrd||""),c.prdName=ko.observable(a.prdName||""),c.price=ko.observable(a.price||0),c.isNew=ko.observable(a.isNew||0),c.priority=ko.observable(a.priority||1),c.isSelected=ko.observable(!1);var d=0;"report"===b&&(d=0),c.prdNum=ko.observable(-1!=a.prdNum?a.prdNum||d:a.retailVo.prdNum||d),c.isGroupBuy=ko.observable(a.isGroupBuy||0),c.oldNum=ko.observable(c.prdNum()),c.isShowTip=ko.observable(!1),c.isOld=ko.observable(!1),c.group=function(a){var c=this;c.prdNum=ko.observable(a.prdNum||0),c.oldNum=ko.observable(0),c.prdNum.subscribe(function(a){(isNaN(a)||"string"!=typeof a)&&c.oldNum(a)},null,"beforeChange"),c.prdNum.subscribe(function(a){if(a>99999)return void c.prdNum(99999);var d=0;return"report"===b&&(d=0),isNaN(a)||d>a?void c.prdNum(d):"string"==typeof c.prdNum()?void c.prdNum(parseInt(a)):void 0})},c.groupBuyVo=ko.observable(new c.group(a.groupBuyVo||{})),c.toggleGroupBuy=function(){return 0===c.prdNum()?void c.isGroupBuy(0):void c.isGroupBuy(1===c.isGroupBuy()?0:1)},c.changPosition=function(){},c.prdNum.subscribe(function(a){(isNaN(a)||"string"!=typeof a)&&(c.oldNum(a),0==c.oldNum()&&c.isGroupBuy(0))},null,"beforeChange"),c.prdNum.subscribe(function(a){if(app.workPlanModel&&app.workPlanModel.selectedPlan()&&app.workPlanModel.selectedPlan().isModify(!0),a>99999)return c.isOld(!1),void c.prdNum(99999);var d=0;return"report"===b&&(d=0),isNaN(a)||d>a?(c.isOld(!1),void c.prdNum(d)):"string"==typeof c.prdNum()?(c.isOld(!1),void c.prdNum(parseInt(a))):c.isOld()?void c.isOld(!1):void(c.prdNum()>=100&&!c.isShowTip()&&app.popup.confirm(c.prdName()+"的数量为"+c.prdNum()+"！",null,null,function(){c.isOld(!1)},function(){c.isOld(!0),c.prdNum(c.oldNum())}))}),c.addNum=function(){c.prdNum(Number(c.prdNum())+1)},c.addGroupNum=function(){c.groupBuyVo().prdNum(Number(c.groupBuyVo().prdNum())+1)},c.reduceNum=function(){var a=0;return"report"===b&&(a=0),Number(c.prdNum())>a&&(c.prdNum(Number(c.prdNum())-1),0===c.prdNum())?void c.isGroupBuy(0):void 0},c.reduceGroupNum=function(){var a=0;Number(c.groupBuyVo().prdNum())>a&&c.groupBuyVo().prdNum(Number(c.groupBuyVo().prdNum())-1)}},app.model.PlanTime=function(a){var b=this;b.enterTime=ko.observable(a.enterTime||0),b.leaveTime=ko.observable(a.leaveTime||0)};var CreateTodayPlanModel=function(){var a=this;a.isSubmit=ko.observable(!1),a.startTimeOne=ko.observable("开始"),a.startTimeTwo=ko.observable("开始"),a.endTimeOne=ko.observable("结束"),a.endTimeTwo=ko.observable("结束"),a.planDate=ko.observable((new Date).getTime()),a.planList=ko.observableArray([]),a.selectedPlan=ko.observable(null),a.classList=ko.observableArray([]),a.taskList=ko.observableArray([]),a.productRegularList=ko.observableArray([]),a.pageFlag=ko.observable("makePlan"),a.startTimeOne=ko.pureComputed({read:function(){return a.selectedPlan()?(0===a.selectedPlan().planTime().length&&a.selectedPlan().planTime.push(new app.model.PlanTime({})),0===a.selectedPlan().planTime()[0].enterTime()?"":app.util.formatPattern(a.selectedPlan().planTime()[0].enterTime(),"hh:mm")):""},write:function(b){a.selectedPlan().isModify(!0);var c=a.planDate(),d=b.split(":"),e=60*Number(d[0])*60*1e3,f=60*Number(d[1])*1e3,g=app.util.getZeroTs(c)+e+f;a.selectedPlan().planTime()[0].enterTime(g),a.selectedPlan().planTime()[0].leaveTime(0);var h=$("#timePickerTwo").mobiscroll("getInst");h.setDate(new Date(g))}}),a.startTimeOneStr=ko.pureComputed({read:function(){return""===a.startTimeOne()?"开始":a.startTimeOne()}}),a.endTimeOne=ko.pureComputed({read:function(){return a.selectedPlan()?0===a.selectedPlan().planTime()[0].leaveTime()?"":app.util.formatPattern(a.selectedPlan().planTime()[0].leaveTime(),"hh:mm"):""},write:function(b){a.selectedPlan().isModify(!0);var c=a.planDate(),d=b.split(":"),e=60*Number(d[0])*60*1e3,f=60*Number(d[1])*1e3;a.selectedPlan().planTime()[0].leaveTime(app.util.getZeroTs(c)+e+f)}}),a.endTimeOneStr=ko.pureComputed({read:function(){return""===a.endTimeOne()?"结束":a.endTimeOne()}}),a.startTimeTwo=ko.pureComputed({read:function(){return a.selectedPlan()?(1===a.selectedPlan().planTime().length&&a.selectedPlan().planTime.push(new app.model.PlanTime({})),0===a.selectedPlan().planTime()[1].enterTime()?"":app.util.formatPattern(a.selectedPlan().planTime()[1].enterTime(),"hh:mm")):""},write:function(b){a.selectedPlan().isModify(!0);var c=a.planDate(),d=b.split(":"),e=60*Number(d[0])*60*1e3,f=60*Number(d[1])*1e3,g=app.util.getZeroTs(c)+e+f;a.selectedPlan().planTime()[1].enterTime(g),a.selectedPlan().planTime()[1].leaveTime(0);var h=$("#timePickerFour").mobiscroll("getInst");h.setDate(new Date(g))}}),a.startTimeTwoStr=ko.pureComputed({read:function(){return""===a.startTimeTwo()?"开始":a.startTimeTwo()}}),a.endTimeTwo=ko.pureComputed({read:function(){return a.selectedPlan()&&a.selectedPlan().planTime().length>1?0===a.selectedPlan().planTime()[1].leaveTime()?"":app.util.formatPattern(a.selectedPlan().planTime()[1].leaveTime(),"hh:mm"):""},write:function(b){a.selectedPlan().isModify(!0);var c=a.planDate(),d=b.split(":"),e=60*Number(d[0])*60*1e3,f=60*Number(d[1])*1e3;a.selectedPlan().planTime()[1].leaveTime(app.util.getZeroTs(c)+e+f)}}),a.endTimeTwoStr=ko.pureComputed({read:function(){return""===a.endTimeTwo()?"结束":a.endTimeTwo()}}),a.blankPlanBox=ko.computed({read:function(){return a.planList().length<5?new Array(5-a.planList().length):[]}}),a.updatePlanValidFlag=function(){app.util.ajax("/plan/updatePlanValidFlagByDate",{token:localStorage.token,date:a.planDate(),validFlag:"TODAY_REST"},function(a){0===a.responseCode||app.toast.error(a.responseMsg)})},a.selectPlan=function(b){a.resetSelectedPlan(),b.isSelected(!0),a.selectedPlan(b),a.loadStore(),$("#createTodayPlanPage .timePicker").mobiscroll("destroy"),app.util.initTimePicker("#createTodayPlanPage .timePicker")},a.selectClass=function(b){a.selectedPlan().classDesc(b.fieldDesc),a.selectedPlan().classId(b.fieldCode)},a.selectTask=function(b){a.taskIsExist(b)?a.selectedPlan().taskList.remove(function(a){return a.taskId===b.fieldCode}):a.selectedPlan().taskList.push({taskId:b.fieldCode,taskDesc:b.fieldDesc})},a.selectStore=function(){location.href=app.util.buildUrl("#/selectShop",{planDate:a.planDate()})},a.addProduct=function(){localStorage.prdListCustomerPrd="",a.selectedPlan().prdList().forEach(function(a){localStorage.prdListCustomerPrd+=a.customerPrd()+","}),location.href=app.util.buildUrl("#/selectProduct",{storeId:a.selectedPlan().storeId(),pageFlag:a.pageFlag(),planDate:a.planDate()})},a.createPlan=function(){a.resetSelectedPlan();var b=new app.model.PlanEditModel({},!0);a.planList.push(b),a.selectPlan(b)},a.resetSelectedPlan=function(){for(var b=0;b<a.planList().length;b++)a.planList()[b].isSelected(!1)},a.loadPlanClass=function(){a.loadConfData(a.classList,"class")},a.loadPlanTask=function(){a.loadConfData(a.taskList,"task")},a.loadConfData=function(a,b){app.util.ajax("/plan/getFieldConfByFieldType",{token:localStorage.token,fieldType:b},function(b){0===b.responseCode&&a(b.itemList)})},a.loadStore=function(){app.util.ajax("/myStore/getStoreListByUserId",{token:localStorage.token,planDate:(new Date).getTime(),pageFlag:"todaywork"},function(b){0===b.responseCode&&1===b.itemList.length&&(a.selectedPlan().storeId(b.itemList[0].storeId),a.selectedPlan().storeName(b.itemList[0].storeName))})},a.loadProductList=function(){app.util.ajax("/plan/getPrdInfoByIdOrName",{storeId:a.selectedPlan().storeId(),pageFlag:a.pageFlag(),planDate:a.planDate()},function(b){if(0===b.responseCode&&(a.productRegularList([]),a.selectedPlan().prdList([]),a.productRegularList(b.itemList),a.selectedPlan()&&0===a.selectedPlan().planId()&&0===a.selectedPlan().prdList().length))for(var c=0;c<a.productRegularList().length;c++)a.selectedPlan().prdList.push(new app.model.ProductModel(a.productRegularList()[c]))})},a.classIsExist=function(b){var c=a.selectedPlan().classId();return a.selectedPlan()?b.fieldCode===c:!1},a.taskIsExist=function(b){var c=a.selectedPlan().taskList();if(!a.selectedPlan()||0===c.length)return!1;for(var d=0;d<c.length;d++)if(b.fieldCode===c[d].taskId)return!0;return!1},a.cancelPlan=function(){history.go(-1)},a.submitPlan=function(){var b=a.selectedPlan(),c=!1,d={token:localStorage.token};if(b.planId()&&(d.planId=b.planId()),!b.storeId())return app.toast.error("请选择门店");if(d.storeId=b.storeId(),d.planDate=b.planDate(),!b.classId())return app.toast.error("请选择班次");if(d.classId=b.classId(),0===b.planTime().length)return app.toast.error("请选择班次时间");if(d.planTime=[],0===b.planTime()[0].enterTime()||0===b.planTime()[0].leaveTime())return app.toast.error("请选择班次时间");if(d.planTime.push({enterTime:b.planTime()[0].enterTime(),leaveTime:b.planTime()[0].leaveTime()}),"Z005"===b.classId()){if(0===b.planTime()[1].enterTime()||0===b.planTime()[1].leaveTime())return app.toast.error("请选择班次时间");if(b.planTime()[0].leaveTime()>=b.planTime()[1].enterTime()&&b.planTime()[1].leaveTime()>b.planTime()[1].enterTime()||b.planTime()[1].leaveTime()>=b.planTime()[0].enterTime()&&b.planTime()[0].leaveTime()>b.planTime()[1].enterTime())return app.toast.error("两头班的时间段不能重叠");d.planTime.push({enterTime:b.planTime()[1].enterTime(),leaveTime:b.planTime()[1].leaveTime()})}for(var e=0;e<d.planTime.length;e++)if(d.planTime[e].enterTime>=d.planTime[e].leaveTime)return void app.toast.error("班次结束时间必须大于开始时间！");if(0===b.taskList().length)return app.toast.error("请选择工作任务");d.taskList=[];for(var f=0;f<b.taskList().length;f++)d.taskList.push({taskId:b.taskList()[f].taskId}),"T001"===b.taskList()[f].taskId&&(c=!0);if(c&&0===b.prdList().length)return app.toast.error("请添加产品");if(d.prdList=[],c&&0===b.totalNum())return app.toast.error("计划销量不可为0");for(var g=0;g<b.prdList().length;g++)d.prdList.push({customerPrd:b.prdList()[g].customerPrd(),prdNum:Number(b.prdList()[g].prdNum()),isNew:b.prdList()[g].isNew()});d.position=!0,app.popup.confirm('<p>即将提交计划：<br/><span class="color-ff6c47">'+b.classDesc()+"，目标："+b.totalNum()+"支，￥"+app.util.priceTransform(b.totalPrice())+"</span></p>",null,null,function(){a.isSubmit()||(a.isSubmit(!0),app.util.ajax("/plan/savePlanInfo",d,function(b){a.isSubmit(!1),0===b.responseCode?(app.toast.success("计划保存成功"),history.go(-1)):app.toast.errorCode(b)},function(){a.isSubmit(!1),app.toast.error(app["const"].AJAX_ERROR_MSG)}))})},a.init=function(b){if(app.page=b,a.isSubmit(!1),"Y"===localStorage[app["const"].STATUS_SELECT_PRODUCT]){if(localStorage[app["const"].STATUS_SELECT_PRODUCT]="N",localStorage[app["const"].LOCAL_SELECTED_PRODUCT]){var c=JSON.parse(localStorage[app["const"].LOCAL_SELECTED_PRODUCT]);localStorage.removeItem(app["const"].LOCAL_SELECTED_PRODUCT);for(var d=0;d<a.selectedPlan().prdList().length;d++)if(a.selectedPlan().prdList()[d].customerPrd()===c.customerPrd)return void app.toast.error("已添加此产品");a.selectedPlan().prdList.splice(0,0,new app.model.ProductModel(c))}}else if("Y"===localStorage[app["const"].STATUS_SELECT_STORE]){if(localStorage[app["const"].STATUS_SELECT_STORE]="N",localStorage[app["const"].LOCAL_SELECTED_STORE]){var e=JSON.parse(localStorage[app["const"].LOCAL_SELECTED_STORE]);a.selectedPlan().storeId(a.selectedPlan().storeId()!==e.storeId?e.storeId:e.storeId),a.selectedPlan().storeName(e.storeName),localStorage.removeItem(app["const"].LOCAL_SELECTED_STORE)}}else a.selectedPlan(null),a.planDate((new Date).getTime()),a.loadPlanClass(),a.loadPlanTask(),a.planList([]),a.createPlan()}},salesQuantityModel=function(){var a=this;a.isSubmit=ko.observable(!1),a.isOnWork=ko.observable(!0),a.switchText=ko.observable("上班"),
a.planDate=ko.observable((new Date).getTime()),a.planId=ko.observable(),a.planList=ko.observableArray([new app.model.PlanEditModel({},!0)]),a.selectedPlan=ko.observable(null),a.showGroupBuying=ko.observable(!1),a.isHidden=ko.observable(!0),a.picPath=ko.observable(!0),a.classList=ko.observableArray([]),a.taskList=ko.observableArray([]),a.pageFlag=ko.observable("putSale"),a.switchFn=function(){a.isOnWork()?app.popup.confirm("选择休息，"+app.util.formatPattern(a.planDate(),"MM月dd日")+"制定的计划将被删除。是否确认？",null,null,function(){$("#whiteBtn").css({margin:"0 0 0 0"}),$("#switch").addClass("offwork"),$("#switchText").removeClass("fl"),$("#switchText").addClass("fr"),a.switchText("下班"),a.isOnWork(!1)}):($("#whiteBtn").css({margin:"0 0 0 2.25rem"}),$("#switch").removeClass("offwork"),$("#switchText").removeClass("fr"),$("#switchText").addClass("fl"),a.switchText("上班"),a.isOnWork(!0))},a.blankPlanBox=ko.computed({read:function(){return a.planList().length<4?new Array(4-a.planList().length):[]}}),a.selectPlan=function(b){a.resetSelectedPlan(),b.isSelected(!0),a.selectedPlan(b)},a.selectClass=function(b){a.selectedPlan().classDesc(b.fieldDesc),a.selectedPlan().classId(b.fieldCode)},a.selectTask=function(b){a.taskIsExist(b)?a.selectedPlan().taskList.remove(function(a){return a.taskId===b.fieldCode}):a.selectedPlan().taskList.push({taskId:b.fieldCode,taskDesc:b.fieldDesc})},a.selectStore=function(){location.href="#/selectShop"},a.uploadPic=function(){null==localStorage[app["const"].UPLOAD_PIC+a.planId()]&&localStorage.setItem(app["const"].UPLOAD_PIC+a.planId(),JSON.stringify(a.selectedPlan().fileList())),location.href="#/upload/"+a.planId()},a.addProduct=function(){localStorage.prdListCustomerPrd="",a.selectedPlan().prdList().forEach(function(a){localStorage.prdListCustomerPrd+=a.customerPrd()+","}),location.href=app.util.buildUrl("#/selectProduct",{storeId:a.selectedPlan().storeId(),pageFlag:a.pageFlag()})},a.createPlan=function(){a.resetSelectedPlan();var b=new app.model.PlanEditModel({},!0);a.planList.push(b),a.selectedPlan(b)},a.resetSelectedPlan=function(){for(var b=0;b<a.planList().length;b++)a.planList()[b].isSelected(!1)},a.loadPlanList=function(){app.util.ajax("/report/getActuDetailByDateOrPlanId",{token:localStorage.token,pageFlag:"todaywork",planId:a.planId(),date:a.planDate()},function(b){if(0===b.responseCode){if(a.planDate(b.currDate),0===b.itemList.length)return;a.planList([]);for(var c=0;c<b.itemList.length;c++){var d=!1;0===c&&(d=!0),b.itemList[c].planType="report";var e=new app.model.PlanEditModel(b.itemList[c],d,a.planDate());e.isSelected()&&a.selectedPlan(e),a.planList.push(e)}}})},a.loadPlanClass=function(){a.loadConfData(a.classList,"class")},a.loadPlanTask=function(){a.loadConfData(a.taskList,"task")},a.loadConfData=function(a,b){app.util.ajax("/plan/getFieldConfByFieldType",{token:localStorage.token,fieldType:b},function(b){0===b.responseCode&&a(b.itemList)})},a.groupBuyisExist=ko.computed(function(){if(a.selectedPlan())for(var b=0;b<a.selectedPlan().prdList().length;b++){var c=a.selectedPlan().prdList()[b];if(0!=c.groupBuyVo().prdNum())return!0}return!1}),a.classIsExist=function(b){var c=a.selectedPlan().classId();return a.selectedPlan()?b.fieldCode===c:!1},a.taskIsExist=function(b){var c=a.selectedPlan().taskList();if(!a.selectedPlan()||0===c.length)return!1;for(var d=0;d<c.length;d++)if(b.fieldCode===c[d].taskId)return!0;return!1},a.deletePlan=function(){app.popup.confirm("确实要删除本计划吗？",null,null,function(){0===a.selectedPlan().planId()?(a.planList.remove(a.selectedPlan()),a.planList().length>0?a.selectPlan(a.planList()[0]):a.selectedPlan(null)):app.util.ajax("/actuality/updatePlanValidFlagByPlanId",{token:localStorage.token,planId:a.selectedPlan().planId(),validFlag:"INVALID_PLAN"},function(b){0===b.responseCode&&(a.planList.remove(a.selectedPlan()),a.planList().length>0?a.selectPlan(a.planList()[0]):a.selectedPlan(null))})})},a.hasTask=function(b){for(var c=0;c<a.taskList().length;c++)if(b==a.taskList()[c].fieldCode)return!0;return!1},a.groupBuying=function(){a.showGroupBuying(!a.showGroupBuying()),a.isSubmit(!a.isSubmit())},a.submitPlan=function(){if(a.showGroupBuying())return void app.popup.alert('请先点击"完成"按钮！');if(!a.isSubmit()){var b=a.selectedPlan(),c=!1;app.popup.confirm('<p class="pl10">即将提交销量：<br/><span class="color-ff6c47">'+b.classDesc()+"，实际："+b.totalNum()+"支，￥"+app.util.priceTransform(b.totalPrice())+"</span></p>",null,null,function(){var d={token:localStorage.token};if(b.planId()&&(d.planId=b.planId()),d.actuDate=(new Date).getTime(),d.storeId=b.storeId(),d.planDate=b.planDate(),!b.classId())return app.toast.error("请选择班次");d.classId=b.classId(),d.taskList=[];for(var e=0;e<b.taskList().length;e++)a.hasTask(b.taskList()[e].taskId)&&(d.taskList.push({taskId:b.taskList()[e].taskId}),"T001"===b.taskList()[e].taskId&&(c=!0));if(0===b.taskList().length)return app.toast.error("请选择工作任务");if(b.noSalesReason(b.noSalesReason().trim()),c&&0==b.totalNum()&&!b.noSalesReason())return app.toast.error("请填写销量为0的原因");if(0!=b.totalNum()&&b.noSalesReason(""),d.noSalesReason=b.noSalesReason(),c&&0===b.prdList().length)return app.toast.error("计划销量不可为0");d.prdList=[];for(var f=!1,g=0;g<b.prdList().length;g++)d.prdList.push({customerPrd:b.prdList()[g].customerPrd(),prdNum:b.prdList()[g].prdNum(),isNew:b.prdList()[g].isNew(),isGroupBuy:0}),0!=b.prdList()[g].groupBuyVo().prdNum()&&(d.prdList.push({customerPrd:b.prdList()[g].customerPrd(),prdNum:b.prdList()[g].groupBuyVo().prdNum(),isNew:b.prdList()[g].isNew(),isGroupBuy:1}),f=!0);if(f&&0===b.fileList().length)return app.toast.error("请上传团购凭证！");f||(b.fileList([]),b.remark("")),d.remark=b.remark(),d.fileList=[];for(var g=0;g<b.fileList().length;g++)d.fileList.push({guid:b.fileList()[g].guid,filePath:b.fileList()[g].filePath});a.isSubmit()||(a.isSubmit(!0),d.position=!0,app.util.ajax("/actuality/saveActuInfo",d,function(b){a.isSubmit(!1),0===b.responseCode?(localStorage.removeItem(app["const"].UPLOAD_PIC+a.planId()),app.toast.success("保存成功"),location.href="#/currentWork"):(app.toast.errorCode(b),4109===b.responseCode&&history.go(-1))}))})}},a.init=function(b,c){if(a.isHidden(!0),a.getSpecialAttach(),app.page=c,a.planId(b||0),"Y"===localStorage[app["const"].STATUS_SELECT_PRODUCT]){if(localStorage[app["const"].STATUS_SELECT_PRODUCT]="N",localStorage[app["const"].LOCAL_SELECTED_PRODUCT]){var d=JSON.parse(localStorage[app["const"].LOCAL_SELECTED_PRODUCT]);localStorage.removeItem(app["const"].LOCAL_SELECTED_PRODUCT);for(var e=0;e<a.selectedPlan().prdList().length;e++)if(a.selectedPlan().prdList()[e].customerPrd()===d.customerPrd)return void app.toast.error("已添加此产品");a.selectedPlan().prdList.splice(0,0,new app.model.ProductModel(d,"report"))}}else if("Y"===localStorage[app["const"].STATUS_SELECT_STORE]){if(localStorage[app["const"].STATUS_SELECT_STORE]="N",localStorage[app["const"].LOCAL_SELECTED_STORE]){var f=JSON.parse(localStorage[app["const"].LOCAL_SELECTED_STORE]);a.selectedPlan().storeId(f.storeId),a.selectedPlan().storeName(f.storeName),localStorage.removeItem(app["const"].LOCAL_SELECTED_STORE)}}else"Y"===localStorage[app["const"].STATUS_UPLOAD_PIC]?(localStorage[app["const"].STATUS_UPLOAD_PIC]="N",localStorage[app["const"].UPLOAD_PIC+a.planId()]&&(a.selectedPlan().fileList(JSON.parse(localStorage.getItem(app["const"].UPLOAD_PIC+a.planId()))),localStorage.removeItem(app["const"].UPLOAD_PIC+a.planId()))):(a.isSubmit(!1),a.showGroupBuying(!1),a.loadPlanClass(),a.loadPlanTask(),a.loadPlanList())},a.photoSize=photoSize,a.show=function(){a.picPath()||a.getSpecialAttach(),a.isHidden(!a.isHidden()),a.isHidden()?$("body,html").css({overflow:"auto"}):(a.photoSize.init(a.img),$("body,html").css({overflow:"hidden"}))},a.img=new Image,a.getSpecialAttach=function(){app.util.ajax("/base/getSpecialAttach",{token:localStorage.token,fileType:"SALE"},function(b){0===b.responseCode?(a.picPath(b.fileList[0].filePath),a.img.src=b.fileList[0].filePath):app.toast.errorCode(b)})}},punchCardModel=function(){var a=this;a.time=ko.observable(),a.planId=ko.observable(),a.status=ko.observable(),a.isHide=ko.observable(!1),a.isSuccess=ko.observable(!1),a.isLoading=ko.observable(!1),a.classList=ko.observableArray([]),a.classId=ko.observable(),a.come=ko.observable({isLoading:ko.observable(!1),workTime:ko.observable(),gpsType:ko.observable(),gpsHeight:ko.observable(),gpsLongitude:ko.observable(),gpsLatitude:ko.observable(),gpsAddress:ko.observable("")}),a.out=ko.observable({isLoading:ko.observable(!1),workTime:ko.observable(),gpsType:ko.observable(),gpsHeight:ko.observable(),gpsLongitude:ko.observable(),gpsLatitude:ko.observable(),gpsAddress:ko.observable("")}),app.getLocation=function(b){var c=JSON.parse(b);a.isHide(c.isSuccess),c.isSuccess?"LEAVE_STORE"===a.status()?(a.isHide()&&(a.come().gpsType(c.gpsType),a.come().gpsHeight(c.gpsHeight),a.come().gpsLongitude(c.gpsLongitude),a.come().gpsLatitude(c.gpsLatitude),a.come().gpsAddress(c.gpsAddress)),a.out().isLoading(!1)):"ENTER_STORE"===a.status()&&(a.isHide()&&(a.out().gpsType(c.gpsType),a.out().gpsHeight(c.gpsHeight),a.out().gpsLongitude(c.gpsLongitude),a.out().gpsLatitude(c.gpsLatitude),a.out().gpsAddress(c.gpsAddress)),a.come().isLoading(!1)):"LEAVE_STORE"===a.status()?a.come().gpsAddress("定位失败"):"ENTER_STORE"===a.status()&&a.out().gpsAddress("定位失败"),"ENTER_STORE"===a.status()?a.out().isLoading(!1):a.come().isLoading(!1)},a.loadPlanClass=function(){a.loadConfData(a.classList,"class")},a.loadConfData=function(a,b){app.util.ajax("/plan/getFieldConfByFieldType",{token:localStorage.token,fieldType:b},function(b){0===b.responseCode&&a(b.itemList)})},a.selectClass=function(b){a.classId(b.fieldCode)},a.savePunchInfo=function(){a.isSuccess(!0);var b={token:localStorage.token,planId:a.planId()};"ENTER_STORE"===a.status()?(b.status="LEAVE_STORE",b.workTime=a.out().workTime(),b.classId=a.classId(),a.isHide()&&(b.gpsType=a.out().gpsType(),b.gpsHeight=a.out().gpsHeight(),b.gpsLongitude=a.out().gpsLongitude(),b.gpsLatitude=a.out().gpsLatitude(),b.gpsAddress=a.out().gpsAddress())):(b.status="ENTER_STORE",b.workTime=a.come().workTime(),b.classId=a.classId(),a.isHide()&&(b.gpsType=a.come().gpsType(),b.gpsHeight=a.come().gpsHeight(),b.gpsLongitude=a.come().gpsLongitude(),b.gpsLatitude=a.come().gpsLatitude(),b.gpsAddress=a.come().gpsAddress())),b.position=!0,app.util.ajax("/actuality/savePunchInfo",b,function(b){a.isSuccess(!1),0===b.responseCode?location.href="#/currentWork":3107===b.responseCode?app.popup.prompt(b.responseMsg,"确定"):(app.toast.errorCode(b),4109===b.responseCode&&history.go(-1))})},a.init=function(b){a.planId(b),a.isSuccess(!1),app.util.ajax("/actuality/getPunchOfLeaveByPlanId",{token:localStorage.token,planId:b},function(b){0===b.responseCode?(a.status(b.status),a.classId(b.classId),"LEAVE_STORE"===b.status?(a.come().workTime(b.currDate),a.loadPlanClass()):(a.come().gpsAddress(b.sysInAddress),a.out().workTime(b.currDate),a.come().workTime(b.sysInTime)),a.loadAddress()):app.toast.errorCode(b)})},a.failed=function(){a.isHide()||a.gpsAddress("定位失败")},a.loadAddress=function(){"ENTER_STORE"===a.status()?a.out().isLoading(!0):a.come().isLoading(!0),app.nativeFn.getLocation("app.getLocation")},a.cancel=function(){history.go(-1)}},uploadModel=function(){var a=this;a.picList=ko.observableArray(),a.loadPicList=ko.observableArray(),a.isGlass=ko.observable(!1),a.selectedImg=ko.observable(),a.isSubmit=ko.observable(!1),a.url=ko.observable(),a.panId=ko.observable(),a.loadPic=function(a,b){this.filePath=a||"",this.guid=b||""},a.fileData=function(){this.file=ko.observable(),this.dataURL=ko.observable(),this.base64String=ko.observable()},a.onClear=function(a){app.popup.confirm("确定删除？","是","否",function(){a.clear&&a.clear(),app.toast.success("删除成功!")})},a.clearToloadPicList=function(b){app.popup.confirm("确定删除？","是","否",function(){a.loadPicList.remove(b),a.picList.push(new a.fileData),localStorage.setItem(app["const"].UPLOAD_PIC+a.panId(),JSON.stringify(a.loadPicList()))})},a.selectStore=function(){for(var b=0,c=[],d=0;d<a.picList().length;d++)if(a.picList()[d].file()){if(app.popup.showAjaxLoading(),a.picList()[d].file().size>5242880)return app.toast.error("每张图片不能大于5M",2e3),void app.popup.hideAjaxLoading();c.push(a.picList()[d])}for(var e=c.length,f=0;f<c.length;f++)lrz(c[f].file(),{width:900},function(c){var d=c.base64.split("base64,")[1];a.isSubmit(!0),app.util.ajax("/base/uploadFile",{token:localStorage.token,planId:a.panId(),fileStr:d},function(c){if(0===c.responseCode){for(var d=0;d<c.fileList.length;d++)a.loadPicList().push(new a.loadPic(c.fileList[d].filePath));b++,b===e&&(a.isSubmit(!1),localStorage.setItem(app["const"].UPLOAD_PIC+a.panId(),JSON.stringify(a.loadPicList())),app.toast.success("成功上传"+b+"张凭证!"),history.go(-1))}else app.toast.errorCode(c)},function(){app.toast.error(result.responseMsg,2e3),a.isSubmit(!1)})})},a.resetData=function(){localStorage[app["const"].STATUS_UPLOAD_PIC]="Y"},a.glass=function(b){a.isGlass(!0),a.selectedImg(b)},a.hideGlass=function(){a.isGlass(!1)},a.init=function(b){a.resetData(),a.panId(b),a.isSubmit(!1),a.picList([]),"Y"===localStorage[app["const"].STATUS_UPLOAD_PIC]&&localStorage[app["const"].UPLOAD_PIC+a.panId()]&&a.loadPicList(JSON.parse(localStorage.getItem(app["const"].UPLOAD_PIC+a.panId())));var c=6;a.loadPicList()&&(c=6-a.loadPicList().length);for(var d=0;c>d;d++)a.picList.push(new a.fileData)}},newsModel=function(){var a=this;a.messageList=ko.observableArray([]),a.timestamp=ko.observable(0),a.isLoad=ko.observable(!1),a.showLoadMore=ko.observable(!1),a.loadList=function(){a.isLoad()||(a.isLoad(!0),app.util.ajax("/message/getMessageList",{token:localStorage.token,pageSize:10,timestamp:a.timestamp()},function(b){if(0===b.responseCode){if(a.timestamp(b.timestamp),!(b.msgList.length>0))return a.showLoadMore(!1),app.toast.error(a.messageList().length>0?"已全部加载":"暂无消息");a.showLoadMore(!0);for(var c=0;c<b.msgList.length;c++)a.messageList.push(b.msgList[c])}a.isLoad(!1)},function(){a.isLoad(!1)}))},a.loadMore=function(){a.loadList()},a.reset=function(){a.messageList([]),a.timestamp(0),a.isLoad(!1)},a.init=function(){a.reset(),a.loadList()}},selectShopModel=function(){var a=this;a.storeList=ko.observableArray([]),a.planDate=ko.observable((new Date).getTime()),a.loadStore=function(){app.util.ajax("/myStore/getStoreListByUserId",{token:localStorage.token,planDate:a.planDate(),pageFlag:"todaywork"},function(b){0===b.responseCode&&(0!==b.itemList.length?a.storeList(b.itemList):setTimeout(function(){app.popup.prompt("无可用门店！您未绑定门店，或所有门店已制定计划。","确定")},0))})},a.resetData=function(){localStorage[app["const"].STATUS_SELECT_STORE]="Y",a.storeList([])},a.selectStore=function(a){localStorage[app["const"].LOCAL_SELECTED_STORE]=JSON.stringify(a),history.go(-1)},a.init=function(b){a.resetData(),a.planDate(b),a.loadStore()}},helpListModel=function(){var a=this;a.helpList=ko.observableArray([]),a.selectedHelp=ko.observable(0),a.loadHelpList=function(){a.helpList().length>0||(a.helpList([]),app.util.ajax("/help/getMyHelpList",{},function(b){0===b.responseCode&&a.helpList(b.itemList)}))},a.clickSubHelp=function(a){a.contentType===app["const"].HELP_TYPE_URL&&(location.href=a.content)},a.selectHelp=function(b){a.selectedHelp(b.menuId)},a.init=function(){a.loadHelpList()}},selectProductModel=function(){var a=this;a.keyword=ko.observable(""),a.isSubmit=ko.observable(!1),a.hasPostSubmit=ko.observable(!1),a.isNoProduct=ko.observable(!1),a.noProductText=ko.observable(""),a.productSearchList=ko.observableArray([]),a.productHistoryList=ko.observableArray([]),a.productRegularList=ko.observableArray([]),a.storeId=ko.observable(""),a.pageFlag=ko.observable(""),a.planDate=ko.observable(null),a.clearSearch=function(){a.keyword("")},a.clearSearchHistory=function(){localStorage.removeItem(app["const"].LOCAL_SEARCH_PRODUCT),a.productHistoryList([])},a.loadSearchList=function(){a.productSearchList([]),a.isNoProduct(!1),a.isSubmit(!0),a.hasPostSubmit(!0);var b={prdIdOrName:a.keyword(),storeId:a.storeId(),pageFlag:a.pageFlag()};a.planDate()&&(b.planDate=parseInt(a.planDate())),app.util.ajax("/plan/getPrdInfoByIdOrName",b,function(b){a.isSubmit(!1),0===b.responseCode&&(b.itemList.forEach(function(b){localStorage.prdListCustomerPrd?-1==localStorage.prdListCustomerPrd.indexOf(b.customerPrd)&&a.productSearchList.push(b):a.productSearchList.push(b)}),0==a.productSearchList().length&&1==b.itemList.length&&(a.isNoProduct(!0),a.noProductText("主页面已添加该产品")),0===b.itemList.length&&(a.isNoProduct(!0),a.noProductText("没有符合条件的产品")))})},a.loadHistoryList=function(){var b=localStorage.getItem(app["const"].LOCAL_SEARCH_PRODUCT);b&&a.productHistoryList(JSON.parse(b))},a.loadRegularList=function(){a.productRegularList().length>0||app.util.ajax("/plan/getPrdInfoByIdOrName",{prdIdOrName:a.keyword(),store:a.storeId(),pageFlag:a.pageFlag()},function(b){0===b.responseCode&&a.productRegularList(b.itemList)})},a.selectProduct=function(b){localStorage[app["const"].LOCAL_SELECTED_PRODUCT]=JSON.stringify(b),a.addToHistoryList(b),history.go(-1)},a.addToHistoryList=function(b){for(var c=0;c<a.productHistoryList().length;c++)if(b.customerPrd==a.productHistoryList()[c].customerPrd){a.productHistoryList.splice(c,1);break}a.productHistoryList.splice(0,0,b),a.productHistoryList.splice(5),localStorage[app["const"].LOCAL_SEARCH_PRODUCT]=JSON.stringify(a.productHistoryList())},a.resetData=function(){a.hasPostSubmit(!1),a.productSearchList([]),a.productHistoryList([]),a.productRegularList([]),a.keyword(""),a.isSubmit(!1),localStorage[app["const"].STATUS_SELECT_PRODUCT]="Y",a.storeId(""),a.pageFlag(""),a.isNoProduct(!1),a.planDate(null)},a.init=function(b,c,d){a.resetData(),a.storeId(b||""),a.pageFlag(c||""),a.planDate(d)}},saleReportModel=function(){var a=this;a.currentReport=ko.observable(),a.type=ko.observable(),a.selectedMonth=ko.observable((new Date).getMonth()+1+"月"),a.selectedYear=ko.observable((new Date).getFullYear()+"年"),a.selectedTimeStamp=ko.observable((new Date).getTime()),a.selectedTimeStamp.subscribe(function(b){a.getReportByTimeStamp(b)}),a.selectedMonthStamp=ko.observable((new Date).getMonth()),a.selectedMonthStamp.subscribe(function(b){a.getReportByMonthStamp(b)}),a.selectedDate=ko.observable(),a.isRest=ko.observable(!0),a.timeList=ko.observableArray([]),a.totalDate=ko.observable(),a.storeDate=ko.observable(),a.timeStampModel=function(a){this.timeStamp=ko.observable(a.getTime()),this.year=ko.observable(a.getFullYear()),this.month=ko.observable(a.getMonth()+1),this.date=ko.observable(a.getDate())},a.getTimeAxis=function(){a.timeList([]);var b=new Date,c=b.getMonth(),d=b.getFullYear(),e=new Date,f=new Date;c>0?f.setMonth(c-1):(f.setFullYear(d>0?d-1:d),f.setMonth(11));var g=new Date;g.setDate(0);for(var h=1;h<=g.getDate();h++)f.setDate(h),a.timeList.push(new a.timeStampModel(f));for(var h=1;h<=b.getDate();h++)e.setDate(h),a.timeList.push(new a.timeStampModel(e));a.TimeSelect(a.timeList()[a.timeList().length-1])},a.getMonthAxis=function(){a.timeList([]);for(var b=new Date,c=0;12>=c;c++)a.timeList.push(new a.timeStampModel(b)),b.setMonth(b.getMonth()-1);a.timeList.reverse(),a.MonthSelect(a.timeList()[a.timeList().length-1])},a.setProgressCss=function(){},a.TimeSelect=function(b){a.selectedMonth(b.month()+"月"),a.selectedTimeStamp(b.timeStamp()),a.selectedDate(b.date()+"日")},a.MonthSelect=function(b){a.selectedYear(b.year()+"年"),a.selectedMonthStamp(b.timeStamp()),a.selectedDate(b.month()+"月")},a.getReportByTimeStamp=function(b){a.currentReport("date"),app.util.ajax("/report/getPlanActuOfDayByDate",{token:localStorage.token,date:b},function(c){console.log(c),0===c.responseCode?(a.totalDate(c.total),a.storeDate(c.itemList),a.isRest(c.validFlag),a.selectedDate(new Date(b).getDate()+"日")):app.toast.error(c.responseMsg)})},a.getReportByMonthStamp=function(b){a.currentReport("month"),app.util.ajax("/report/getPlanActuTotalByMonth",{token:localStorage.token,yearMonth:b},function(c){console.log(c),0===c.responseCode?(a.totalDate(c.total),a.storeDate(c.itemList),a.isRest(c.validFlag||""),a.selectedDate(new Date(b).getMonth()+1+"月")):app.toast.error(c.responseMsg)})},a.setScrollBar=function(a){document.getElementById(a).scrollLeft=document.getElementById(a).scrollWidth},a.goToDetail=function(b){"date"==a.type()&&(localStorage.selectedTimeStamp="Y",location.href="#/saleDetail/"+a.selectedTimeStamp()+"/"+b.planId)},a.init=function(b){"Y"===localStorage.selectedTimeStamp?localStorage.selectedTimeStamp="N":(a.totalDate(""),a.storeDate(""),a.type(b),"date"==b?a.getTimeAxis():"month"==b&&a.getMonthAxis())}},saleDetailModel=function(){var a=this;a.currentTime=ko.observable(),a.validFlag=ko.observable(),a.actualList=ko.observable(),a.tapList=ko.observableArray([]),a.selectedPlan=ko.observable(),a.actualLength=ko.observable(),a.tapModel=function(a,b){this.tapName=ko.observable(a),this.planId=ko.observable(b.planId)},a.getSaleDetail=function(b,c){a.tapList([]),app.util.ajax("/report/getActuDetailByDateOrPlanId",{token:localStorage.token,pageFlag:"salesreport",date:b,planId:c},function(b){if(console.log(b),0===b.responseCode){if(a.actualList(b.itemList),a.actualLength(a.actualList().length),a.actualList().length){for(var c=0;c<b.itemList.length;c++)a.tapList.push(new a.tapModel("实际"+(c+1),b.itemList[c]));a.validFlag(b.itemList[0].validFlag),a.selectedPlan(b.itemList[0].planId)}}else app.toast.error(b.responseMsg)})},a.selectTap=function(b){a.selectedPlan(b.planId())},a.goToFileView=function(a){localStorage.fileViewList=JSON.stringify(a.fileList),location.href="#/fileView"},a.init=function(b,c){a.validFlag("");var d=new Date;d.setTime(b),a.currentTime(app.util.formatDate(d)+" "+app.util.getDay(d)),a.getSaleDetail(b,c)}},reportListModel=function(){var a=this;a.goToDateSaleReport=function(){location.href="#/saleReport/date"},a.goToMonthSaleReport=function(){location.href="#/saleReport/month"},a.init=function(){}},fileViewModel=function(){var a=this;a.fileList=ko.observable(),a.isGlass=ko.observable(!1),a.selectedImg=ko.observable(),a.glass=function(b){a.isGlass(!0),a.selectedImg(b.filePath)},a.hideGlass=function(){a.isGlass(!1)},a.init=function(){a.fileList(JSON.parse(localStorage.fileViewList))}},storeInfoModel=function(){var a=this;a.storList=ko.observableArray(),a.conteactStorList=ko.observableArray(),a.controlStorList=ko.observableArray(),a.switchTab=ko.observable(""),a.isShowEmpty=ko.observable(!1),a.emptyLabel=ko.observable("当前没有门店，请等待分配"),a.switchTab.subscribe(function(b){app.navigator.setHeader("attent"==b?{title:"出勤门店"}:{title:"责任门店",rightClassName:"addControlStore",rightBtnCallback:a.addControlStore,leftBtnCallback:a.goBack}),"attent"==b&&0==a.storList().length?(a.isShowEmpty(!0),a.emptyLabel("当前没有门店，请等待分配")):"contact"==b&&0==a.conteactStorList().length?(a.isShowEmpty(!0),a.emptyLabel("您尚未有承包门店")):"control"==b&&0==a.controlStorList().length?(a.isShowEmpty(!0),a.emptyLabel("您尚未有责任门店")):a.isShowEmpty(!1)}),a.getCurrentPlan=function(){app.popup.hideLoading(),app.util.ajax("/myStore/getStoreListByUserId",{token:localStorage.token,planDate:(new Date).getTime(),pageFlag:"mystore"},function(b){0===b.responseCode&&(b.itemList.forEach(function(b){a.storList.push(b)}),a.switchTab()||a.switchTab("attent"))})},a.getContactShop=function(){app.popup.hideLoading(),app.util.ajax("/myStore/getContractStoreListByUserId",{token:localStorage.token},function(b){console.log(b),0===b.responseCode&&b.itemList.length>0&&(b.itemList.forEach(function(b){a.conteactStorList.push(b)}),console.log(a.conteactStorList()))})},a.getControlShop=function(){app.util.ajax("/myStore/getControlStoreListByUserId",{token:localStorage.token},function(b){console.log(b),0===b.responseCode&&(a.controlStorList([]),b.storeList.forEach(function(b){a.controlStorList.push(b)}),console.log(a.controlStorList()))})},a.gotoDetail=function(b){return"FEATURE"==b.dateList[0].relStauts?void app.popup.alert("您与该门店关系还未生效，暂不可操作"):"HISTORY"==b.dateList[0].relStauts?void app.popup.alert("您与该门店关系已截止，不可操作"):(a.switchTab("control"),void(location.href="#/storePersonal/"+b.storeId))},a.changeTab=function(b){a.switchTab(b)},a.goBack=function(){a.switchTab("attent"),app.navigator.originalHeader.leftBtnCallback()},a.addControlStore=function(){location.href="#/addStoreStaff"},a.init=function(){a.isShowEmpty(!1),a.getCurrentPlan(),"attent"==a.switchTab()?app.navigator.setHeader({title:"出勤门店"}):"control"==a.switchTab()&&app.navigator.setHeader({title:"责任门店",rightClassName:"addControlStore",rightBtnCallback:a.addControlStore,leftBtnCallback:a.goBack}),a.getControlShop(),a.storList([]),a.conteactStorList([])}},bossInfoModel=function(){var a=this;a.bpPernr=ko.observable(""),a.bpName=ko.observable(""),a.mobile=ko.observable(""),a.callMobile=ko.observable(""),a.positionDesc=ko.observable(""),a.getLeaderInfoByUserId=function(){app.popup.hideLoading(),app.util.ajax("/leader/getLeaderInfoByUserId",{token:localStorage.token},function(b){if(0===b.responseCode){var c=b.itemList,d=c[0];a.bpPernr(d.bpPernr),a.bpName(d.bpName),a.mobile(d.mobile),a.positionDesc(d.positionDesc)}})},a.call=function(){location.href="tel://"+a.mobile()},a.init=function(){app.popup.showLoading(),a.getLeaderInfoByUserId()}},loginModel=function(){var a=this;a.userName=ko.observable(""),a.psw=ko.observable(""),a.login=function(){var b=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,18}$/;if(!b.test(a.psw()))return void app.popup.alert("密码不符合安全规则，请通过忘记密码重新设置8-18位数字+字母组合密码",5e3);var c={account:a.userName(),password:app.util.des(a.psw()),deviceNum:app.deviceToken};app.util.ajax("/user/ssoLogin",c,function(a){0===a.responseCode?(localStorage.token=a.token,location.href="#/index"):app.toast.error(a.responseMsg)})},a.goToForgetPwd=function(){location.href="#/forgetPwd"},a.cleanTxt=function(a){a("")},a.init=function(){localStorage.token&&localStorage.removeItem("token"),a.userName(""),a.psw("")}},userInfoModel=function(){var a=this;a.realName=ko.observable(),a.account=ko.observable(),a.phone=ko.observable(),a.isShowCode=ko.observable(),a.getUserInfo=function(){app.util.ajax("/user/getUserInfo",{token:localStorage.token},function(b){console.log(b),$("#userInfoPage #userQrCode").empty();var c=b.user;a.realName(c.realName),a.account(c.account),a.phone(c.mobileNo),$("#userInfoPage #userQrCode").qrcode({render:"canvas",text:"BM_SFA:"+a.account(),width:160,height:160,typeNumber:-1,correctLevel:0})})},a.changeCode=function(){a.isShowCode(!a.isShowCode())},a.goToChangePwd=function(){location.href="#/changePwd"},a.logOut=function(){app.util.ajax("/user/logout",{token:localStorage.token},function(a){console.log(a),0===a.responseCode?(localStorage.removeItem("token"),app.toast.success("注销成功！"),location.href="#/login",location.reload()):app.toast.error(a.responseMsg)})},a.init=function(){a.isShowCode(!1),a.getUserInfo()}},forgetPwdModel=function(){var a=this;a.account=ko.observable(),a.phone=ko.observable(),a.getVerifyCode=function(){return a.account()&&a.phone()?app.regex.mobile(a.phone())?void app.util.ajax("/user/getVerifyCode",{account:a.account(),mobileNo:a.phone()},function(b){console.log(b),0===b.responseCode?(app.popup.alert("短信发送成功！",3e3,null,"success"),location.href="#/resetPwd/"+a.account()+"/"+a.phone()):app.toast.error(b.responseMsg)}):void app.popup.alert("请输入正确电话号码"):void app.popup.alert("请将信息填写完整")},a.cleanTxt=function(a){a("")},a.init=function(){a.account(""),a.phone("")}},changePwdModel=function(){var a=this;a.oldPwd=ko.observable(),a.newPwd=ko.observable(),a.rePwd=ko.observable(),a.changePwd=function(){var b=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,18}$/;return b.test(a.newPwd())?a.newPwd()!=a.rePwd()?void app.popup.alert("新密码两次输入不一致"):a.newPwd()==a.oldPwd()?void app.popup.alert("新设置密码不能与原密码相同"):void app.util.ajax("/user/updatePassword",{token:localStorage.token,oldPassword:app.util.des(a.oldPwd()),newPassword:app.util.des(a.newPwd())},function(b){console.log(b),0===b.responseCode?(app.toast.success("密码修改成功！"),a.oldPwd(""),a.newPwd(""),a.rePwd(""),history.go(-1)):app.toast.error(b.responseMsg)}):void app.popup.alert("密码必须由8-18位数字和字母组合，请重新输入！")},a.cleanTxt=function(a){a("")},a.init=function(){a.oldPwd(""),a.newPwd(""),a.rePwd("")}},resetPwdModel=function(){var a=this;a.verifyCode=ko.observable(),a.pwd=ko.observable(),a.rePwd=ko.observable(),a.account=ko.observable(),a.mobile=ko.observable(),a.codeBtnText=ko.observable(),a.codeBtnStatus=ko.observable(),a.setTimeOutCode=ko.observable(),a.commitReset=function(){if(!(a.pwd()&&a.rePwd()&&a.verifyCode()))return void app.popup.alert("请将信息填写完整");var b=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,18}$/;return b.test(a.pwd())?a.pwd()!=a.rePwd()?void app.popup.alert("两次输入密码不一致"):void app.util.ajax("/user/resetPassword",{mobileNo:a.mobile(),verifyCode:a.verifyCode(),newPassword:app.util.des(a.pwd())},function(a){0==a.responseCode?(app.toast.success(a.responseMsg),location.href="#/login"):app.toast.error(a.responseMsg)}):void app.popup.alert("密码必须由8-18位数字和字母组合，请重新输入！")},a.getVerifyCode=function(){app.util.ajax("/user/getVerifyCode",{account:a.account(),mobileNo:a.mobile()},function(b){console.log(b),0===b.responseCode?(app.popup.alert("短信发送成功！",3e3,null,"success"),a.codeTimer(120)):app.toast.error(b.responseMsg)})},a.codeTimer=function(b){b>0?(a.codeBtnText(b+"秒"),b-=1,a.codeBtnStatus(!0),a.setTimeOutCode(setTimeout(function(){a.codeTimer(b)},1e3))):(a.codeBtnText("重新获取"),a.codeBtnStatus(!1))},a.cleanTxt=function(a){a("")},a.init=function(b,c){a.verifyCode(""),a.pwd(""),a.rePwd(""),a.account(b),a.mobile(c),a.codeTimer(120)}},setUpModel=function(){var a=this;a.init=function(){}},noticeListModel=function(){var a=function(a){this.infoId=ko.observable(a.infoId||""),this.infoTitle=ko.observable(a.infoTitle||""),this.releaseTime=ko.observable(a.releaseTime||0),this.isRead=ko.observable(a.isRead)},b=this;b.noticeList=ko.observableArray([]),b.timestamp=ko.observable(0),b.isLoad=ko.observable(!1),b.showLoadMore=ko.observable(!1),b.loadList=function(){b.isLoad()||(b.isLoad(!0),app.util.ajax("/message/getInformationList",{token:localStorage.token,pageSize:10,timestamp:b.timestamp()},function(c){if(0===c.responseCode){if(b.timestamp(c.timestamp),!(c.infoList.length>0))return b.showLoadMore(!1),app.toast.error(b.noticeList().length>0?"已全部加载":"暂无通知");b.showLoadMore(!0);for(var d=0;d<c.infoList.length;d++)b.noticeList.push(new a(c.infoList[d]))}b.isLoad(!1)},function(){b.isLoad(!1)}))},b.loadMore=function(){b.loadList()},b.goToNoticeDetail=function(a){location.href=app.util.buildUrl("#/noticeDetail",{infoId:a.infoId()}),a.isRead(!0)},b.reset=function(){b.timestamp(0),b.noticeList([]),b.isLoad(!1)},b.init=function(){b.reset(),b.loadList()}},noticeDetailModel=function(){var a=this;a.infoId=ko.observable(""),a.infoTitle=ko.observable(""),a.releaseTime=ko.observable((new Date).getTime()),a.infoContent=ko.observable(""),a.loadData=function(){app.util.ajax("/message/getInfoDetail",{token:localStorage.token,infoId:a.infoId()},function(b){0===b.responseCode?(a.infoTitle(b.infoTitle),a.releaseTime(b.releaseTime),a.infoContent(b.infoContent)):(app.toast.error(b.responseMsg),history.go(-1))})},a.reset=function(){a.infoTitle(""),a.releaseTime((new Date).getTime()),a.infoContent("")},a.init=function(){var b=app.util.getQueryString("infoId");a.reset(),a.infoId(b),a.loadData()}},knowledgeBaseModel=function(){var a=this;a.knowledgeBaseList=ko.observableArray([]),a.selectedKnowledgeBase=ko.observable(null),a.collectList=ko.observableArray([]),a.collectSelected=ko.observable(!0),a.isLoadCollectList=ko.observable(!1),a.isGoToDetail=ko.observable(!1);var b=function(a){if(this.isSelected=ko.observable(!1),this.catFirstId=ko.observable(a.catFirstId||""),this.catFirstName=ko.observable(a.catFirstName||""),this.imgOn=ko.observable(a.imgOn||""),this.imgOut=ko.observable(a.imgOut||""),this.catList=ko.observableArray([]),a.catList&&a.catList instanceof Array)for(var b=0;b<a.catList.length;b++)this.catList.push(new c(a.catList[b]))},c=function(a){this.isSelected=ko.observable(!0),this.catSecondId=ko.observable(a.catSecondId||""),this.catSecondName=ko.observable(a.catSecondName||""),this.paperList=ko.observableArray(a.paperList||[]);

};a.selectCollect=function(){a.collectSelected(!0),a.collectList([]),a.loadCollectList();for(var b=0;b<a.knowledgeBaseList().length;b++){a.knowledgeBaseList()[b].isSelected(!1);for(var c=a.knowledgeBaseList()[b].catList(),d=0;d<c.length;d++)c[d].isSelected(!0)}},a.selectKnowledgeBase=function(b){a.collectSelected(!1);for(var c=0;c<a.knowledgeBaseList().length;c++)if(b!==a.knowledgeBaseList()[c]){a.knowledgeBaseList()[c].isSelected(!1);for(var d=a.knowledgeBaseList()[c].catList(),e=0;e<d.length;e++)d[e].isSelected(!0)}a.selectedKnowledgeBase(b),b.isSelected(!0)},a.toggleSecondMenu=function(a){a.isSelected(!a.isSelected())},a.loadList=function(){app.util.ajax("/knowledge/getMenuList",{token:localStorage.token},function(c){if(0===c.responseCode)for(var d=0;d<c.list.length;d++)a.knowledgeBaseList.push(new b(c.list[d]))})},a.loadCollectList=function(){var b=0,c=a.collectList().length;c>0&&(b=a.collectList()[c-1].collectTime),a.isLoadCollectList()||(a.isLoadCollectList(!0),app.util.ajax("/knowledge/getCollectList",{token:localStorage.token,pageSize:1e4,collectTime:b},function(b){if(a.isLoadCollectList(!1),0===b.responseCode)for(var c=0;c<b.list.length;c++)-1===a.collectExist(b.list[c])&&a.collectList.push(b.list[c])},function(){a.isLoadCollectList(!1)}))},a.collectExist=function(b){for(var c=0;c<a.collectList().length;c++)if(b.paperId===a.collectList()[c].paperId)return c;return-1},a.loadMoreCollectList=function(){a.loadCollectList()},a.geToDetail=function(b){location.href=app.util.buildUrl("#/knowledgeDetail",{paperId:b.paperId}),a.isGoToDetail(!0)},a.reset=function(){a.collectSelected(!0),a.isLoadCollectList(!1),a.collectList([]),a.knowledgeBaseList([]),a.isGoToDetail(!1)},a.init=function(){a.isGoToDetail()?(a.isGoToDetail(!1),a.collectSelected()&&(a.collectList([]),a.loadCollectList())):(a.reset(),a.loadList(),a.loadCollectList())}},knowledgeDetailModel=function(){var a=this;a.paperId=ko.observable(""),a.paperTitle=ko.observable(""),a.iframeSrc=ko.observable(""),a.releaseTime=ko.observable(new Date),a.paperContent=ko.observable(""),a.isCollect=ko.observable(!1),a.collecting=ko.observable(!1),a.loadData=function(){app.util.ajax("/knowledge/getPaperDetail",{token:localStorage.token,paperId:a.paperId()},function(b){0===b.responseCode?(a.paperTitle(b.paperTitle),a.releaseTime(b.releaseTime),a.paperContent(b.paperContent),a.isCollect(b.isCollect),$("#knowledgeDetailPage .column-article a").click(function(b){b.preventDefault(),b.stopPropagation(),a.iframeSrc($(this).attr("href"))})):11301===b.responseCode?(app.toast.error(b.responseMsg),app.knowledgeBaseModel&&setTimeout(function(){app.knowledgeBaseModel.isGoToDetail(!1),history.go(-1)},2e3)):app.toast.error(b.responseMsg)})},a.collectPaper=function(){a.collecting()||(a.collecting(!0),app.util.ajax("/knowledge/collectPaper",{token:localStorage.token,paperId:a.paperId(),isCollect:!a.isCollect()},function(b){0===b.responseCode?a.isCollect(!a.isCollect()):11301===b.responseCode?(app.toast.error(b.responseMsg),app.knowledgeBaseModel&&setTimeout(function(){app.knowledgeBaseModel.isGoToDetail(!1),history.go(-1)},2e3)):app.toast.error(b.responseMsg),a.collecting(!1)},function(){a.collecting(!1)}))},a.reset=function(){a.paperId(""),a.paperTitle(""),a.releaseTime(new Date),a.paperContent(""),a.isCollect(!1)},a.goBack=function(){a.iframeSrc()?(a.iframeSrc(""),history.go(-1)):location.href="#/knowledgeBase"},a.init=function(){var b=app.util.getQueryString("paperId");a.reset(),a.paperId(b),a.loadData()}},managementModel=function(){var a=this;a.title=ko.observable("请假管理"),a.leaveList=ko.observableArray([]),a.load=function(){a.leaveList([]),app.util.ajax("/leave/getTotalLeaveInfoByDate",{token:localStorage.token,pageFlag:"APPLY_LEAVE"},function(b){if(0===b.responseCode){for(var c=b.itemList,d=0;d<c.length;d++){var e=app.util.getLeaveStatus(c[d].orderStatus);c[d].orderStatusShow=e.orderStatusShow,c[d].status=e.status,c[d].recall=e.recall}a.leaveList(b.itemList)}else app.toast.error(b.responseMsg)})},a.goPage=function(a){location.href=(a.orderStatus===app["const"].WAIT_BACK_APPLY||a.orderStatus===app["const"].FILE_REJECT||a.orderStatus===app["const"].BACK_REJECT)&&a.rejectCount<3?"#/vacationUsed/"+a.applyNo:"#/vacateDetails/"+a.applyNo},a.goVacateApply=function(){location.href="#/vacateApply"},a.gotoPage=function(a){location.href=a},a.cancel=function(b){app.popup.confirm("确定要撤销申请吗？","确认","取消",function(){app.util.ajax("/leave/updateOrderStatusByApplyNo",{token:localStorage.token,applyNo:b.applyNo},function(b){0===b.responseCode?(app.toast.success("撤销成功!"),a.load()):app.toast.error(b.responseMsg)})})},a.init=function(){$("#header").addClass("none"),a.load()}},vacateApplyModel=function(){var a=this,b=function(a,b,c,d){var e=this;e.days=ko.observable(c),e.hours=ko.observable(d),e.leaveId=ko.observable(a||""),e.leaveDesc=ko.observable(b||""),e.days.subscribe(function(a){return isNaN(a)?e.days(0):void 0}),e.hours.subscribe(function(a){return isNaN(a)?e.hours(0):a>8?e.hours(8):0>a?e.hours(0):a%1>0?e.hours(Number(a).toFixed(2)):void 0})};a.vacateTypes=ko.observableArray([]),a.applyNo=ko.observable(""),a.startDateTime=ko.observable(0),a.endDateTime=ko.observable(0),a.totalDays=ko.observable(""),a.totalHours=ko.observable(""),a.reason=ko.observable(""),a.leaveList=ko.observableArray([]),a.fileList=ko.observableArray([]),a.yearLeaveBalance=ko.observable(0),a.restLeaveBalance=ko.observable(0),a.isSubmiting=ko.observable(!1),a.startP=null,a.endP=null,a.totalDays.subscribe(function(b){isNaN(b)&&a.totalDays(0)}),a.totalHours.subscribe(function(b){return isNaN(b)&&a.totalHours(0),b>8?a.totalHours(8):0>b?a.totalHours(0):b%1>0?a.totalHours(parseInt(b)):void 0}),a.startDateTimeStr=ko.pureComputed({read:function(){return 0==a.startDateTime()?"开始时间":app.util.formatPattern(a.startDateTime(),"yyyy/MM/dd hh:mm")},write:function(b){a.startDateTime(new Date(b).getTime()),a.endDateTime(0),a.initEndDateTimePicker()}}),a.endDateTimeStr=ko.pureComputed({read:function(){return 0==a.endDateTime()?"结束时间":app.util.formatPattern(a.endDateTime(),"yyyy/MM/dd hh:mm")},write:function(b){a.endDateTime(new Date(b).getTime())}}),a.selectVacateType=function(c){var d=a.vacateTypeIsExist(c);return d>=0?a.leaveList.splice(d,1):a.leaveList().length>=4?app.toast.error("请假类型不能超过4项"):void("0001"===c.fieldCode?a.yearLeaveBalance()<=0?app.popup.alert("您没有可使用年假，<br>请选择其他请假类型。"):app.popup.confirm('您的年假余额为<span class="color-ff6c47">'+a.yearLeaveBalance()+"小时</span><br>确定使用年假吗？","确认","取消",function(){a.leaveList.push(new b(c.fieldCode,c.fieldDesc))}):"0009"===c.fieldCode?a.restLeaveBalance()<=0?app.popup.alert("您没有可使用调休假，<br>请选择其他请假类型。"):app.popup.confirm('您的调休假余额为<span class="color-ff6c47">'+a.restLeaveBalance()+"小时</span><br>确定使用调休假吗？","确认","取消",function(){a.leaveList.push(new b(c.fieldCode,c.fieldDesc))}):"0003"===c.fieldCode&&a.vacateTypeIsExist({fieldCode:"0001"})<0&&a.yearLeaveBalance()>0?app.popup.confirm('您的年假余额为<span class="color-ff6c47">'+a.yearLeaveBalance()+"小时</span><br>确定使用年假吗？","确认","取消",function(){a.leaveList.push(new b("0001","年假"))},function(){a.leaveList.push(new b(c.fieldCode,c.fieldDesc))}):a.leaveList.push(new b(c.fieldCode,c.fieldDesc)))},a.uploadCertificate=function(){localStorage.localPicListPage="Y",location.href="#/uploadCertificate/leave/0"},a.vacateTypeIsExist=function(b){for(var c=0;c<a.leaveList().length;c++)if(b.fieldCode===a.leaveList()[c].leaveId())return c;return-1},a.loadVacateTypeData=function(){a.vacateTypes([]),app.util.ajax("/plan/getFieldConfByFieldType",{token:localStorage.token,fieldType:"LEAVE"},function(b){0===b.responseCode&&a.vacateTypes(b.itemList)})},a.loadVacateBalance=function(){app.util.ajax("/leave/getBpLeftLeaveHour",{token:localStorage.token},function(b){if(0===b.responseCode)for(var c=0;c<b.itemList.length;c++){var d=b.itemList[c];"0001"===d.leaveId?a.yearLeaveBalance(d.hour):"0009"===d.leaveId&&a.restLeaveBalance(d.hour)}else app.toast.error(b.responseMsg)})},a.postData=function(){if(!a.isSubmiting()){var b={token:localStorage.token,orderType:"LEAVE_APPLY"};if(a.applyNo()&&(b.applyNo=a.applyNo()),0==a.leaveList().length)return app.toast.error("请选择请假类型");if(a.leaveList().length>4)return app.toast.error("请假类型不能超过4项");var c,d;if(c=a.totalDays()?Number(a.totalDays()):0,d=a.totalHours()?Number(a.totalHours()):0,b.totalHour=8*c+d,b.totalHour<=0)return app.toast.error("请填写总时长");b.leaveList=[];for(var e=0,f=0;f<a.leaveList().length;f++){var g,h,i=a.leaveList()[f];g=i.days()?Number(i.days()):0,h=i.hours()?Number(i.hours()):0;var j=8*g+h;if(e+=j,0==g&&0==h)return app.toast.error("请填写"+i.leaveDesc()+"的请假时长");if("0001"===i.leaveId()){if(j>120)return app.popup.alert("年假请假时长不能超过15天")}else if("0006"===i.leaveId()||"0005"===i.leaveId()){if(j>24)return app.popup.alert("丧假或婚假不能超过3天")}else if(j>2920)return app.popup.alert("事假、调休假、病假、生育假、其他假不能超过365天");if("0001"===i.leaveId()&&j>a.yearLeaveBalance())return app.toast.error(i.leaveDesc()+"的时长不能超过当前余额"+app.util.leaveHourShow(a.yearLeaveBalance()));if("0009"===i.leaveId()&&j>a.restLeaveBalance())return app.toast.error(i.leaveDesc()+"的时长不能超过当前余额"+app.util.leaveHourShow(a.restLeaveBalance()));b.leaveList.push({hour:j,leaveId:i.leaveId(),leaveDesc:i.leaveDesc()})}if(e!==b.totalHour)return app.toast.error("请假总时长与各项请假类型时长总和不一致");if(0===a.startDateTime())return app.toast.error("请选择请假开始时间");if(0===a.endDateTime())return app.toast.error("请选择请假结束时间");if(a.endDateTime()-a.startDateTime()<36e5)return app.toast.error("结束时间必须大于开始时间1小时");if(b.startDate=a.startDateTime(),b.endDate=a.endDateTime(),""===$.trim(a.reason()))return app.toast.error("请填写请假原因");if(app.util.isEmoji(a.reason()))return app.toast.error("请假原因不能输入表情");if(a.reason().length>200)return app.toast.error("请假原因不能超过200字");b.reason=a.reason(),b.fileList=[];var k=localStorage.localPicList;if(k&&(b.fileList=k),-1!==a.vacateTypeIsExist({fieldCode:"0005"})&&b.fileList&&0==b.fileList.length)return app.popup.alert("请上传证明文件！");if(a.fileList().length>5)return app.toast.error("证明文件不能超过5张");a.isSubmiting(!0),app.util.ajax("/leave/saveLeaveApplyInfo",b,function(b){0===b.responseCode?(a.applyNo(b.applyNo),app.toast.success("申请成功"),history.go(-1)):app.popup.alert(b.responseMsg),a.isSubmiting(!1)},function(){app.toast.error(app["const"].AJAX_ERROR_MSG),a.isSubmiting(!1)})}},a.initDateTimePicker=function(){$("#vacateApplyStartDateTimePacker").mobiscroll("destroy"),$("#vacateApplyEndDateTimePacker").mobiscroll("destroy"),a.initStartDateTimePicker()},a.initStartDateTimePicker=function(){var b=new Date,c=b.getFullYear(),d=b.getTime(),e=d%18e5,f=d-e+18e5,g=$.extend({},a.defaultDateOpt(),{min:new Date(f),startYear:c,endYear:c+1,stepMinute:30});a.startP=$("#vacateApplyStartDateTimePacker").mobiscroll(g)},a.initEndDateTimePicker=function(){var b=new Date,c=b.getFullYear(),d=new Date(a.startDateTime()+36e5),e=$.extend({},a.defaultDateOpt(),{min:d,endYear:c+1,steps:{minute:60}});$("#vacateApplyEndDateTimePacker").mobiscroll("destroy"),a.endP=$("#vacateApplyEndDateTimePacker").mobiscroll(e)},a.defaultDateOpt=function(){return{preset:"datetime",theme:"android-holo-light",display:"bottom",mode:"scroller",dateFormat:"yyyy/mm/dd",timeFormat:"HH:ii",lang:"zh",rows:3,buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]}},a.preReset=function(){app.popup.confirm("即将清空所有的填写内容。<br>确定重置吗？",null,null,function(){a.reset()})},a.reset=function(){a.applyNo(""),a.leaveList([]),a.startDateTime(0),a.endDateTime(0),a.reason(""),a.fileList([]),a.totalDays(""),a.totalHours(""),localStorage.removeItem("localPicList"),a.isSubmiting(!1)},a.init=function(){"Y"===localStorage.localPicListPage?localStorage.localPicListPage="N":(a.reset(),a.loadVacateTypeData(),a.loadVacateBalance()),a.fileList(localStorage.localPicList?JSON.parse(localStorage.localPicList):[])}},vacationUsedModel=function(){var a=this;a.itemList=ko.observable(),a.isShowEdit=ko.observable(!1),a.currentOrderType=ko.observable(),a.currentStatus=ko.observable(),a.activeLeave=ko.observable(),a.activeId=ko.observable(),a.activeType=ko.observable(),a.activeDay=ko.observable(),a.activeHour=ko.observable(),a.applyNo=ko.observable(),a.startDate=ko.observable(),a.endDate=ko.observable(),a.leaveReason=ko.observable(),a.totalHour=ko.observable(0),a.leaveTotalHour=ko.observable(0),a.leaveStartDate=ko.observable(0),a.leaveEndDate=ko.observable(0),a.fileList=ko.observableArray([]),a.history=ko.observableArray([]),a.leaveList=ko.observableArray(),a.currentLeaveType=ko.observableArray([]),a.leaveTypeList=ko.observableArray(),a.leaveBalance=ko.observableArray([]),a.isShowLog=ko.observable(!1),a.isHideSubmit=ko.observable(!1),a.isHideSubmit.subscribe(function(b){a.isEditDisabled(b)}),a.isEditDisabled=ko.observable(!1),a.isSubmit=ko.observable(!1),a.activeDay.subscribe(function(b){return isNaN(b)?a.activeDay(0):0>b?a.activeDay(0):void 0}),a.activeHour.subscribe(function(b){return isNaN(b)?a.activeHour(0):b>8?a.activeHour(8):0>b?a.activeHour(0):void 0}),a.hourModel=function(b){var c=this;c.day=ko.observable(app.util.leaveHourTransform(b).day||0),c.day.subscribe(function(b){return isNaN(b)?c.day(0):(c.day(parseInt(b)),void(c.sumHour()-a.leaveTotalHour()>8&&(app.popup.alert("总时长最多不能超过原请假时长1天"),c.day(app.util.leaveHourTransform(a.leaveTotalHour()).day+1),c.hour(app.util.leaveHourTransform(a.leaveTotalHour()).hour))))}),c.hour=ko.observable(app.util.leaveHourTransform(b).hour||0),c.hour.subscribe(function(b){return isNaN(b)?c.hour(0):b>8?c.hour(8):(c.hour(parseInt(b)),void(c.sumHour()-a.leaveTotalHour()>8&&(app.popup.alert("总时长最多不能超过原请假时长1天"),c.day(app.util.leaveHourTransform(a.leaveTotalHour()).day+1),c.hour(app.util.leaveHourTransform(a.leaveTotalHour()).hour))))}),c.sumHour=ko.pureComputed({read:function(){return app.util.leaveDayTransform(c.day(),c.hour())}})},a.historyModel=function(a){this.statusCode=ko.observable(a.orderStatus||""),this.processNode=ko.observable(a.processNode||""),this.status=ko.observable(app.util.getLeaveStatus(a.orderStatus).orderStatusShow||""),this.reason=ko.observable(a.rejectReason||""),this.date=ko.observable(app.util.formatDateTime(a.operationDate)||"")},a.leaveModel=function(a){this.hour=ko.observable(a.hour||""),this.leaveId=ko.observable(a.leaveId||""),this.leaveDesc=ko.observable(a.leaveDesc||"")},a.getLeaveInfo=function(){a.history([]),app.util.ajax("/leave/getLeaveInfoByApplyNo",{token:localStorage.token,applyNo:a.applyNo(),pageFlag:"APPLY_LEAVE"},function(b){if(console.log(b),a.getLeaveType(),0!=b.responseCode)return void app.toast.error(b.responseMsg);if(b.recentDate.orderStatus!=app["const"].WAIT_BACK_APPLY&&b.recentDate.orderStatus!=app["const"].FILE_REJECT&&b.recentDate.orderStatus!=app["const"].BACK_REJECT&&(app.toast.error("当前数据过期！"),history.go(-1)),a.currentStatus(b.recentDate),b.itemList.length>1)for(var c=0;c<b.itemList.length;c++)"BACK_APPLY"==b.itemList[c].orderType?a.itemList(b.itemList[c]):"LEAVE_APPLY"==b.itemList[c].orderType&&(a.leaveTotalHour(b.itemList[c].totalHour),a.leaveStartDate(b.itemList[c].startDate),a.leaveEndDate(b.itemList[c].endDate));else a.itemList(b.itemList[0]),a.leaveTotalHour(b.itemList[0].totalHour),a.leaveStartDate(b.itemList[0].startDate),a.leaveEndDate(b.itemList[0].endDate);a.currentOrderType(a.itemList().orderType),a.initPage(a.itemList()),$("#column-log").css("top",document.getElementById("column-vacate-state").offsetHeight+document.getElementById("column-vacate-id").offsetHeight+1)})},a.initPage=function(b){a.initDateTimePicker("#vacationUsedStart",new Date(a.leaveStartDate()-864e5),new Date(a.leaveEndDate()+864e5)),a.initDateTimePicker("#vacationUsedEnd",new Date(a.leaveStartDate()-864e5),new Date(a.leaveEndDate()+864e5)),a.startDate(app.util.formatDateTimeToHM(b.startDate)),a.endDate(app.util.formatDateTimeToHM(b.endDate)),a.totalHour(new a.hourModel(b.totalHour)),a.leaveReason(b.reason),a.fileList(b.fileList),localStorage.localPicList=JSON.stringify(b.fileList),a.leaveList([]),a.history([]);for(var c=0;c<b.leaveList.length;c++)a.leaveList.push(new a.leaveModel(b.leaveList[c]));for(var d=0;d<b.history.length;d++)a.history.push(new a.historyModel(b.history[d]));"FILE_REJECT"===a.currentStatus().orderStatus&&"BACK_APPLY"==a.currentOrderType()&&a.isEditDisabled(!0),("FILE_REJECT"===b.history[0].orderStatus||"BACK_REJECT"===b.history[0].orderStatus)&&(console.log(111),b[1]&&3===b[1].rejectCount&&a.isHideSubmit(!0))},a.getLeaveBalance=function(){a.leaveBalance([]),app.util.ajax("/leave/getBpLeftLeaveHour",{applyNo:a.applyNo(),token:localStorage.token},function(b){console.log(b),a.leaveBalance(b.itemList)})},a.getLeaveType=function(){app.util.ajax("/plan/getFieldConfByFieldType",{fieldType:"LEAVE"},function(b){a.leaveTypeList(b.itemList)})},a.goToUpload=function(){localStorage.localPicListPage="Y",location.href="#/uploadCertificate/res/"+a.applyNo()},a.saveLeaveApplyInfo=function(){for(var b=0,c=0;c<a.leaveList().length;c++)b+=a.leaveList()[c].hour();if(b!=a.totalHour().sumHour())return void app.toast.defalut("假期时长总和与总时长不匹配。");var d=(new Date(a.endDate()).getTime()-new Date(a.startDate()).getTime())/36e5,e=(a.leaveEndDate()-a.leaveStartDate())/36e5;if(0>d)return void app.toast.defalut("请假结束时间不能早与开始时间。");if(d-e>24)return void app.toast.defalut("请假时间超过销假范围。");if(0==a.totalHour().sumHour()&&0!=d)return void app.toast.defalut("请假开始时间应等于结束时间。");for(var f=[],g=["0004","0006","0008","0007"],h=0;h<a.leaveList().length;h++){if(g.indexOf(a.leaveList()[h].leaveId())>=0&&0==JSON.parse(localStorage.localPicList).length)return void app.toast.error("请上传证明文件！");f.push({hour:a.leaveList()[h].hour(),leaveId:a.leaveList()[h].leaveId(),leaveDesc:a.leaveList()[h].leaveDesc()})}a.isSubmit(!0);var i="LEAVE_APPLY"==a.currentOrderType()&&"FILE_REJECT"==a.currentStatus().orderStatus?"LEAVE_APPLY":"BACK_APPLY";app.util.ajax("/leave/saveLeaveApplyInfo",{token:localStorage.token,orderType:i,applyNo:a.applyNo(),leaveList:JSON.stringify(f),totalHour:a.totalHour().sumHour(),startDate:new Date(a.startDate()).getTime(),endDate:new Date(a.endDate()).getTime(),reason:a.leaveReason(),fileList:localStorage.localPicList},function(b){console.log(b),0==b.responseCode?(app.toast.success(b.responseMsg),history.go(-1)):app.popup.alert(b.responseMsg),a.isSubmit(!1)},function(){app.toast.error(result.responseMsg),a.isSubmit(!1)})},a.reset=function(){a.initPage(a.itemList())},a.saveEditLeave=function(){for(var b=0;b<a.leaveBalance().length;b++)if(a.activeId()==a.leaveBalance()[b].leaveId&&app.util.leaveDayTransform(a.activeDay(),a.activeHour())>a.leaveBalance()[b].hour)return void app.popup.prompt("您的"+a.activeType()+"余额为<span class='color-ff6c47'>"+a.leaveBalance()[b].hour+"小时</span>，请重新填写请假时长。","确认");if(!a.activeId())return void app.toast.defalut("请选择请假类型");var c=app.util.leaveDayTransform(a.activeDay(),a.activeHour());if("0001"===a.activeId()){if(c>120)return app.popup.alert("年假请假时长不能超过15天")}else if("0006"===a.activeId()||"0005"===a.activeId()){if(c>24)return app.popup.alert("丧假或婚假不能超过3天")}else if(c>2920)return app.popup.alert("事假、调休假、病假、生育假、其他假不能超过365天");a.activeLeave()?(a.activeLeave().leaveDesc(a.activeType()),a.activeLeave().leaveId(a.activeId()),a.activeLeave().hour(app.util.leaveDayTransform(a.activeDay(),a.activeHour()))):a.leaveList.push(new a.leaveModel({hour:c,leaveId:a.activeId(),leaveDesc:a.activeType()})),a.isShowEdit(!a.isShowEdit())},a.selectLeaveTap=function(b){a.activeType(b.fieldDesc),a.activeId(b.fieldCode)},a.editSwitch=function(b){if(!a.isEditDisabled()){a.currentLeaveType([]);for(var c=0;c<a.leaveList().length;c++)a.currentLeaveType.push(a.leaveList()[c].leaveId());a.isShowEdit(!a.isShowEdit()),b?(a.currentLeaveType.remove(b.leaveId()),a.activeLeave(b),a.activeType(b.leaveDesc()),a.activeId(b.leaveId()),a.activeHour(app.util.leaveHourTransform(b.hour()).hour),a.activeDay(app.util.leaveHourTransform(b.hour()).day)):(a.activeLeave(""),a.activeType(""),a.activeId(""),a.activeHour(0),a.activeDay(0))}},a.delLeave=function(b){a.isEditDisabled()||a.leaveList.remove(b)},a.hideEdit=function(){a.isShowEdit(!1),a.activeLeave(""),a.activeType(""),a.activeHour(0),a.activeDay(0)},a.initDateTimePicker=function(a,b,c){var d={preset:"datetime",theme:"android-holo-light",display:"bottom",mode:"scroller",dateFormat:"yyyy/mm/dd",timeFormat:"HH:ii",lang:"zh",rows:3,stepMinute:60,min:b?b:0,max:c?c:0,buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]};return $(a).mobiscroll(d)},a.LogSwitch=function(){a.isShowLog(!a.isShowLog())},a.isEditJudge=function(){return a.currentStatus()?void a.isEditDisabled("FILE_REJECT"===a.currentStatus().orderStatus&&"BACK_APPLY"==a.currentOrderType()?!0:!1):void a.isEditDisabled(!1)},a.init=function(b){a.isShowLog(!1),a.isEditJudge(),a.isHideSubmit(!1),"Y"===localStorage.localPicListPage?(localStorage.localPicListPage="N",a.fileList(JSON.parse(localStorage.localPicList))):(a.isShowEdit(!1),a.applyNo(b),a.getLeaveInfo(),a.getLeaveBalance()),app.navigator.setHeader("LEAVE_APPLY"==a.currentOrderType()&&"FILE_REJECT"==a.currentStatus().orderStatus?{title:"请假申请"}:{title:"销假申请"})}},vacateHistoryModel=function(){var a=this;a.title=ko.observable("历史记录"),a.noRecord=ko.observable(!1),a.notInit=ko.observable(!0),a.showInit=ko.observable(!0),a.startMonth=ko.observable(),a.endMonth=ko.observable(),a.itemList=ko.observableArray([]),a.totalItemList=ko.observableArray([]),a.totalLength=ko.observable(0),a.isGoToDetail=ko.observable(!1);var b=function(a){this.applyNo=ko.observable(a.applyNo),this.hourText=app.util.leaveHourShow(a.hour),this.startDate=ko.observable(a.startDate),this.endDate=ko.observable(a.endDate),this.leaveList=ko.observableArray(a.leaveList),this.orderStatus=ko.observable(app.util.getLeaveStatus(a.orderStatus).orderStatusShow)};a.clickApply=function(){location.href="#/management"},a.goDetails=function(b){a.isGoToDetail(!0),location.href="#/detailApply/"+b.applyNo()},a.filter=function(){a.notInit(!1)},a.goFilter=function(){if(!a.startMonth()||!a.endMonth())return void app.popup.alert("请选择月份！");if(a.startMonth()>a.endMonth())return void app.popup.alert("开始月份不能大于结束月份！");var b=new Date(a.startMonth()).getTime(),c=new Date(a.endMonth()).getTime();return c-b>292032e5?void app.popup.alert("筛选条件的跨度不能超过12个月！"):(a.loadList(b,c),void a.notInit(!0))},a.reset=function(){a.startMonth(""),a.endMonth("")},a.loadList=function(b,c){app.util.ajax("/leave/getTotalLeaveInfoByDate",{token:localStorage.token,pageFlag:"HISTORY_QRY",startDate:b,endDate:c},function(d){a.noRecord(0===d.itemList.length?!0:!1),a.totalLength(d.itemList.length),a.totalItemList(a.setItemList(d.itemList)),b&&c&&a.showInit(!1)})},a.setItemList=function(a){var c=[],d=[];a.forEach(function(a){-1==c.indexOf(app.util.formatYear(a.startDate))&&c.push(app.util.formatYear(a.startDate))}),console.log(c.length);for(var e=0;e<c.length;e++)d[e]={},d[e].year=c[e],d[e].itemList=[];return a.forEach(function(a){d.forEach(function(c){app.util.formatYear(a.startDate)==c.year&&c.itemList.push(new b(a))})}),console.log(d),d},a.initDateTimePicker=function(a){var b={preset:"date",theme:"android-holo-light",display:"bottom",mode:"scroller",dateOrder:"yymm",dateFormat:"yy-mm",lang:"zh",rows:3,stepMinute:60,buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]};return $(a).mobiscroll(b)},a.hideTimePicker=function(){a.notInit(!0)},a.init=function(){a.hideTimePicker(),a.isGoToDetail()?a.isGoToDetail(!1):(a.showInit(!0),a.reset(),a.loadList())}},vacateDetailsModel=function(){var a=this;a.applyNo=ko.observable(),a.leaveInfo=ko.observableArray([]),a.showInfo=ko.observable(!0),a.current=ko.observable({orderStatusShow:ko.observable(""),operationDate:ko.observable(""),rejectReason:ko.observable(""),status:ko.observable("")}),a.load=function(){a.leaveInfo([]),app.util.ajax("/leave/getLeaveInfoByApplyNo",{token:localStorage.token,applyNo:a.applyNo(),pageFlag:"APPLY_LEAVE"},function(b){if(0===b.responseCode){var c="LEAVE_APPLY",d=app.util.getLeaveStatus(b.recentDate.orderStatus);a.current().orderStatusShow(d.orderStatusShow),a.current().status(d.status),a.current().operationDate(b.recentDate.operationDate),1!=b.itemList.length&&(c="BACK_APPLY",app.navigator.setHeader({title:"销假申请"}));for(var e=0,f=0;f<b.itemList.length;f++)if(b.itemList[f].orderType===c){e=b.itemList[f].rejectCount;for(var g=0;g<b.itemList[f].history.length;g++){var h=app.util.getLeaveStatus(b.itemList[f].history[g].orderStatus);b.itemList[f].history[g].orderStatusShow=h.orderStatusShow}a.leaveInfo(new Array(b.itemList[f]))}(b.recentDate.orderStatus===app["const"].WAIT_BACK_APPLY||b.recentDate.orderStatus===app["const"].FILE_REJECT||b.recentDate.orderStatus===app["const"].BACK_REJECT)&&3>e&&(app.toast.error("当前数据过期！"),history.go(-1)),$("#vacate-log").css("top",document.getElementById("vacate-detail-state").offsetHeight+document.getElementById("vacate-detail-id").offsetHeight+1)}else app.toast.error(b.responseMsg)})},a.show=function(){a.showInfo(!a.showInfo())},a.goPage=function(b){0!==b.fileList.length&&(location.href="#/uploadCertificate/see/"+a.applyNo())},a.init=function(b){a.applyNo(b),a.showInfo(!0),a.load()}},detailApplyModel=function(){var a=this;a.applyNo=ko.observable(),a.vacateList=ko.observable(""),a.vacateUsedList=ko.observable(""),a.currentList=ko.observable(""),a.leaveType=ko.observable(""),a.leaveType.subscribe(function(b){"LEAVE_APPLY"===b?a.currentList(a.vacateList()):"BACK_APPLY"===b&&a.currentList(a.vacateUsedList())}),a.getLeaveInfo=function(){a.vacateList(""),a.vacateUsedList(""),app.util.ajax("/leave/getLeaveInfoByApplyNo",{token:localStorage.token,applyNo:a.applyNo(),pageFlag:"HISTORY_QRY"},function(b){if(0===b.responseCode)for(var c=0;c<b.itemList.length;c++)b.itemList[c].history.reverse(),"LEAVE_APPLY"===b.itemList[c].orderType?a.vacateList(b.itemList[c]||""):"BACK_APPLY"===b.itemList[c].orderType&&a.vacateUsedList(b.itemList[c]||"");else app.toast.error(b.responseMsg);a.leaveType("LEAVE_APPLY"),a.currentList(a.vacateList())})},a.goToFileView=function(){0!=a.currentList().fileList.length&&(localStorage.localPicList=JSON.stringify(a.currentList().fileList),location.href="#/uploadCertificate/see/"+a.applyNo())},a.init=function(b){a.applyNo(b),a.getLeaveInfo()}},uploadCertificateModel=function(){var a=this;a.applyNo=ko.observable(),a.fileList=ko.observableArray([]),a.isGlass=ko.observable(!1),a.selectedImg=ko.observable(),a.source=ko.observable(""),a.localPicFile=ko.observableArray([]),a.btnStatus=ko.observable(!0);var b=function(a){this.filePath=a.filePath,this.guid=a.guid};a.isGlass=ko.observable(!1),a.selectedImg=ko.observable(),a.fileData=function(){this.file=ko.observable(""),this.dataURL=ko.observable(""),this.base64String=ko.observable(""),this.dataURL.subscribe(function(){a.picList().length+a.fileList().length<5&&a.picList.push(new a.fileData)})},a.picList=ko.observableArray([new a.fileData]),a.fileListGlass=function(b){a.isGlass(!0),a.selectedImg(b.filePath)},a.deleteFileList=function(b){a.fileList.remove(b),a.picList().length+a.fileList().length<5&&a.picList()[a.picList().length-1].dataURL()&&a.picList.push(new a.fileData)},a.picListGlass=function(b){a.isGlass(!0),a.selectedImg(b.dataURL())},a.picListList=function(b){a.picList.remove(b),a.picList().length+a.fileList().length<5&&(0===a.picList().length||a.picList()[a.picList().length-1].dataURL())&&a.picList.push(new a.fileData)},a.hideGlass=function(){a.isGlass(!1)},a.load=function(){"0"!==a.applyNo()&&app.util.ajax("/leave/getLeaveInfoByApplyNo",{token:localStorage.token,applyNo:a.applyNo(),pageFlag:"APPLY_LEAVE"},function(c){0===c.responseCode?c.itemList[0].fileList.forEach(function(c){a.fileList.push(new b(c))}):app.toast.error(c.responseMsg)})},a.confirm=function(){if(app.popup.showAjaxLoading(),a.btnStatus()){var c=0;a.btnStatus(!1);var d=!0;if(!a.picList()[a.picList().length-1].dataURL()){1===a.picList().length&&(a.btnStatus(!0),d=!1);for(var e=0;e<a.picList().length;e++)if(a.picList()[e].file().size>5242880)return app.toast.error("每张图片不能大于5M",2e3),app.popup.hideAjaxLoading(),a.btnStatus(!0),void(d=!1);a.picList.remove(a.picList()[a.picList().length-1])}for(var f=0;f<a.fileList().length;f++)a.localPicFile.push(a.fileList()[f]);if(d)for(var e=0;e<a.picList().length;e++)a.picList()[e].dataURL()&&lrz(a.picList()[e].file(),{width:900},function(d){var e=d.base64.split("base64,")[1];app.util.ajax("/base/commonUploadFile",{token:localStorage.token,sourceFlag:"leaveFile",fileStr:e},function(d){0===d.responseCode?(a.localPicFile.push(new b(d.fileList[0])),c++,c==a.picList().length&&(localStorage.localPicList=JSON.stringify(a.localPicFile()),app.toast.success("成功上传"+c+"张证明!"),history.go(-1))):app.toast.error(d.responseMsg),a.btnStatus(!0)})});else localStorage.localPicList=JSON.stringify(a.localPicFile()),history.go(-1)}},a.show=function(){},a.init=function(b,c){a.isGlass(!1),a.btnStatus(!0),a.fileList([]),a.localPicFile([]),a.picList([new a.fileData]),a.source(c),a.applyNo(b),"Y"===localStorage.localPicListPage&&localStorage.localPicList&&"see"!=a.source()?a.fileList(JSON.parse(localStorage.getItem("localPicList"))):a.load()}},chartListModel=function(){var a=this;a.token=ko.observable(),a.chartList=ko.observable(),a.goPage=function(a){localStorage.chartDetail=-1==a.menuUrl.indexOf("?")?a.menuUrl+"?token="+localStorage.token:a.menuUrl+"&token="+localStorage.token,location.href="#/chartDetail/"+a.menuName},a.getSubMenuList=function(b){a.chartList(""),app.popup.showLoading(),app.util.chartAjax("user/getSubMenuListSFA",{token:localStorage.token,menuParentId:b},function(b){app.popup.hideLoading(),"100"===b.respCode?a.chartList(b.respData):app.toast.error("-1"===b.respCode?b.respDesc:b.respDesc)})},a.init=function(b){"72732159"==b?app.navigator.setHeader({title:"销售报表"}):"50449907"==b&&app.navigator.setHeader({title:"业绩与佣金"}),localStorage.token=app.util.getQueryString("token")||localStorage.token,a.getSubMenuList(b),$("#chartFrameLink")&&$("#chartFrameLink").remove()}},chartDetailModel=function(){var a=this;a.token=ko.observable(),a.iframeSrc=ko.observable(""),a.chartIframeHref=ko.observable(""),a.init=function(){$("<iframe class='w h border-none' style='overflow-y: scroll;' id='chartFrameLink' name='frame-link' scrolling='yes'></iframe>").appendTo("#chartFrameBox"),$("#chartFrameLink").attr("src",localStorage.chartDetail),$("#chartFrameBox").css("width",$(window).width()),$("#chartFrameBox").css("height",$(window).height()-44)}},targetListModel=function(){var a=this;a.itemList=ko.observable(),a.getTargetList=function(){app.util.ajax("/serv/getSfaPlanServInfoByPlanDate",{token:localStorage.token},function(b){return console.log(b),0!=b.responseCode?void app.toast.error(b.responseMsg):void a.itemList(b.itemList)})},a.addTarget=function(){location.href="#/targetEdit/0"},a.editTarget=function(a){location.href="#/targetEdit/"+a.planId},a.goToTargetProgress=function(){location.href="#/targetProgress"},a.init=function(){a.getTargetList()}},targetEditModel=function(){var a=this,b=function(a){var b=this;b.itemNo=ko.observable(a.itemNo||1),b.startTime=ko.observable(a.startTime||0),b.endTime=ko.observable(a.endTime||0),b.serviceType=ko.observable(a.serviceType||""),b.serviceDesc=ko.observable(a.serviceDesc||""),b.serviceNum=ko.observable(a.serviceNum),b.serviceNum.subscribe(function(){})};a.storeId=ko.observable(""),a.planDate=ko.observable(0),a.currentDate=ko.observable((new Date).getTime()),a.planId=ko.observable(""),a.bpPernr=ko.observable(""),a.storeName=ko.observable(""),a.servTypeList=ko.observableArray([]),a.stores=ko.observableArray([]),a.selectedStore=ko.observable(),a.isSubmiting=ko.observable(!1),a.planDate.subscribe(function(b){b&&a.getMyStore()}),a.planDateView=ko.pureComputed({read:function(){return a.planDate()?app.util.formatPattern(a.planDate(),"yyyy/MM/dd"):""},write:function(b){var c=new Date(b);a.planDate(c.getTime())}}),a.getSfaPlanServInfo=function(){app.util.ajax("/serv/getSfaPlanServInfo",{token:localStorage.token,planId:a.planId()},function(c){if(0===c.responseCode){a.currentDate(c.currDate);var d=c.itemList;a.storeId(d.storeId),a.planDate(d.planDate),a.planId(d.planId),a.bpPernr(d.bpPernr),a.storeName(d.storeName);var e=d.servTypeList;

if(e&&e.length>0){for(var f=new Array(16).join(".").split(".").map(function(){return[]}),g=0;g<e.length;g++)for(var h=0;16>h;h++)e[g].itemNo===h+1&&f[h].push(new b(e[g]));a.servTypeList(f)}}a.getMyStore()})},a.clickSelectStore=function(){0===a.planDate()},a.saveSfaPlanServInfo=function(){if(!a.isSubmiting()){var b=[];if(0===a.planDate())return app.toast.error("请选择日期");if(!a.selectedStore())return app.toast.error("请选择门店");for(var c="",d=0;d<a.servTypeList().length;d++)for(var e=a.servTypeList()[d],f=0;f<e.length;f++){var g=e[f];if(isNaN(g.serviceNum()))return app.toast.error("填写的数字必须是大于或等于0的整数");if(g.serviceNum()<0)return app.toast.error("填写的数字必须是大于或等于0的整数");if(g.serviceNum()%1!==0)return app.toast.error("填写的数字必须是大于或等于0的整数");var h=g.serviceNum()?Number(g.serviceNum()):"";if(h&&!app.regex.positive(h))return app.toast.error("填写的数字必须是大于或等于0的整数");b.push({itemNo:g.itemNo(),startTime:g.startTime(),endTime:g.endTime(),serviceType:g.serviceType(),serviceDesc:g.serviceDesc(),serviceNum:h}),c+=h}if(""==c)return app.popup.alert("至少填写一时段的“服务人数、沟通人数、至尊套数、加微信数”计划！",2e3);a.isSubmiting(!0),app.util.ajax("/serv/saveSfaPlanServInfo",{token:localStorage.token,planDate:a.planDate(),storeId:a.selectedStore().storeId,planId:a.planId(),servTypeList:b},function(b){a.isSubmiting(!1),0===b.responseCode?(app.toast.success("保存成功！"),history.go(-1)):app.toast.error(b.responseMsg)})}},a.cancelSfaPlanServInfo=function(){a.planId()?app.util.ajax("/serv/deleteSfaPlanServByPlanId",{token:localStorage.token,planId:a.planId()},function(a){0===a.responseCode?(history.go(-1),app.toast.success("删除成功！")):app.toast.error(a.responseMsg)}):history.go(-1)},a.getMyStore=function(){if(a.planDate()){var b=a.planId()?"serviceTypeEdit":"serviceTypeAdd";app.util.ajax("/myStore/getStoreListByUserId",{token:localStorage.token,planDate:a.planDate(),pageFlag:b},function(b){if(0===b.responseCode){if(b.itemList&&0!==b.itemList.length||app.toast.error("当前选择日期无门店"),a.stores(b.itemList),a.storeId()&&a.stores()&&a.stores().length>0)for(var c=0;c<a.stores().length;c++){var d=a.stores()[c];d.storeId===a.storeId()&&a.selectedStore(d)}}else app.toast.error(b.responseMsg)})}},a.initDateTimePicker=function(){$("#targetEditDate").mobiscroll("destroy");var b=new Date,c=b.getFullYear(),d=$.extend({},a.defaultDateOpt(),{min:b,startYear:c,endYear:c+1});$("#targetEditDate").mobiscroll(d)},a.defaultDateOpt=function(){return{preset:"date",theme:"android-holo-light",display:"bottom",mode:"scroller",dateFormat:"yyyy/mm/dd",lang:"zh",rows:3,buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]}},a.reset=function(){a.storeId(""),a.planDate(0),a.currentDate((new Date).getTime()),a.planId(""),a.bpPernr(""),a.storeName(""),a.servTypeList([]),a.selectedStore(null),a.stores([]),a.isSubmiting(!1)},a.init=function(b){a.reset(),a.planId(b),a.initDateTimePicker(),a.getSfaPlanServInfo()}},targetProgressModel=function(){var a=this;a.keyword=ko.observable(),a.itemList=ko.observable(),a.isSubmit=ko.observable(!1),a.getInfo=function(){a.isSubmit()||(a.isSubmit(!0),app.util.ajax("/serv/getScheduleInfoByIdOrName",{token:localStorage.token,IdOrNormalName:a.keyword()||""},function(b){return 0!=b.responseCode?void app.toast.error(b.responseMsg):(0==b.itemList.length&&app.toast.error("暂无门店信息。"),a.itemList(b.itemList),void a.isSubmit(!1))},function(){app.toast.error(app["const"].AJAX_ERROR_MSG,2e3),a.isSubmit(!1)}))},a.clear=function(){a.keyword("")},a.goToTargetList=function(){location.href="#/targetList"},a.periodAdd=function(a){localStorage.periodStore=JSON.stringify({storeId:a.storeId,storeName:a.storeName,planId:a.planId}),location.href="#/periodAdd"},a.periodList=function(a){location.href="#/periodList/"+a.storeId},a.init=function(){a.keyword(""),a.isSubmit=ko.observable(!1),a.getInfo()}},periodAddModel=function(){var a=this;a.planId=ko.observable(),a.dateTime=ko.observable(),a.itemList=ko.observable(),a.selectedService=ko.observable(),a.selectedService.subscribe(function(b){a.getInfo(a.planId(),b)}),a.periodStore=ko.observable(),a.title=ko.observable(),a.typeList=ko.observableArray(),a.isFresh=ko.observable(!1),a.isSubmit=ko.observable(!1),a.isWrite=ko.observable(!1),a.typeModel=function(a){this.serviceDesc=ko.observable(a.serviceDesc),this.serviceType=ko.observable(a.serviceType),this.serviceNum=ko.observable(a.serviceNum),this.serviceNum.subscribe(function(a){return""==this.serviceNum()||app.regex.positiveWithoutZero(a)?a.length>5?(app.toast.error("不能超过5位数！"),void this.serviceNum("")):void 0:void app.toast.error("请输入0或正整数！")}.bind(this)),this.serviceType=ko.observable(a.serviceType)},a.getInfo=function(b,c){a.isFresh()||(a.isFresh(!0),app.util.ajax("/serv/getScheduleByTime",{itemNo:c||"",planId:b,token:localStorage.token},function(b){return a.isFresh(!1),0!=b.responseCode?(app.toast.error(b.responseMsg),void(3808==b.responseCode&&history.go(-1))):(a.itemList(b.itemList),a.dateTime(b.currDate),a.typeList([]),void b.itemList.typeList.forEach(function(b){a.typeList.push(new a.typeModel(b))}))},function(){app.toast.error(app["const"].AJAX_ERROR_MSG,2e3),a.isFresh(!1)}))},a.save=function(){if(a.isWrite(!1),!a.isSubmit()){if(a.isSubmit(!0),!a.selectedService())return app.toast.error("请选择时间段"),void a.isSubmit(!1);for(var b=[],c=0;c<a.typeList().length;c++){var d=a.typeList()[c];if(d.serviceNum()){if(!app.regex.positiveWithoutZero(d.serviceNum()))return app.toast.error("请输入0或正整数！"),void a.isSubmit(!1);if(d.serviceNum().length>5)return void app.toast.error("请输入5位数字");a.isWrite(!0),b.push({serviceNum:d.serviceNum(),serviceType:d.serviceType()})}else b.push({serviceNum:d.serviceNum(),serviceType:d.serviceType()})}return a.isWrite()?void app.util.ajax("/serv/saveScheduleInfo",{itemNo:a.selectedService(),planId:a.itemList().planId,serviceList:b,storeId:a.periodStore().storeId,token:localStorage.token},function(b){return a.isSubmit(!1),0!=b.responseCode?void app.toast.error(b.responseMsg):(app.toast.success("保存成功！"),void(location.href="#/targetProgress"))},function(){app.toast.error(app["const"].AJAX_ERROR_MSG,2e3),a.isSubmit(!1)}):(app.toast.error("请填写提报数量"),void a.isSubmit(!1))}},a.selectServiceTime=function(b){a.selectedService(b.itemNo)},a.fresh=function(){a.selectedService(""),a.getInfo(a.planId())},a.inputReSet=function(a){var b=$("#periodAdd-"+a.serviceType()).val();$("#periodAdd-"+a.serviceType()).val(""),$("#periodAdd-"+a.serviceType()).val(b)},a.cancel=function(){a.selectedService(""),history.go(-1)},a.init=function(){a.selectedService(""),a.title("时控提报"),a.periodStore(JSON.parse(localStorage.periodStore)),a.planId(a.periodStore().planId),a.isSubmit=ko.observable(!1),a.getInfo(a.periodStore().planId)}},periodListModel=function(){var a=this;a.storeId=ko.observable(),a.timeList=ko.observableArray(),a.storeNumVo=ko.observable(),a.selectedDate=ko.observable(),a.selectedDate.subscribe(function(){a.getListById()}),a.timeNumList=ko.observableArray(),a.timeNumModel=function(a){this.data=a,this.isShowList=ko.observable(!1)},a.setTimeAxis=function(){a.timeList([]);var b=(new Date).getTime(),c=b;a.selectedDate(b);for(var d=0;7>d;d++)a.timeList.push(c),c-=864e5;a.timeList.reverse()},a.getListById=function(){app.util.ajax("/serv/getScheduleInfoByDateAndStoreId",{planDate:a.selectedDate(),storeId:a.storeId(),token:localStorage.token},function(b){return 0!=b.responseCode?void app.toast.error(b.responseMsg):(0==b.storeNumVo.timeNumList.length&&app.toast.error("该门店当日无时控数据哦！"),a.storeNumVo(b.storeNumVo),a.timeNumList([]),void(b.storeNumVo.timeNumList.length>0&&b.storeNumVo.timeNumList.forEach(function(b){a.timeNumList.push(new a.timeNumModel(b))})))})},a.setSelect=function(b){a.selectedDate(b)},a.changeShow=function(a){a.isShowList(!a.isShowList())},a.init=function(b){a.storeId(b),a.setTimeAxis()}},displayListModel=function(){var a=this;a.title=ko.observable("门店陈列执行"),a.storeName=ko.observable(""),a.displayList=ko.observableArray(),a.typeList=ko.observable(),a.seachVis=ko.observable(!0),a.seachDateVis=ko.observable(!0),a.dataInput=ko.observable(),a.checkPlan=ko.observable(),a.currDate=ko.observable(),a.store=function(b){var c=this;c.displayLocation=ko.observable(b.displayLocation||""),c.decorationDate=ko.observable(b.decorationDate||0),c.executeEndTime=ko.observable(b.executeEndTime||""),c.executeStartTime=ko.observable(b.executeStartTime||""),c.planId=ko.observable(b.planId||""),c.signRenovationB=ko.observable(b.signRenovationB||""),c.protocolEndTime=ko.observable(b.protocolEndTime||""),c.protocolStartTime=ko.observable(b.protocolStartTime||""),c.status=ko.observable(app.util.getStoreDisplayStatus(b.status)||{}),c.storeName=ko.observable(b.storeName||""),c.tpmItem=ko.observable(b.tpmItem||""),c.tpmItemDesc=ko.observable(b.tpmItemDesc||""),c.couldHandle=ko.computed(function(){return b.protocolStartTime-a.currDate()<2592e5&&b.protocolEndTime>a.currDate()||c.status().status!=app["const"].E0055})},a.seachDisplay=function(){a.seachVis(!a.seachVis())},a.seachDateDisplay=function(b,c){return b?(a.checkPlan(c),void a.seachDateVis(!a.seachDateVis())):void app.popup.alert("未执行的门店陈列不可录入完成装修日期哦！")},a.seachDate=function(){var b=$("#input-decorate").val();return""===b?void app.popup.alert("要选择完成日期哦！"):new Date(b).getTime()<a.checkPlan().executeStartTime()?void app.popup.alert("完成装修日期不可小于执行开始日期！"):(a.dataInput(new Date(b).getTime()),void app.util.ajax("/storeDisplay/saveDisplayExcuteInfo",{decorationDate:a.dataInput(),pageFlag:"SAVETIME",planId:a.checkPlan().planId(),token:localStorage.token},function(b){0===b.responseCode?(a.seachDateVis(!a.seachDateVis()),a.getStoreDisplay()):app.toast.error(b.responseMsg)}))},a.getStoreDisplay=function(){return app.util.isEmoji(a.storeName())?void app.toast.error("填写内容不可以输入表情符！"):(a.displayList([]),void app.util.ajax("/storeDisplay/getStoreDisplayInfoByUser",{storeName:a.storeName(),token:localStorage.token},function(b){if(a.currDate(b.currDate),0===b.responseCode)for(var c=0;c<b.storeLIst.length;c++)a.displayList.push(new a.store(b.storeLIst[c]));else app.toast.error(b.responseMsg)}))},a.getTypeByCode=function(){app.util.ajax("/storeDisplay/getTypeByCode",{typeCode:"Z12",token:localStorage.token},function(b){if(0===b.responseCode){var c=new Object;b.typeList.forEach(function(a){c[a.typeCode]=a.typeName}),a.typeList(c)}else app.toast.error(b.responseMsg)})},a.getTypeText=function(b){return a.typeList()[b]},a.initDateTimePicker=function(a){var b={preset:"date",theme:"android-holo-light",display:"bottom",mode:"scroller",dateOrder:"yymmdd",dateFormat:"yy-mm-dd",lang:"zh",rows:3,stepMinute:60,buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]};return $(a).mobiscroll(b)},a.intoForce=function(b){localStorage.displayListScrollTop=$("#displayListPage .contain-search").scrollTop(),b.status().status===app["const"].E0055?location.href="#/displayHandle/"+b.planId():b.status().status===app["const"].E0060?location.href=a.dataInput()?"#/displayHandle/"+b.planId()+"/"+new Date(a.dataInput()).getTime():"#/displayHandle/"+b.planId():b.status().status===app["const"].E0065&&(location.href="#/displaySummary/"+b.planId())},a.gotoDisplayDetail=function(a){localStorage.displayListScrollTop=$("#displayListPage .contain-search").scrollTop(),location.href="#/displayDetail/"+a.planId()},a.reset=function(){a.storeName(""),a.displayList([]),a.seachVis(!0),a.seachDateVis(!0),a.dataInput("")},a.init=function(){localStorage.removeItem("Z12"),a.reset(),app.util.getSfaTypeByCode("Z12"),a.getStoreDisplay(),a.getTypeByCode(),a.initDateTimePicker("#input-decorate"),$(".contain-search").height($("#displayListPage").height()-44),localStorage.displayListScrollTop&&($("#displayListPage .contain-search").animate({scrollTop:localStorage.displayListScrollTop},1e3),localStorage.removeItem("displayListScrollTop"))}},storeAgreementModel=function(){var a=this;a.planId=ko.observable(),a.prdList=ko.observableArray([]),a.protocolInfo=function(a){var b=this;b.area=ko.observable(a.area||0),b.displayLocation=ko.observable(a.displayLocation||""),b.displayType=ko.observable(a.displayType||""),b.displayTypeText=ko.observable(""),app.util.getSfaTypeByCode("Z12",a.displayType,b.displayTypeText),b.planId=ko.observable(a.planId||""),b.protocolEndTime=a.protocolEndTime||"",b.protocolStartTime=a.protocolStartTime||"",b.signRenovationB=ko.observable(a.signRenovationB||""),b.signRenovationBText=ko.observable(b.signRenovationB()?"是":"否"),b.storeName=ko.observable(a.storeName||"")},a.protocol=ko.observable(new a.protocolInfo({})),a.getProtocolDetailsByPlanId=function(){app.util.ajax("/storeDisplay/getProtocolDetailsByPlanId",{planId:a.planId(),token:localStorage.token},function(b){0===b.responseCode?(a.protocol(new a.protocolInfo(b.protocolVo)),a.prdList(b.protocolVo.prdList),console.log(a.protocol().area())):app.toast.error(b.responseMsg)})},a.init=function(b){a.planId(b),a.protocol({}),a.prdList([]),a.getProtocolDetailsByPlanId()}},displayHandleModel=function(){var a=this;a.photo=function(a){var b=this;b.filePath=ko.observable(a.filePath||""),b.guid=ko.observable(a.guid||""),b.file=ko.observable(),b.dataURL=ko.observable(),b.base64String=ko.observable()},a.fileData=function(){var b=this;b.filePath=ko.observable(),b.guid=ko.observable(),b.file=ko.observable(),b.dataURL=ko.observable(),b.base64String=ko.observable(),b.dataURL.subscribe(function(){a.storeDiplay().photoList().length<3&&a.storeDiplay().photoList.push(new a.fileData),a.submitPhoto(b)})},a.displayInfo=function(a){var b=this;b.area=ko.observable(a.area||0),b.volume=ko.observable(a.volume||0),b.decorationDate=ko.observable(a.decorationDate||""),b.displayLocation=ko.observable(a.displayLocation||""),b.displayType=ko.observable(a.displayType||""),b.executeEndTime=ko.observable(a.executeEndTime||""),b.executeEndTimeText=ko.observable(app.util.formatDate(a.executeEndTime)||""),b.executeStartTime=ko.observable(a.executeStartTime||""),b.executeStartTimeText=ko.observable(app.util.formatDate(a.executeStartTime)||""),b.notExecuteReason=ko.observable(a.notExecuteReason||""),b.photoList=ko.observableArray([]),b.planId=ko.observable(a.planId||""),b.prdList=ko.observableArray(a.prdList||""),b.remark=ko.observable(a.remark||""),b.status=ko.observable(app.util.getStoreDisplayStatus(a.status)||{}),b.storeName=ko.observable(a.storeName||""),b.summary=ko.observable(a.summary||""),b.executeStartTimeText.subscribe(function(){b.executeStartTime(new Date(b.executeStartTimeText()).getTime())}),b.executeEndTimeText.subscribe(function(){b.executeEndTime(new Date(b.executeEndTimeText()).getTime())})},a.typeCode=function(a){var b=this;b.typeCode=ko.observable(a.typeCode||""),b.typeName=ko.observable(a.typeName||""),b.isCheck=ko.observable(!1)},a.planId=ko.observable(),a.storeDiplay=ko.observable(new a.displayInfo({})),a.typeCodeList=ko.observableArray(),a.selectTypeCode=ko.observable(new a.typeCode({})),a.isHanle=ko.observable(!1),a.isSubmit=ko.observable(!1),a.decorationDate=ko.observable(),a.notExecuReasonList=ko.observableArray(),a.getStoreDisplayDetailsByPlanId=function(){app.util.ajax("/storeDisplay/getStoreDisplayDetailsByPlanId",{planId:a.planId(),token:localStorage.token},function(b){if(0===b.responseCode){a.storeDiplay(new a.displayInfo(b.storeDiplayVo)),a.getTypeByCode(b.storeDiplayVo.subjectId,b.storeDiplayVo.displayType);for(var c=0;c<b.storeDiplayVo.photoList.length;c++)a.storeDiplay().photoList.push(new a.photo(b.storeDiplayVo.photoList[c]));a.storeDiplay().photoList().length<3&&a.storeDiplay().photoList.push(new a.fileData),a.storeDiplay().status().status!=app["const"].E0060?a.initDateTimePicker("#beginTime"):(a.initDateTimePicker("#endTime"),a.storeDiplay().executeEndTime((new Date).getTime()))}else app.toast.error(b.responseMsg);$(".container-handle").height($(window).height()-44-$("#displayHandlePage .column-btn").height())})},a.getTypeByCode=function(b,c){app.util.ajax("/storeDisplay/getTypeByCode",{typeCode:b,token:localStorage.token},function(b){if(0===b.responseCode)for(var d=0;d<b.typeList.length;d++)a.typeCodeList.push(new a.typeCode(b.typeList[d])),b.typeList[d].typeCode===c&&a.selectTypeCode(a.typeCodeList()[d]);else app.toast.error(b.responseMsg)})},a.getTypeByNotExecuReason=function(){app.util.ajax("/storeDisplay/getTypeByCode",{typeCode:"R01",token:localStorage.token},function(b){if(0===b.responseCode)for(var c=0;c<b.typeList.length;c++)a.notExecuReasonList.push(new a.typeCode(b.typeList[c]));else app.toast.error(b.responseMsg)})},a.reset=function(){},a.gotoPage=function(a){localStorage.STATUS_AGREEMENT="Y",location.href="#/storeAgreement/"+a.planId()},a.changeHanle=function(){a.isHanle(!a.isHanle())},a.initDateTimePicker=function(a){var b=(new Date).getTime(),c={preset:"date",theme:"android-holo-light",display:"bottom",mode:"scroller",dateOrder:"yymmdd",dateFormat:"yy/mm/dd",min:new Date(b-1728e5),max:new Date(b+1728e5),lang:"zh",rows:3,stepMinute:60,buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]};return $(a).mobiscroll(c)},a.removePrd=function(b){app.popup.confirm("确定删除？","是","否",function(){a.storeDiplay().prdList.remove(b)})},a.removePic=function(b){app.popup.confirm("确定删除？","是","否",function(){a.storeDiplay().photoList.remove(b);var c=a.storeDiplay().photoList()[a.storeDiplay().photoList().length-1].filePath();(a.storeDiplay().photoList().length<3&&c||2==a.storeDiplay().photoList().length&&c)&&a.storeDiplay().photoList.push(new a.fileData)})},a.selectProduct=function(){localStorage.prdListCustomerPrd=JSON.stringify(a.storeDiplay().prdList()),localStorage.selectProduct="Y",location.href="#/displayProduct"},a.selectNotExecuReason=function(a){a.isCheck(!a.isCheck())},a.submitPhoto=function(b){if(b.file().size>5242880){a.storeDiplay().photoList.remove(b);var c=a.storeDiplay().photoList()[a.storeDiplay().photoList().length-1].dataURL();return(a.storeDiplay().photoList().length<3&&c||2==a.storeDiplay().photoList().length&&c)&&a.storeDiplay().photoList.push(new a.fileData),app.toast.error("每张图片不能大于5M",2e3),void app.popup.hideAjaxLoading()}lrz(b.file(),{width:900},function(c){var d=c.base64.split("base64,")[1];a.isSubmit(!0),app.util.ajax("/base/commonUploadFile",{token:localStorage.token,applyNo:a.storeDiplay().planId(),fileStr:d,sourceFlag:"storeDisplay"},function(a){0===a.responseCode?b.filePath(a.fileList[0].filePath):app.toast.errorCode(a)},function(){app.toast.error(result.responseMsg,2e3),a.isSubmit(!1)})})},a.submit=function(){var b={};if(b.token=localStorage.token,b.remark=a.storeDiplay().remark(),app.util.isEmoji(a.storeDiplay().remark())||app.util.isEmoji(a.storeDiplay().displayLocation()))return void app.toast.error("填写内容不可以输入表情符！");if(a.isHanle()){b.pageFlag="CANNTEXECU",b.isExecute=!1,b.planId=a.planId();for(var c="",d=0;d<a.notExecuReasonList().length;d++)a.notExecuReasonList()[d].isCheck()&&(c+=a.notExecuReasonList()[d].typeCode()+",");if(0===c.length)return void app.popup.alert("请选择不执行的原因！");if(!a.storeDiplay().remark())return void app.popup.alert("请填写说明！");b.notExecuReason=c.substr(0,c.length-1)}else{if(a.storeDiplay().status().status==app["const"].E0060)b.pageFlag="ENDEXECU",b.executeEndTime=new Date(a.storeDiplay().executeEndTimeText()).getTime(),b.decorationDate=a.decorationDate();else{if(b.pageFlag="STARTEXECU",a.storeDiplay().volume().length>9)return void app.popup.alert("数量不可大于8位，请重新填写！");if(isNaN(a.storeDiplay().volume())||0===a.storeDiplay().area())return void app.popup.alert("请填写正确的数量信息！");b.volume=a.storeDiplay().volume()}if(isNaN(a.storeDiplay().area())||0===a.storeDiplay().area())return void app.popup.alert("请填写正确的面积信息！");if(a.storeDiplay().displayLocation().length>16)return void app.popup.alert("陈列位置的字数不可超15字哦！");if(0==a.storeDiplay().prdList().length)return void app.popup.alert("请添加陈列产品！");if(1==a.storeDiplay().photoList().length)return void app.popup.alert("请上传陈列照片!");b.area=parseFloat(a.storeDiplay().area()).toFixed(1),b.displayLocation=a.storeDiplay().displayLocation(),b.displayType=a.selectTypeCode().typeCode(),b.executeStartTime=a.storeDiplay().executeStartTime(),b.isExecute=a.isHanle(),b.photoList=new Array;var e=a.storeDiplay().photoList().length;a.storeDiplay().photoList()[e-1].dataURL()||(e-=1);for(var d=0;e>d;d++){var f={};f.filePath=a.storeDiplay().photoList()[d].filePath(),f.guid=a.storeDiplay().photoList()[d].guid()?a.storeDiplay().photoList()[d].guid():d,b.photoList.push(f)}b.planId=a.planId(),b.prdList=[];for(var d=0;d<a.storeDiplay().prdList().length;d++){var g={};g.prdId=a.storeDiplay().prdList()[d].prdId,g.prdName=a.storeDiplay().prdList()[d].prdName,b.prdList.push(g)}}a.isSubmit(!0),app.util.ajax("/storeDisplay/saveDisplayExcuteInfo",b,function(b){0===b.responseCode?history.go(-1):app.toast.error(b.responseMsg),a.isSubmit(!1)})},a.numReSet=function(){var a=$("#displayHandlePage #numInput").val();$("#displayHandlePage #numInput").val(""),$("#displayHandlePage #numInput").val(a)},a.areaReSet=function(){var a=$("#displayHandlePage #areaInput").val();$("#displayHandlePage #areaInput").val(""),$("#displayHandlePage #areaInput").val(a)},a.displayReSet=function(){var a=$("#displayHandlePage #displayInput").val();$("#displayHandlePage #displayInput").val(""),$("#displayHandlePage #displayInput").val(a)},a.init=function(b,c){"Y"===localStorage.STATUS_SELECT_PRODUCT?(localStorage.STATUS_SELECT_PRODUCT="N",localStorage.LOCAL_SELECTED_PRODUCT&&(a.storeDiplay().prdList.push(JSON.parse(localStorage.LOCAL_SELECTED_PRODUCT)),localStorage.LOCAL_SELECTED_PRODUCT="")):"Y"===localStorage.STATUS_AGREEMENT?localStorage.STATUS_AGREEMENT="N":(a.planId(b),a.decorationDate(c),a.typeCodeList([]),a.notExecuReasonList([]),a.selectTypeCode(""),a.isHanle(!1),a.isSubmit(!1),a.storeDiplay(new a.displayInfo({})),a.getStoreDisplayDetailsByPlanId(),a.getTypeByNotExecuReason())}},displayDetailModel=function(){var a=this;a.planId=ko.observable(),a.isShowProduct=ko.observable(),a.isDisplay=ko.observable(!0),a.isUnHandle=ko.observable(),a.itemList=ko.observable({}),a.typeName=ko.observable(),a.typeList=ko.observable(),a.productList=ko.observableArray([]),a.picList=ko.observableArray([]),a.isShowGlass=ko.observable(!1),a.glassPic=ko.observable(),a.goToAgreement=function(){location.href="#/storeAgreement/"+a.planId()},a.productTab=function(){a.isShowProduct(!a.isShowProduct())},a.setGlass=function(b){a.isShowGlass(!0),a.glassPic(b.filePath)},a.showGlass=function(){a.isShowGlass(!a.isShowGlass())},a.getInfo=function(){app.util.ajax("/storeDisplay/getStoreDisplayDetailsByPlanId",{planId:a.planId(),token:localStorage.token},function(b){0==b.responseCode?(a.isDisplay(b.storeDiplayVo.status==app["const"].E0070?!1:!0),a.isUnHandle(b.storeDiplayVo.status==app["const"].E0055?!0:!1),a.itemList(b.storeDiplayVo),app.util.getSfaTypeByCode("Z12",a.itemList().displayType,a.typeName),a.productList(b.storeDiplayVo.prdList),a.picList(b.storeDiplayVo.photoList)):app.toast.error(b.responseMsg)})},a.init=function(b){a.planId(b),a.itemList(""),a.productList([]),a.picList([]),a.getInfo()}},displaySummaryModel=function(){var a=this;a.planId=ko.observable(),a.starSun=ko.observable(0),a.summary=ko.observable(""),a.setStarList=[1,2,3,4,5],a.saveSummary=function(){return 0==a.starSun()?void app.toast.error("请进行自我评价。"):a.summary()?app.util.isEmoji(a.summary())?void app.toast.error("填写内容不可以输入表情符！"):void app.util.ajax("/storeDisplay/saveDisplayExcuteInfo",{pageFlag:"SUMMARY",token:localStorage.token,planId:a.planId(),summary:a.summary(),evaluation:a.starSun()},function(a){return 0!=a.responseCode?void app.toast.error(a.responseMsg):void history.go(-1)}):void app.toast.error("请填写经验总结。")},a.setStar=function(b){a.starSun(b)},a.init=function(b){a.starSun(0),a.summary(""),a.planId(b)}},displayProductModel=function(){var a=this;a.keyword=ko.observable(""),a.isSubmit=ko.observable(!1),a.hasPostSubmit=ko.observable(!1),a.isNoProduct=ko.observable(!1),a.noProductText=ko.observable(""),a.productSearchList=ko.observableArray([]),a.productHistoryList=ko.observableArray([]),a.productRegularList=ko.observableArray([]),a.storeId=ko.observable(""),a.pageFlag=ko.observable(""),a.planDate=ko.observable(null),a.clearSearch=function(){a.keyword("")},a.clearSearchHistory=function(){localStorage.removeItem(app["const"].LOCAL_SEARCH_PRODUCT),a.productHistoryList([])},a.loadSearchList=function(){a.productSearchList([]),a.isNoProduct(!1),a.isSubmit(!0),a.hasPostSubmit(!0);var b={prdIdOrName:a.keyword(),storeId:a.storeId(),pageFlag:a.pageFlag()};a.planDate()&&(b.planDate=parseInt(a.planDate())),app.util.ajax("/plan/getPrdInfoByIdOrName",b,function(b){a.isSubmit(!1),0===b.responseCode&&(b.itemList.forEach(function(b){localStorage.prdListCustomerPrd?-1==localStorage.prdListCustomerPrd.indexOf(b.customerPrd)&&a.productSearchList.push(b):a.productSearchList.push(b)}),0==a.productSearchList().length&&1==b.itemList.length&&(a.isNoProduct(!0),a.noProductText("主页面已添加该产品")),0===b.itemList.length&&(a.isNoProduct(!0),a.noProductText("没有符合条件的产品")))})},a.loadHistoryList=function(){var b=localStorage.getItem(app["const"].LOCAL_SEARCH_PRODUCT);b&&a.productHistoryList(JSON.parse(b))},a.loadRegularList=function(){a.productRegularList().length>0||app.util.ajax("/plan/getPrdInfoByIdOrName",{prdIdOrName:a.keyword(),store:a.storeId(),pageFlag:a.pageFlag()},function(b){0===b.responseCode&&a.productRegularList(b.itemList)})},a.selectProduct=function(b){localStorage[app["const"].LOCAL_SELECTED_PRODUCT]=JSON.stringify(b),a.addToHistoryList(b),history.go(-1)},a.addToHistoryList=function(b){for(var c=0;c<a.productHistoryList().length;c++)if(b.customerPrd==a.productHistoryList()[c].customerPrd){a.productHistoryList.splice(c,1);break}a.productHistoryList.splice(0,0,b),a.productHistoryList.splice(5),localStorage[app["const"].LOCAL_SEARCH_PRODUCT]=JSON.stringify(a.productHistoryList())},a.resetData=function(){a.hasPostSubmit(!1),a.productSearchList([]),a.productHistoryList([]),a.productRegularList([]),a.keyword(""),a.isSubmit(!1),localStorage[app["const"].STATUS_SELECT_PRODUCT]="Y",a.storeId(""),a.pageFlag(""),a.isNoProduct(!1),a.planDate(null)},a.init=function(b,c,d){a.resetData(),a.storeId(b||""),a.pageFlag(c||""),a.planDate(d)}},flowListModel=function(){var a=this;a.storeCustomerList=ko.observableArray(),a.computeSumText=function(a){return a>9999?"9999+":a.toString()},a.storeCustomerInfo=function(b){var c=this;c.daySum=ko.observable(b.daySum||0),c.monthSum=ko.observable(b.monthSum||0),c.storeId=ko.observable(b.storeId||""),c.storeName=ko.observable(b.storeName||""),c.timeSum=ko.observable(b.timeSum||0),c.daySumText=ko.observable(a.computeSumText(b.daySum)||""),c.monthSumText=ko.observable(a.computeSumText(b.monthSum)||""),c.timeSumText=ko.observable(a.computeSumText(b.timeSum)||"")},a.getStoreCustomerList=function(){a.storeCustomerList([]),app.util.ajax("/storeCustomer/getStoreCustomerListInfoByUser",{token:localStorage.token},function(b){if(0===b.responseCode)for(var c=0;c<b.storeList.length;c++)a.storeCustomerList.push(new a.storeCustomerInfo(b.storeList[c]));else app.toast.error(b.responseMsg)})},a.gotoStoreInfo=function(a){location.href="#/storeFlow/"+a.storeId()},a.init=function(){a.getStoreCustomerList()}},addMonthlyFlowModel=function(){var a=this;a.planId=ko.observable(),a.storeId=ko.observable(),a.customerDetailsVo=function(b){var c=this;c.averagePrice=ko.observable(b.averagePrice||""),c.averageSumPrice=ko.observable(b.averageSumPrice||0),c.billNum=ko.observable(b.billNum||""),c.dataSourse=ko.observable(b.dataSourse||""),c.startDate=ko.observable(b.startDate||0),c.startDateText=ko.observable(app.util.formatPattern(b.startDate,"yy-MM-dd")||""),c.endDate=ko.observable(b.endDate||0),c.endDateText=ko.observable(app.util.formatPattern(b.endDate,"yy-MM-dd")||""),c.id=ko.observable(b.id||0),c.personNum=ko.observable(b.personNum||(a.planId()&&""==b.personNum?0:"")),c.remark=ko.observable(b.remark||""),c.storeId=ko.observable(b.storeId||""),c.storeName=ko.observable(b.storeName||""),c.sumPrice=ko.observable(b.sumPrice||0),c.dayNum=ko.observable(b.endDate?Math.round((b.endDate-b.startDate)/864e5)+1:0),c.startDateText.subscribe(function(){c.endDate(""),c.endDateText(""),c.dayNum(0);var b="20"+c.startDateText();if(b=b.replace(/-/g,"/"),c.startDate(new Date(b).getTime()),c.startDateText()){var d=c.startDate()+23328e5,e=c.startDate()+2592e6;a.initDateTimePicker("#end",d,e)}}),c.endDateText.subscribe(function(){var a="20"+c.endDateText();a=a.replace(/-/g,"/"),c.endDate(new Date(a).getTime()),c.startDate()>c.endDate()&&(c.endDate(""),c.endDateText("")),c.endDate()&&c.dayNum((c.endDate()-c.startDate())/864e5+1)})},a.typeCode=function(a){var b=this;b.fieldCode=ko.observable(a.fieldCode||""),b.fieldDesc=ko.observable(a.fieldDesc||""),b.fieldType=ko.observable(a.fieldType||""),b.priority=ko.observable(a.priority||0)},a.selectDataSourse=ko.observable(new a.typeCode({})),a.selectDataSourse.subscribe(function(){a.selectDataSourse()&&a.customerDetails().dataSourse(a.selectDataSourse().fieldCode())}),a.typeCodeList=ko.observableArray(),a.customerDetails=ko.observable(new a.customerDetailsVo({})),a.getStoreCustomerInfoById=function(){app.util.ajax("/storeCustomer/getStoreCustomerInfoById",{token:localStorage.token,id:a.planId()},function(b){0===b.responseCode?(a.customerDetails(new a.customerDetailsVo(b.customerDetailsVo)),a.getTypeByCode(b.customerDetailsVo.dataSourse)):4109==b.responseCode?(app.toast.error(b.responseMsg),history.go(-2)):app.toast.error(b.responseMsg)})},a.getStoreCustomerDetailsByStoreId=function(){app.util.ajax("/storeCustomer/getStoreCustomerDetailsByStoreId",{token:localStorage.token,storeId:a.storeId(),timeType:"MONTH_TYPE"},function(b){0===b.responseCode?(a.customerDetails(new a.customerDetailsVo(b.customerInfoVo)),a.getTypeByCode()):4109==b.responseCode?(app.toast.error(b.responseMsg),history.go(-2)):app.toast.error(b.responseMsg)})},a.getTypeByCode=function(b){a.typeCodeList([]),app.util.ajax("/plan/getFieldConfByFieldType",{fieldType:"CUST"},function(c){if(0===c.responseCode)for(var d=0;d<c.itemList.length;d++){var e=new a.typeCode(c.itemList[d]);a.typeCodeList.push(e),c.itemList[d].fieldCode===b&&(a.selectDataSourse(e),console.log(e))}else 4109==c.responseCode?(app.toast.error(c.responseMsg),history.go(-2)):app.toast.error(c.responseMsg)})},a.initDateTimePicker=function(b,c,d){var e={preset:"date",theme:"android-holo-light",display:"bottom",mode:"scroller",dateOrder:"yymmdd",dateFormat:"y-mm-dd",lang:"zh",rows:3,stepMinute:60,buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]};return null!=c&&null!=d?a.customerDetails().startDate()+2592e6==app.util.getZeroTs((new Date).getTime())?(e.min=new Date(c),e.max=new Date(a.customerDetails().startDate()+25056e5)):a.customerDetails().startDate()+25056e5==app.util.getZeroTs((new Date).getTime())?(e.min=new Date(c),e.max=new Date(a.customerDetails().startDate()+24192e5)):a.customerDetails().startDate()+24192e5==app.util.getZeroTs((new Date).getTime())?(e.min=new Date(c),e.max=new Date(a.customerDetails().startDate()+23328e5)):a.customerDetails().startDate()+23328e5==app.util.getZeroTs((new Date).getTime())?(e.min=new Date(c),e.max=new Date(a.customerDetails().startDate()+22464e5)):(e.min=new Date(c),e.max=new Date(d)):e.max=new Date((new Date).getTime()-24192e5),$(b).mobiscroll(e)},a.remove=function(){app.popup.confirm("确定删除？","是","否",function(){app.util.ajax("/storeCustomer/deleteStoreCustomerInfoById",{token:localStorage.token,id:a.planId()},function(a){0===a.responseCode?(app.toast.success("删除成功！"),history.go(-1)):4109==a.responseCode?(app.toast.error(a.responseMsg),history.go(-2)):app.toast.error(a.responseMsg)})})},a.selectTime=function(){a.planId()||a.customerDetails().startDateText()||app.popup.alert("请先选择开始日期!")},a.submit=function(){var b={};return a.customerDetails().startDate()?a.customerDetails().endDate()?app.util.isInt(a.customerDetails().personNum())?app.util.isInt(a.customerDetails().billNum())&&0!=a.customerDetails().billNum()?app.util.isNumber(a.customerDetails().averagePrice())&&0!=a.customerDetails().averagePrice()?-1!=a.customerDetails().averagePrice().toString().indexOf(".")&&a.customerDetails().averagePrice().toString().split(".")[1].length>2?void app.popup.alert("请填写两位小数的单价信息！"):a.selectDataSourse()?a.customerDetails().remark().length>50?void app.popup.alert("备注的字数不可超50字哦！"):app.util.isEmoji(a.customerDetails().remark())?void app.popup.alert("备注不能包括表情哦！"):(b.token=localStorage.token,
b.timeType="MONTH_TYPE",b.dayNum=a.customerDetails().dayNum(),b.averagePrice=a.customerDetails().averagePrice(),b.billNum=a.customerDetails().billNum(),b.dataSourse=a.selectDataSourse().fieldCode(),b.endDate=a.customerDetails().endDate(),b.personNum=a.customerDetails().personNum(),b.remark=a.customerDetails().remark(),b.startDate=a.customerDetails().startDate(),b.storeId=a.customerDetails().storeId(),a.planId()&&(b.id=a.planId()),void app.util.ajax("/storeCustomer/saveStoreCustomerInfo",b,function(a){0===a.responseCode?(app.toast.success("保存成功！"),history.go(-1)):4109==a.responseCode?(app.toast.error(a.responseMsg),history.go(-2)):app.toast.error(a.responseMsg)})):void app.popup.alert("请选择数据来源！"):void app.popup.alert("请填写正确的月平均客单价！"):void app.popup.alert("请填写正确的月成交单数！"):void app.popup.alert("请填写正确的月进店人数！"):void app.popup.alert("请选择结束时间！"):void app.popup.alert("请选择开始时间！")},a.init=function(b,c){a.customerDetails(new a.customerDetailsVo({})),a.storeId(b),a.planId(c),a.initDateTimePicker("#begin"),a.selectDataSourse(new a.typeCode({})),null==c?a.getStoreCustomerDetailsByStoreId():a.getStoreCustomerInfoById()}},addDayFlowModel=function(){var a=this;a.planId=ko.observable(),a.storeId=ko.observable(),a.customerDetailsVo=function(b){var c=this;c.averagePrice=ko.observable(b.averagePrice||""),c.averageSumPrice=ko.observable(b.averageSumPrice||0),c.billNum=ko.observable(b.billNum||""),c.dataSourse=ko.observable(b.dataSourse||""),c.startDate=ko.observable(b.startDate||0),c.startDateText=ko.observable(app.util.formatPattern(b.startDate,"yy-MM-dd")||""),c.endDate=ko.observable(b.endDate||0),c.endDateText=ko.observable(app.util.formatDate(b.endDate)||""),c.id=ko.observable(b.id||0),c.personNum=ko.observable(b.personNum||(a.planId()&&""==b.personNum?0:"")),c.remark=ko.observable(b.remark||""),c.storeId=ko.observable(b.storeId||""),c.storeName=ko.observable(b.storeName||""),c.sumPrice=ko.observable(b.sumPrice||0),c.startDateText.subscribe(function(){var a="20"+c.startDateText();a=a.replace(/-/g,"/"),c.startDate(new Date(a).getTime())})},a.typeCode=function(a){var b=this;b.fieldCode=ko.observable(a.fieldCode||""),b.fieldDesc=ko.observable(a.fieldDesc||""),b.fieldType=ko.observable(a.fieldType||""),b.priority=ko.observable(a.priority||0)},a.selectDataSourse=ko.observable(),a.selectDataSourse.subscribe(function(){a.selectDataSourse()&&a.customerDetails().dataSourse(a.selectDataSourse().fieldCode())}),a.typeCodeList=ko.observableArray(),a.customerDetails=ko.observable(new a.customerDetailsVo({})),a.getStoreCustomerInfoById=function(){app.util.ajax("/storeCustomer/getStoreCustomerInfoById",{token:localStorage.token,id:a.planId()},function(b){0===b.responseCode?(a.customerDetails(new a.customerDetailsVo(b.customerDetailsVo)),a.getTypeByCode(b.customerDetailsVo.dataSourse)):4109==b.responseCode?(app.toast.error(b.responseMsg),history.go(-2)):app.toast.error(b.responseMsg)})},a.getStoreCustomerDetailsByStoreId=function(){app.util.ajax("/storeCustomer/getStoreCustomerDetailsByStoreId",{token:localStorage.token,storeId:a.storeId(),timeType:"MONTH_TYPE"},function(b){0===b.responseCode?(a.customerDetails(new a.customerDetailsVo(b.customerInfoVo)),a.getTypeByCode()):4109==b.responseCode?(app.toast.error(b.responseMsg),history.go(-2)):app.toast.error(b.responseMsg)})},a.getTypeByCode=function(b){a.typeCodeList([]),app.util.ajax("/plan/getFieldConfByFieldType",{fieldType:"CUST"},function(c){if(0===c.responseCode)for(var d=0;d<c.itemList.length;d++){var e=new a.typeCode(c.itemList[d]);a.typeCodeList.push(e),c.itemList[d].fieldCode===b&&a.selectDataSourse(e)}else 4109==c.responseCode?(app.toast.error(c.responseMsg),history.go(-2)):app.toast.error(c.responseMsg)})},a.initDateTimePicker=function(a){var b={preset:"date",theme:"android-holo-light",display:"bottom",mode:"scroller",dateOrder:"yymmdd",dateFormat:"y-mm-dd",max:new Date,lang:"zh",rows:3,stepMinute:60,buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]};return $(a).mobiscroll(b)},a.remove=function(){app.popup.confirm("确定删除？","是","否",function(){app.util.ajax("/storeCustomer/deleteStoreCustomerInfoById",{token:localStorage.token,id:a.planId()},function(a){0===a.responseCode?(app.toast.success("删除成功！"),history.go(-1)):4109==a.responseCode?(app.toast.error(a.responseMsg),history.go(-2)):app.toast.error(a.responseMsg)})})},a.submit=function(){var b={};return a.customerDetails().startDate()?app.util.isInt(a.customerDetails().personNum())?0!=a.customerDetails().billNum()&&app.util.isInt(a.customerDetails().billNum())?0!=a.customerDetails().averagePrice()&&app.util.isNumber(a.customerDetails().averagePrice())?-1!=a.customerDetails().averagePrice().toString().indexOf(".")&&a.customerDetails().averagePrice().toString().split(".")[1].length>2?void app.popup.alert("请填写两位小数的单价信息！"):a.selectDataSourse()?a.customerDetails().remark().length>50?void app.popup.alert("备注的字数不可超50字哦！"):app.util.isEmoji(a.customerDetails().remark())?void app.popup.alert("备注不能包括表情哦！"):(b.token=localStorage.token,b.timeType="DAY_TYPE",b.averagePrice=a.customerDetails().averagePrice(),b.billNum=a.customerDetails().billNum(),b.dataSourse=a.selectDataSourse().fieldCode(),b.personNum=a.customerDetails().personNum(),b.remark=a.customerDetails().remark(),b.startDate=a.customerDetails().startDate(),b.storeId=a.customerDetails().storeId(),a.planId()&&(b.id=a.planId()),void app.util.ajax("/storeCustomer/saveStoreCustomerInfo",b,function(a){0===a.responseCode?(app.toast.success("保存成功！"),history.go(-1)):4109==a.responseCode?(app.toast.error(a.responseMsg),history.go(-2)):app.toast.error(a.responseMsg)})):void app.popup.alert("请选择数据来源！"):void app.popup.alert("请填写正确的日平均客单价！"):void app.popup.alert("请填写正确的日成交单数！"):void app.popup.alert("请填写正确的日进店人数！"):void app.popup.alert("请选择开始日期！")},a.init=function(b,c){a.customerDetails(new a.customerDetailsVo({})),a.storeId(b),a.planId(c),a.selectDataSourse(new a.typeCode({})),a.initDateTimePicker("#beginDay"),null==c?a.getStoreCustomerDetailsByStoreId():a.getStoreCustomerInfoById()}},addTimeFlowModel=function(){var a=this;a.planId=ko.observable(),a.storeId=ko.observable(),a.day=ko.observable(),a.time=ko.observable(),a.customerDetailsVo=function(b){var c=this;c.averagePrice=ko.observable(b.averagePrice||""),c.averageSumPrice=ko.observable(b.averageSumPrice||0),c.billNum=ko.observable(b.billNum||""),c.dataSourse=ko.observable(b.dataSourse||""),c.startDate=ko.observable(b.startDate||0),c.endDate=ko.observable(b.endDate||0),c.id=ko.observable(b.id||0),c.personNum=ko.observable(b.personNum||(a.planId()&&""==b.personNum?0:"")),c.remark=ko.observable(b.remark||""),c.storeId=ko.observable(b.storeId||""),c.storeName=ko.observable(b.storeName||""),c.sumPrice=ko.observable(b.sumPrice||0),c.dayNum=ko.observable(b.endDate?Math.round((b.endDate-b.startDate)/864e5):0)},a.typeCode=function(a){var b=this;b.fieldCode=ko.observable(a.fieldCode||""),b.fieldDesc=ko.observable(a.fieldDesc||""),b.fieldType=ko.observable(a.fieldType||""),b.priority=ko.observable(a.priority||0)},a.selectDataSourse=ko.observable(),a.typeCodeList=ko.observableArray(),a.customerDetails=ko.observable(new a.customerDetailsVo({})),a.selectDataSourse.subscribe(function(){a.selectDataSourse()&&a.customerDetails().dataSourse(a.selectDataSourse().fieldCode())}),a.day.subscribe(function(){if(a.day()&&a.initTimePicker(),a.time()){var b=a.time().split(" - "),c="20"+a.day();c=c.replace(/-/g,"/"),a.customerDetails().startDate(new Date(c+" "+b[0]).getTime()),a.customerDetails().endDate(new Date(c+" "+b[1]).getTime())}}),a.time.subscribe(function(){if(a.time()){var b=a.time().split(" - "),c="20"+a.day();if(c=c.replace(/-/g,"/"),a.customerDetails().startDate(new Date(c+" "+b[0]).getTime()),a.customerDetails().endDate(new Date(c+" "+b[1]).getTime()),a.customerDetails().endDate()<=a.customerDetails().startDate())return app.popup.alert("结束时间必须大于开始时间！"),a.customerDetails().startDate(""),a.customerDetails().endDate(""),a.time(""),void a.customerDetails().dayNum(0);console.log(a.customerDetails().startDate());var d=(a.customerDetails().endDate()-a.customerDetails().startDate())/36e5;app.util.isInt(d)||(d=d.toFixed(2)),a.customerDetails().dayNum(d)}}),a.getStoreCustomerInfoById=function(){app.util.ajax("/storeCustomer/getStoreCustomerInfoById",{token:localStorage.token,id:a.planId()},function(b){0===b.responseCode?(a.customerDetails(new a.customerDetailsVo(b.customerDetailsVo)),a.day(app.util.formatPattern(b.customerDetailsVo.startDate,"yy-MM-dd")),a.time(app.util.formatTimeMin(b.customerDetailsVo.startDate)+" - "+app.util.formatTimeMin(b.customerDetailsVo.endDate)),a.getTypeByCode(b.customerDetailsVo.dataSourse)):4109==b.responseCode?(app.toast.error(b.responseMsg),history.go(-2)):app.toast.error(b.responseMsg)})},a.getStoreCustomerDetailsByStoreId=function(){app.util.ajax("/storeCustomer/getStoreCustomerDetailsByStoreId",{token:localStorage.token,storeId:a.storeId(),timeType:"MONTH_TYPE"},function(b){0===b.responseCode?(a.customerDetails(new a.customerDetailsVo(b.customerInfoVo)),a.getTypeByCode()):4109==b.responseCode?(app.toast.error(b.responseMsg),history.go(-2)):app.toast.error(b.responseMsg)})},a.getTypeByCode=function(b){a.typeCodeList([]),app.util.ajax("/plan/getFieldConfByFieldType",{fieldType:"CUST"},function(c){if(0===c.responseCode)for(var d=0;d<c.itemList.length;d++){var e=new a.typeCode(c.itemList[d]);a.typeCodeList.push(e),c.itemList[d].fieldCode===b&&a.selectDataSourse(e)}else 4109==c.responseCode?(app.toast.error(c.responseMsg),history.go(-2)):app.toast.error(c.responseMsg)})},a.remove=function(){app.popup.confirm("确定删除？","是","否",function(){app.util.ajax("/storeCustomer/deleteStoreCustomerInfoById",{token:localStorage.token,id:a.planId()},function(a){0===a.responseCode?(app.toast.success("删除成功！"),history.go(-1)):4109==a.responseCode?(app.toast.error(a.responseMsg),history.go(-2)):app.toast.error(a.responseMsg)})})},a.initDateTimePicker=function(){var a={preset:"date",theme:"android-holo-light",display:"bottom",mode:"scroller",dateOrder:"yymmdd",dateFormat:"y-mm-dd",max:new Date,lang:"zh",rows:3,stepMinute:60,buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]};return $("#day").mobiscroll(a)},a.initTimePicker=function(){var b=new Date,c=b.getTime(),d=c%3e5,e=c-d-3e5,f={theme:"android-holo-light",display:"bottom",controls:["time"],lang:"zh",maxWidth:100,stepMinute:5,timeFormat:"HH:ii",defaultValue:[new Date(e),new Date(e+3e5)],buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]},g="20"+a.day();g=g.replace(/-/g,"/");var h=new Date(g).getTime(),i=app.util.getZeroTs(b);return h==i&&(f.max=new Date),$("#time").mobiscroll().range(f)},a.selectTime=function(){a.planId()||a.time()||app.popup.alert("请先选择日期！")},a.submit=function(){var b={};return a.customerDetails().startDate()&&a.customerDetails().endDate()?app.util.isInt(a.customerDetails().personNum())?app.util.isInt(a.customerDetails().billNum())&&0!==a.customerDetails().billNum()?app.util.isNumber(a.customerDetails().averagePrice())&&0!=a.customerDetails().averagePrice()?-1!=a.customerDetails().averagePrice().toString().indexOf(".")&&a.customerDetails().averagePrice().toString().split(".")[1].length>2?void app.popup.alert("请填写两位小数的单价信息！"):a.selectDataSourse()?a.customerDetails().remark().length>50?void app.popup.alert("备注的字数不可超50字哦！"):app.util.isEmoji(a.customerDetails().remark())?void app.popup.alert("备注不能包括表情哦！"):(b.token=localStorage.token,b.timeType="TIME_TYPE",b.dayNum=a.customerDetails().dayNum(),b.averagePrice=a.customerDetails().averagePrice(),b.billNum=a.customerDetails().billNum(),b.dataSourse=a.selectDataSourse().fieldCode(),b.startDate=a.customerDetails().startDate(),b.endDate=a.customerDetails().endDate(),b.personNum=a.customerDetails().personNum(),b.remark=a.customerDetails().remark(),b.storeId=a.customerDetails().storeId(),a.planId()&&(b.id=a.planId()),void app.util.ajax("/storeCustomer/saveStoreCustomerInfo",b,function(a){0===a.responseCode?(app.toast.success("保存成功！"),history.go(-1)):4109==a.responseCode?(app.toast.error(a.responseMsg),history.go(-2)):app.toast.error(a.responseMsg)})):void app.popup.alert("请选择数据来源！"):void app.popup.alert("请填写正确的时段平均客单价！"):void app.popup.alert("请填写正确的时段成交单数！"):void app.popup.alert("请填写正确的时段进店人数！"):void app.popup.alert("请选择时段！")},a.init=function(b,c){a.customerDetails(new a.customerDetailsVo({})),a.storeId(b),a.planId(c),a.day(""),a.time(""),a.selectDataSourse(new a.typeCode({})),a.initDateTimePicker(),null==c?a.getStoreCustomerDetailsByStoreId():a.getStoreCustomerInfoById()}},storeFlowModel=function(){var a=this;a.title=ko.observable("客流量"),a.storeId=ko.observable(),a.timeType=ko.observable("MONTH_TYPE"),a.timeType.subscribe(function(){a.getList()}),a.timeTypeLabel=ko.computed(function(){switch(a.timeType()){case"MONTH_TYPE":return"月";case"DAY_TYPE":return"日";case"TIME_TYPE":return"时段";default:return"月"}}),a.storeName=ko.observable(),a.isShowAdd=ko.observable(!1),a.itemList=ko.observable({}),a.addSwitch=function(){a.isShowAdd(!a.isShowAdd())},a.getList=function(){app.util.ajax("/storeCustomer/getStoreCustomerDetailsByStoreId",{storeId:a.storeId(),timeType:a.timeType(),token:localStorage.token},function(b){0==b.responseCode?a.itemList(b.customerInfoVo):4109==b.responseCode?(app.toast.error(b.responseMsg),history.go(-1)):app.toast.error(b.responseMsg)})},a.flowDetail=function(b){location.href="#/flowDetail/"+b.id+"/"+a.timeType()},a.goBack=function(){a.timeType("MONTH_TYPE"),history.go(-1)},a.addMonthly=function(){location.href="#/addMonthlyFlow/"+a.storeId()},a.addDaily=function(){location.href="#/addDayFlow/"+a.storeId()},a.addPeriod=function(){location.href="#/addTimeFlow/"+a.storeId()},a.edit=function(b){switch(a.timeType()){case"MONTH_TYPE":location.href="#/addMonthlyFlow/"+a.storeId()+"/"+b.id;break;case"DAY_TYPE":location.href="#/addDayFlow/"+a.storeId()+"/"+b.id;break;case"TIME_TYPE":location.href="#/addTimeFlow/"+a.storeId()+"/"+b.id;break;default:location.href="#/addMonthlyFlow/"+a.storeId()+"/"+b.id}},a.init=function(b){a.storeId(b),a.isShowAdd(!1),$("#storeFlowPage .container-store").height($("#storeFlowPage").height()-44),a.getList()}},flowDetailModel=function(){var a=this;a.storeId=ko.observable(),a.itemList=ko.observable({}),a.sumDay=ko.observable(),a.sumHour=ko.observable(),a.fieldList=ko.observable(),a.dataSourseText=ko.observable(""),a.dataSourse=ko.observable(""),a.dataSourse.subscribe(function(b){a.dataSourseText(a.fieldList()[b])}),a.timeLabel=ko.observable(),a.timeType=ko.observable(),a.getInfoByStore=function(b){app.util.ajax("/storeCustomer/getStoreCustomerInfoById",{id:b,token:localStorage.token},function(b){0==b.responseCode?(a.itemList(b.customerDetailsVo),a.sumDay(((b.customerDetailsVo.endDate-b.customerDetailsVo.startDate)/864e5+1).toFixed(0)),a.sumHour(((b.customerDetailsVo.endDate-b.customerDetailsVo.startDate)/36e5).toFixed(2)),a.dataSourse(b.customerDetailsVo.dataSourse)):4109==b.responseCode?(app.toast.error(b.responseMsg),history.go(-2)):app.toast.error(b.responseMsg)})},a.getFieldList=function(){app.util.ajax("/plan/getFieldConfByFieldType",{fieldType:"CUST"},function(b){if(0==b.responseCode){var c={};b.itemList.forEach(function(a){c[a.fieldCode]=a.fieldDesc}),a.fieldList(c)}else 4109==b.responseCode?(app.toast.error(b.responseMsg),history.go(-2)):app.toast.error(b.responseMsg)})},a.init=function(b,c){switch(a.timeType(c),a.getFieldList(),a.getInfoByStore(b),c){case"MONTH_TYPE":return app.navigator.setHeader({title:"月客流量详情"}),a.timeLabel("月");case"DAY_TYPE":return app.navigator.setHeader({title:"日客流量详情"}),a.timeLabel("日");case"TIME_TYPE":return app.navigator.setHeader({title:"时段客流量详情"}),a.timeLabel("时段");default:return app.navigator.setHeader({title:"月客流量详情"}),a.timeLabel("月")}}},editCapacityModel=function(){var a=this;a.title=ko.observable(""),a.storeId=ko.observable(""),a.storeName=ko.observable(""),a.firstBrandCode=ko.observable(),a.capaDate=ko.observable(""),a.pageFlag=ko.observable(""),a.sourceList=ko.observableArray([]),a.sourceCode=ko.observable(),a.remark=ko.observable(),a.isAdd=ko.observable(!1),a.isSubmit=ko.observable(!1),a.secondBrandVoList=ko.observableArray([]),a.thirdBrandModel=function(b){var c=this;c.thirdBrandCode=ko.observable(b.brandCode||""),c.thirdBrandDesc=ko.observable(b.brandDesc||""),c.id=b.id,c.sumMoney=ko.observable(b.sumMoney||("add"==a.pageFlag()?"":0)),c.sumMoney.subscribe(function(a){return Number(a)||0==Number(a)?app.util.isDecimalMultiple(a,2)?c.sumMoney(Number(a).toFixed(1)):void 0:(c.sumMoney(0),app.toast.error("请输入正数"))}),c.sumNumber=ko.observable(b.sumNumber||("add"==a.pageFlag()?"":0)),c.sumNumber.subscribe(function(a){return Number(a)||0==Number(a)?app.util.isDecimal(a)?c.sumNumber(Number(a).toFixed(0)):void 0:(c.sumNumber(0),app.toast.error("请输入数字"))})},a.secondBrandModel=function(b){var c=this;c.secondBrandCode=b.brandCode,c.secondBrandDesc=b.brandDesc,c.thirdBrandVoList=ko.observableArray([]);for(var d=0;d<b.thirdBrandVoList.length;d++)c.thirdBrandVoList.push(new a.thirdBrandModel(b.thirdBrandVoList[d]));c.sumMoney=ko.computed(function(){for(var a=0,b=0;b<c.thirdBrandVoList().length;b++)a+=Number(c.thirdBrandVoList()[b].sumMoney());return a}),c.sumNumber=ko.computed(function(){for(var a=0,b=0;b<c.thirdBrandVoList().length;b++)a+=Number(c.thirdBrandVoList()[b].sumNumber());return a})},a.sumMoney=ko.computed(function(){for(var b=0,c=0;c<a.secondBrandVoList().length;c++)b+=Number(a.secondBrandVoList()[c].sumMoney());return b}),a.sumNumber=ko.computed(function(){for(var b=0,c=0;c<a.secondBrandVoList().length;c++)b+=Number(a.secondBrandVoList()[c].sumNumber());return b}),a.getType=function(b){app.util.ajax("/capacity/getConfFieldByFieldType",{fieldType:b,token:localStorage.token},function(b){console.log(b),a.sourceList(b.itemList)})},a.getDefaultInfo=function(b){app.util.ajax("/capacity/getStoreCapacityInfoByParams",{brandCode:a.firstBrandCode(),capaDate:b,pageFlag:a.pageFlag(),storeId:a.storeId(),token:localStorage.token},function(b){if(console.log(b),0===b.responseCode){a.initDate("#capaDate",b.currDate);var c=b.capacityVo;a.title(c.brandDesc+"容量"),app.navigator.setHeader({title:("add"==a.pageFlag()?"新建":"编辑")+a.title()}),a.storeName(c.storeName),a.capaDate(c.capaDate?app.util.formatPattern(c.capaDate,"yyyy-MM"):""),a.sourceList().length>0&&a.sourceList().forEach(function(b){b.fieldCode==c.dataSourse&&a.sourceCode(b)}),a.remark(c.remark),a.secondBrandVoList([]);for(var d=0;d<c.secondBrandVoList.length;d++)a.secondBrandVoList.push(new a.secondBrandModel(c.secondBrandVoList[d]))}else app.toast.error(b.responseMsg)})},a.addBrand=function(b){var c,d,e;for(d=b.thirdBrandVoList(),e=[],c=0;c<d.length;c++)e.push({brandName:d[c].thirdBrandDesc(),brandCode:d[c].thirdBrandCode()});sessionStorage._BRANDALREADY=JSON.stringify(e),a.isAdd(!0),location.href="#/addBrand/"+a.firstBrandCode()+"/"+b.secondBrandCode},a.initDate=function(a,b){var c=new Date(b).setMonth(new Date(b).getMonth()-1),d=new Date(c).setMonth(new Date(c).getMonth()-11),e={preset:"date",theme:"android-holo-light",display:"bottom",mode:"scroller",dateOrder:"yymm",dateFormat:"yy-mm",lang:"zh",rows:3,stepMinute:60,max:new Date(c),min:new Date(d),buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]};return $(a).mobiscroll(e)},a.save=function(){if(!a.isSubmit()){if(!a.capaDate())return app.toast.error("请选择月份！");if(!a.sourceCode()||!a.sourceCode().fieldCode)return app.toast.error("请选择数据来源！");if(app.util.isEmoji(a.remark()))return app.toast.error("备注不可输入表情符号！");for(var b,c,d=[],e=0;e<a.secondBrandVoList().length;e++){b=a.secondBrandVoList()[e];var f={};f.thirdBrandVoList=[];for(var g=0;g<b.thirdBrandVoList().length;g++){if(c=b.thirdBrandVoList()[g],""===c.sumNumber())return app.toast.error("请填写"+b.secondBrandDesc+"容量-"+c.thirdBrandDesc()+"数量！");if(""===c.sumMoney())return app.toast.error("请填写所有金额！");if(!Number(c.sumMoney())&&0!=Number(c.sumMoney()))return app.toast.error("请输入正确的金额！");if(!app.regex.positiveWithoutZero(Number(c.sumNumber())))return app.toast.error("请输入整数数量！");f.thirdBrandVoList.push({brandCode:c.thirdBrandCode(),brandDesc:c.thirdBrandDesc(),id:c.id,sumMoney:c.sumMoney(),sumNumber:c.sumNumber()})}f.brandCode=b.secondBrandCode,f.brandDesc=b.secondBrandDesc,d.push(f)}a.isSubmit(!0),app.util.ajax("/capacity/saveStoreCapacityInfo",{token:localStorage.token,storeId:a.storeId(),brandCode:a.firstBrandCode(),capaDate:new Date(a.capaDate()).getTime(),dataSourse:a.sourceCode().fieldCode,pageFlag:a.pageFlag(),remark:a.remark(),secondBrandVoList:JSON.stringify(d)},function(b){a.isSubmit(!1),0===b.responseCode?(app.toast.success("保存成功！"),history.go(-1)):app.toast.error(b.responseMsg)},function(){a.isSubmit(!1),app.toast.error(app["const"].AJAX_ERROR_MSG,2e3)})}},a.init=function(b,c,d){if(a.isSubmit(!1),a.storeId(b),a.firstBrandCode(c),a.pageFlag("add"==d?"add":"edit"),app.navigator.setHeader({title:("add"==a.pageFlag()?"新建":"编辑")+a.title()}),a.isAdd()){if(a.isAdd(!1),!localStorage.addBrandList)return;var e=JSON.parse(localStorage.addBrandList);e.firstBrandCode==c&&a.secondBrandVoList().forEach(function(b){b.secondBrandCode==e.secondBrandCode&&e.thirdBrandVoList.forEach(function(c){b.thirdBrandVoList.push(new a.thirdBrandModel(c))})}),localStorage.removeItem("addBrandList")}else a.capaDate("add"==d?"":d),a.getType("capa"),a.getDefaultInfo("add"==d?"":d)}},ViewCapacityList=function(){var a=this;a.pageSize=10,a.pageIndex=ko.observable(),a.pageState=ko.observable(),a.searchIsShowed=ko.observable(),a.searchIsCached=ko.observable(),a.keyword=ko.observable(),a.keywordCache=ko.observable(),a.list=ko.observableArray(),a.getList=function(){a.pageState("_LOADING"),0===a.pageIndex()&&a.list.removeAll(),app.util.ajax("/capacity/getStoreCapacityListByUser",{keyword:a.keyword()||"",pageIndex:a.pageIndex(),pageSize:a.pageSize,token:localStorage.token},function(b){if(a.pageState("_WAITING"),0===b.responseCode){var c=b.storeList;c.forEach(function(b){a.list.push(b)}),c.length<a.pageSize&&a.pageState("_FINISHED")}else app.toast.error(b.responseMsg),a.pageIndex(a.pageIndex()-1)})},a.scrollToLoad=function(){if("_WAITING"===a.pageState()){var b=event.target,c=b.clientHeight,d=b.scrollTop,e=b.scrollHeight;100>e-d-c&&(a.pageIndex(a.pageIndex()+1),a.getList())}},a.showSearch=function(){a.keywordCache(""),a.searchIsShowed(!a.searchIsShowed())},a.goToInfo=function(b){a.searchIsCached(!0),location.href="#/viewCapacityInfo/"+b.storeId},a.search=function(){a.pageIndex(0),a.keyword(a.keywordCache()),a.getList()},a.init=function(){a.searchIsCached()?a.searchIsCached(!1):(a.keyword(""),a.keywordCache(""),a.searchIsShowed(!1)),a.pageIndex(0),a.getList()}},ViewCapacityInfo=function(){function a(a){a&&"object"==typeof a&&(this.brandCode=a.brandCode,this.brandDesc=a.brandDesc,this.count=a.count,this.monthCapaVoList=ko.observableArray(a.monthCapaVoList))}var b=this;b.storeId=ko.observable(),b.storeName=ko.observable(),b.selectedBrandCode=ko.observable(),b.fieldCodeRefer=ko.observable(),b.infoList=ko.observableArray(),b.infoListMonthContent=ko.computed(function(){var a=b.selectedBrandCode();if(a){var c,d;for(c=b.infoList(),d=0;d<c.length;d++)if(c[d].brandCode===a)return c[d].monthCapaVoList();return[]}return[]}),b.pageState=ko.observable(),b.mainHeight=ko.observable(),b.getFieldCodeRefer=function(a){app.util.ajax("/capacity/getConfFieldByFieldType",{token:localStorage.token,fieldType:"brand"},function(c){if(0===c.responseCode){var d={};c.itemList.forEach(function(a){d[a.fieldCode]=a}),b.fieldCodeRefer(d),a&&a()}else app.toast.error(c.responseMsg)})},b.getInfo=function(c){b.selectedBrandCode()!==c&&app.util.ajax("/capacity/getStoreCapacityInfoByStoreId",{token:localStorage.token,brandCode:c||"",storeId:b.storeId()},function(d){if(0===d.responseCode){b.mainHeight(getComputedStyle(document.getElementById("viewCapacityInfoMain")).height);var e;if(c){var f,g,h,i;for(e=d.storeCapacityVo.firstBrandVoList,i=b.infoList(),h=0;h<i.length;h++)if(i[h].brandCode===c){f=h;break}for(h=0;h<e.length;h++)if(e[h].brandCode===c){g=h;break}f>=0&&b.infoList.splice(f,1,new a(e[g])),b.selectedBrandCode(c)}else e=d.storeCapacityVo,b.storeName(e.storeName),b.infoList.removeAll(),e.firstBrandVoList.forEach(function(c,d){0===d&&b.selectedBrandCode(c.brandCode),b.infoList.push(new a(c))})}else app.toast.error(d.responseMsg)})},b.goToAdd=function(a){if(a){var c=b.storeId();b.selectedBrandCode(a),location.href="#/editCapacity/"+c+"/"+a+"/add"}},b.goToCheck=function(){var a=b.storeId(),c=b.selectedBrandCode(),d=this.capaDate;location.href="#/capacityDetail/"+a+"/"+c+"/"+d},b.goToEdit=function(){var a=b.storeId(),c=b.selectedBrandCode(),d=this.capaDate;location.href="#/editCapacity/"+a+"/"+c+"/"+d},b.init=function(a){b.getFieldCodeRefer(),b.pageState("_NORMAL"),b.mainHeight(null),a&&b.storeId()===a?b.getInfo():(b.storeId(a),b.selectedBrandCode(null),b.getInfo())}},addBrandModel=function(){var a=this;a.defaultBrandList=ko.observableArray(),a.isDeleted=ko.observable(!1),a.isDefault=ko.observable("true"),a.isDefault.subscribe(function(b){"true"==b?a.customList([]):a.defaultList([])}),a.selectedBrand=ko.observable(),a.defaultList=ko.observableArray([]),a.customList=ko.observableArray([]),a.alreadyList=null,a.resultList={firstBrandCode:"",secondBrandCode:"",thirdBrandVoList:[]},a.thirdBrandModel=function(a){var b=this;b.thirdBrandCode=ko.observable(a.brandCode||""),b.thirdBrandDesc=ko.observable(a.brandName||""),b.thirdBrandDesc.subscribe(function(a){return a?void 0:app.toast.error("请填写自定义品牌名称！")}),b.id=0,b.priority=a.priority||0,b.sumMoney=ko.observable(a.sumMoney||""),b.sumMoney.subscribe(function(a){return Number(a)||0==Number(a)?app.util.isDecimalMultiple(a,2)?b.sumMoney(Number(a).toFixed(1)):void 0:(b.sumMoney(0),app.toast.error("请输入正数"))}),b.sumNumber=ko.observable(a.sumNumber||""),b.sumNumber.subscribe(function(a){return Number(a)||0==Number(a)?app.util.isDecimal(a)?b.sumNumber(Number(a).toFixed(0)):void 0:(b.sumNumber(0),app.toast.error("请输入数字"))})},a.getDefaultInfo=function(b,c,d){app.util.ajax("/capacity/getBrandListByBrandType",{firstBrandCode:b,secondBrandCode:c,thirdBrandVoList:d,token:localStorage.token},function(b){if(console.log(b),0===b.responseCode){0==b.brandVoList.length&&a.isDefault("false"),a.defaultBrandList([]);for(var c=0;c<b.brandVoList.length;c++)a.defaultBrandList.push(new a.thirdBrandModel(b.brandVoList[c]));a.defaultBrandList.sort(function(a,b){return a.priority-b.priority})}else app.toast.error(b.responseMsg)})},a.addCustomBrand=function(){var b={};a.customList.push(new a.thirdBrandModel(b))},a.delTab=function(){a.isDeleted(!a.isDeleted())},a.delCustomBrand=function(b){a.customList.remove(b),0==a.customList().length&&a.isDeleted(!1)},a.checkHasSameBrand=function(){var b,c,d,e,f,g;for(e=a.resultList.thirdBrandVoList,g=a.alreadyList,b=0;b<e.length;b++){for(f=e[b].thirdBrandDesc().trim(),c=0;c<g.length;c++)if(g[c].brandName===f)return!0;for(d=b+1;d<e.length;d++)if(e[d].thirdBrandDesc()===f)return!0}return!1},a.save=function(){if("true"==a.isDefault()&&a.defaultList().length<1)return app.toast.error("请选择品牌！");if("false"==a.isDefault()&&a.customList().length<1)return app.toast.error("请添加自定义品牌！");if(a.resultList.thirdBrandVoList="true"==a.isDefault()?a.defaultList():a.customList(),a.checkHasSameBrand())return app.toast.error("请勿添加重复品牌！");for(var b=[],c=0;c<a.resultList.thirdBrandVoList.length;c++){var d=a.resultList.thirdBrandVoList[c];if(!d.thirdBrandDesc())return app.toast.error("请填写自定义品牌名称！");if(!d.sumMoney()){if("false"==a.isDefault())return app.toast.error("请填写自定义品牌金额！");d.sumMoney(0)}if(!d.sumNumber()){if("false"==a.isDefault())return app.toast.error("请填写自定义品牌数量！");d.sumNumber(0)}if(isNaN(d.sumMoney())||Number(d.sumMoney())<0)return app.toast.error("请输入正确的金额！");if(isNaN(d.sumNumber())||!app.regex.positiveWithoutZero(d.sumNumber())||Number(d.sumNumber())<0)return app.toast.error("请输入整数数量！");b.push({brandCode:d.thirdBrandCode(),brandDesc:d.thirdBrandDesc().trim(),sumMoney:d.sumMoney(),sumNumber:d.sumNumber(),id:d.id})}a.resultList.thirdBrandVoList=b,localStorage.addBrandList=JSON.stringify(a.resultList),history.go(-1)},a.init=function(b,c){a.isDefault("true"),a.isDeleted(!1),a.defaultList([]),a.customList([]),a.alreadyList=JSON.parse(sessionStorage._BRANDALREADY),a.getDefaultInfo(b,c,sessionStorage._BRANDALREADY),a.resultList.firstBrandCode=b,a.resultList.secondBrandCode=c}},capacityDetailModel=function(){var a=this;a.firstBrandCode=ko.observable(),a.brandDesc=ko.observable(),a.capaDate=ko.observable(),a.sourceCode=ko.observable(),a.sourceCodeRefer=ko.observable({}),a.sourceCodeDescr=ko.computed(function(){var b=a.sourceCodeRefer()[a.sourceCode()];return b?b.fieldDesc:""}),a.remark=ko.observable(),a.secondBrandVoList=ko.observableArray(),a.storeId=ko.observable(),a.storeName=ko.observable(),a.sumMoney=ko.observable(),a.sumNumber=ko.observable(),a.getType=function(b){app.util.ajax("/capacity/getConfFieldByFieldType",{fieldType:b,token:localStorage.token},function(b){if(0===b.responseCode){var c=b.itemList,d={};c.forEach(function(a){d[a.fieldCode]=a}),a.sourceCodeRefer(d)}else app.toast.error(b.responseMsg)})},a.getDefaultInfo=function(b){app.util.ajax("/capacity/getStoreCapacityInfoByParams",{brandCode:a.firstBrandCode(),capaDate:a.capaDate(),pageFlag:b,storeId:a.storeId(),token:localStorage.token},function(b){if(0===b.responseCode){var c=b.capacityVo;console.log(c),a.brandDesc(c.brandDesc),a.sourceCode(c.dataSourse),a.remark(c.remark),a.secondBrandVoList(c.secondBrandVoList),a.storeName(c.storeName),a.sumMoney(c.sumMoney),a.sumNumber(c.sumNumber),a.getType("capa")}else app.toast.error(b.responseMsg)})},a.init=function(b,c,d){a.storeId(b),a.firstBrandCode(c),a.capaDate(d),a.getDefaultInfo("edit")}},storePersonalModel=function(){var a=this;a.storeId=ko.observable(),a.storeName=ko.observable(),a.hasBpNum=ko.observable(),a.userList=ko.observableArray(),a.user=function(a){this.show=ko.observable(!0),this.data=a},a.loadInfo=function(){app.util.ajax("/myStore/getUserListByStoreId",{token:localStorage.token,storeId:a.storeId()},function(b){if(0===b.responseCode){a.storeName(b.storeName),a.hasBpNum(b.hasBpNum),a.userList([]);for(var c=b.userList.length,d=0;c>d;d++)a.userList.push(new a.user(b.userList[d]));console.log(b.userList)}})},a.goRelation=function(a,b){console.log(b),location.href="#/editStoreRelation/"+b.id},a.showChange=function(a){a.show(!a.show())},a.addControlStore=function(){location.href="#/addStoreStaff?storeId="+a.storeId(),localStorage.relationStore=JSON.stringify({storeId:a.storeId(),storeName:a.storeName()})},a.goBack=function(){location.href="#/storeInfo"},a.init=function(b){a.storeId(b),app.navigator.setHeader({title:"门店人员详情",rightClassName:"addControlStore",rightBtnCallback:a.addControlStore,leftBtnCallback:a.goBack}),a.loadInfo()}},editStoreRelationModel=function(){var a=this;a.pageSource=ko.observable("INIT"),a.id=ko.observable(),a.storeId=ko.observable(),a.storeName=ko.observable(),a.idType=ko.observable(),a.itemObj=function(a){var b=this;b.department=ko.observable(a.department||""),b.positionDesc=ko.observable(a.positionDesc||""),b.positionId=ko.observable(a.positionId||""),b.userId=ko.observable(a.userId||""),b.userName=ko.observable(a.userName||"")},a.item=ko.observable(new a.itemObj({})),a.taskObj=function(a){var b=this;b.isSelected=ko.observable(a.isSelected||!1),b.taskDesc=ko.observable(a.taskDesc||""),b.taskId=ko.observable(a.taskId||"")},a.taskList=ko.observableArray(),a.dateFrom=ko.observable(),a.dateFromText=ko.observable(),a.dateFromText.subscribe(function(){a.dateFrom(app.util.formatTimeStamp(a.dateFromText()))}),a.dateTo=ko.observable(),a.dateToText=ko.observable(),a.dateToText.subscribe(function(){a.dateTo(app.util.formatTimeStamp(a.dateToText()))}),a.load=function(){app.util.ajax("/myStore/getUserInfoByUserId",{id:a.id(),pageSource:a.pageSource(),token:localStorage.token,userId:a.item().userId(),idType:a.idType()},function(b){if(0===b.responseCode){a.storeId(b.storeId),a.storeName(b.storeName),a.item(new a.itemObj(b.itemList)),a.dateFrom(b.dateFrom),a.dateFromText(app.util.formatDate(b.dateFrom)),
a.dateTo(b.dateTo),a.dateToText(app.util.formatDate(b.dateTo)),a.taskList([]);for(var c=b.taskList.length,d=0;c>d;d++)a.taskList.push(new a.taskObj(b.taskList[d]));a.dateFrom()>(new Date).getTime()?(a.initDateTimePicker("#begin"),a.initDateTimePicker("#end")):a.initDateTimePicker("#end")}})},a.check=function(b){a.taskList().forEach(function(a){a.isSelected(!1)}),b.isSelected(!0)},a.initDateTimePicker=function(a){var b={preset:"date",theme:"android-holo-light",display:"bottom",mode:"scroller",dateFormat:"yyyy/mm/dd",min:new Date,lang:"zh",rows:3,buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]};return $(a).mobiscroll(b)},a.submit=function(){if(a.dateTo()<a.dateFrom())return void app.popup.alert("关系结束日期不可小于关系开始日期");var b=[],c={};return a.taskList().forEach(function(a){a.isSelected()&&(c.taskDesc=a.taskDesc(),c.taskId=a.taskId(),c.isSelected=a.isSelected(),b.push(c))}),0===b.length?void app.popup.alert("请选择工作内容"):void app.util.ajax(" /myStore/modifyUserStoreRela",{dateFrom:a.dateFrom(),dateTo:a.dateTo(),id:a.id(),token:localStorage.token,storeId:a.storeId(),taskList:b,userId:a.item().userId()},function(a){0===a.responseCode?(app.toast.success("保存成功！"),history.go(-1)):6008===a.responseCode?(app.toast.error(a.responseMsg),history.go(-2)):app.toast.error(a.responseMsg)})},a.remove=function(){app.popup.confirm("确定删除？","是","否",function(){app.util.ajax("/myStore/deleteUserStoreRela",{id:a.id(),token:localStorage.token},function(a){0===a.responseCode?(app.toast.success("删除成功！"),history.go(-1)):6008===a.responseCode?(app.toast.error(a.responseMsg),history.go(-2)):app.toast.error(a.responseMsg)})})},a.init=function(b){a.id(b),a.pageSource("MODIFY"),a.load()}},addStoreRelationModel=function(){var a=this;a.userInfo=ko.observable({}),a.dateFrom=ko.observable(),a.dateTo=ko.observable(),a.selectedShop=ko.observable({}),a.taskList=ko.observableArray(),a.selectedTask=ko.observable(),a.isGoShop=ko.observable(!1),a.initShop=ko.observable(),a.isSubmit=ko.observable(!1),a.getUserInfoByUserId=function(b){app.util.ajax("/myStore/getUserInfoByUserId",{pageSource:"INIT",token:localStorage.token,userId:b},function(b){console.log(b),0===b.responseCode?(a.userInfo(b.itemList),a.taskList(b.taskList),a.selectedTask("")):app.toast.error(b.responseMsg)})},a.gotoSelectShop=function(){a.isGoShop(!0),location.href="#/selectCommanderShop"},a.selectTask=function(b){b.isSelected=!0,a.selectedTask(b)},a.save=function(){if(!a.isSubmit()){if(!a.selectedShop())return void app.toast.error("请选择门店！");if(!a.dateFrom())return void app.toast.error("请选择开始日期！");if(!a.dateTo())return void app.toast.error("请选择结束日期！");if(!a.selectedTask())return void app.toast.error("请选择工作内容！");var b=app.util.formatTimeStamp(a.dateFrom()),c=app.util.formatTimeStamp(a.dateTo())+86399999;if(b>c)return void app.popup.alert("关系结束日期不可小于关系开始日期！");a.isSubmit(!0),app.util.ajax("/myStore/saveUserStoreRelation",{dateFrom:b,dateTo:c,storeId:a.selectedShop().storeId,storeName:a.selectedShop().storeName,taskList:JSON.stringify([a.selectedTask()]),token:localStorage.token,userId:a.userInfo().userId},function(b){0===b.responseCode?(app.toast.success("保存成功！"),location.href="#/storePersonal/"+a.selectedShop().storeId):6008===b.responseCode?(app.toast.error(b.responseMsg),history.go(-2)):app.toast.error(b.responseMsg),a.isSubmit(!1)},function(){app.toast.error(app["const"].AJAX_ERROR_MSG,2e3),a.isSubmit(!1)})}},a.initDateTimePicker=function(a,b){b||(b=(new Date).getTime());var c={preset:"date",theme:"android-holo-light",display:"bottom",mode:"scroller",dateOrder:"yymmdd",dateFormat:"yy/mm/dd",min:new Date(b),lang:"zh",rows:3,stepMinute:60,buttons:[{text:"取消",handler:"cancel"},{text:"确定",handler:"set"}]};return $(a).mobiscroll(c)},a.init=function(b){a.selectedShop({}),a.isGoShop()?a.isGoShop(!a.isGoShop()):(a.dateFrom(""),a.dateTo(""),localStorage.removeItem("selectedCommanderShop"),a.getUserInfoByUserId(b)),a.initShop(app.util.getQueryString("storeId")),a.initShop()&&a.selectedShop(JSON.parse(localStorage.relationStore)),localStorage.selectedCommanderShop&&a.selectedShop(JSON.parse(localStorage.selectedCommanderShop)),a.initDateTimePicker("#addStoreRelationPage #starDate"),a.initDateTimePicker("#addStoreRelationPage #endDate")}},addStoreStaffModel=function(){var a=this;a.account=ko.observable(),a.isShowEdit=ko.observable(),a.codeText=ko.observable(),a.storeId=ko.observable(),a.checkAccount=function(b){return b?app.util.isInt(b)?void app.util.ajax("/myStore/checkUserValid",{token:localStorage.token,userId:b},function(c){0===c.responseCode?location.href="#/addStoreRelation/"+b+"?storeId="+a.storeId():app.toast.error(c.responseMsg)}):void app.toast.error("请填写正确的员工编号！"):void 0},a.scan=function(){app.nativeFn.scan("app.addStoreStaff")},app.addStoreStaff=function(b){var b=b.split(":");return b[1]&&app.util.isInt(b[1])?(a.account(b[1]),void a.checkAccount(a.account())):void app.toast.error("扫码有误，请重新扫描二维码！")},a.addCode=function(){a.isShowEdit(!0),a.codeText(""),$("#addStoreStaffPage .input").focus()},a.saveCode=function(){return console.log(a.codeText()),app.util.isNumber(a.codeText())?a.codeText()?void a.checkAccount(a.codeText()):void app.toast.error("请填写员工编号！"):void app.toast.error("请填写正确的员工编号！")},a.init=function(){var b=app.util.getQueryString("storeId");a.storeId(b?b:""),a.isShowEdit(!1),a.codeText("")}},selectCommanderShopModel=function(){var a=this;a.storeList=ko.observableArray(),a.getStoreListByCommander=function(){app.util.ajax("/myStore/getStoreListByCommander",{token:localStorage.token},function(b){console.log(b),0===b.responseCode?(0==b.itemList.length&&app.popup.alert("您当前没有可挂靠人员的责任门店",2e3,function(){history.go(-1)}),a.storeList(b.itemList)):app.toast.error(b.responseMsg)})},a.select=function(a){localStorage.selectedCommanderShop=JSON.stringify(a),history.go(-1)},a.init=function(){a.getStoreListByCommander()}};